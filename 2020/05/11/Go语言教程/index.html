






<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="John Doe">
  
  
  
  
    <meta name="description" content="Chapter1：Golang开篇终于等到你！Go语言——让你用写Python代码的开发效率编写C语言代码
Golang方向
区块链研发工程师

Go服务器端/游戏软件工程师

Golang分布式/云计算软件工程师（消息系统）


Golang应用领域
区块链应用（分布式账本技术，去中心化，每个人均可参与数据库记录）

后端服务器应用（美团后台流量支撑程序-排序推荐搜索）

云计算/云服务后...">
  
  <title>Go语言教程 [ Kevin Blog ]</title>
  
  
    <link rel="shortcut icon" href="/hollow.ico">
  
  
  
<link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">

  
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2020/05/11/Transformer%E4%B8%8EBERT%E6%A8%A1%E5%9E%8B/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        Transformer与BERT模型
      </div>
    </div>
  
  
    <div class="item next">
      <a href="/2020/05/11/LeetCode%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%A2%98%E8%A7%A3/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        LeetCode动态规划题解
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="https://avatars2.githubusercontent.com/u/2735087?s=60&u=775d4033139cae6b23c593bcf59fa433224ba4e3&v=4"/>
          <div id="homelink">Kevin Blog</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/index.html">Home</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">Archives</a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">Tags</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">Categories</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">About</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/kevin2018pg" target="_blank" rel="noopener">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  

  <article id="post">
    <h1>Go语言教程</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">Created at 2020-05-11</span>
      
        <span id = "post-title-updated">Updated at 2020-05-11</span>
      
      
      
    </p>
    
    <h1 id="Chapter1：Golang开篇"><a href="#Chapter1：Golang开篇" class="headerlink" title="Chapter1：Golang开篇"></a>Chapter1：Golang开篇</h1><p><strong>终于等到你！Go语言——让你用写Python代码的开发效率编写C语言代码</strong></p>
<h2 id="Golang方向"><a href="#Golang方向" class="headerlink" title="Golang方向"></a>Golang方向</h2><ol>
<li><p>区块链研发工程师</p>
</li>
<li><p>Go服务器端/游戏软件工程师</p>
</li>
<li><p>Golang分布式/云计算软件工程师（消息系统）</p>
</li>
</ol>
<h2 id="Golang应用领域"><a href="#Golang应用领域" class="headerlink" title="Golang应用领域"></a>Golang应用领域</h2><ol>
<li><p>区块链应用（分布式账本技术，去中心化，每个人均可参与数据库记录）</p>
</li>
<li><p>后端服务器应用（美团后台流量支撑程序-排序推荐搜索）</p>
</li>
<li><p>云计算/云服务后台应用（盛大云CDN-内容分发网络，京东消息推送云服务，分布式文件系统）</p>
</li>
</ol>
<h2 id="Go语言特点"><a href="#Go语言特点" class="headerlink" title="Go语言特点"></a>Go语言特点</h2><p>简介：Go语言保证了既能达到静态编译语言的安全和性能，由达到动态语言开发维护的高效率，Go=C +Python。</p>
<p>1、从C语言中继承了很多理念，包括表达式语法，控制结构，基础数据类型，调用参数传值，<strong>指针</strong>等，也保留和C语言一样的编译执行方式及弱化的指针。举例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//go语言指针的使用特点</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testPtr</span><span class="params">(num *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	*num = <span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、引入包的概念，用于组织程序结构，Go语言的一个文件都要归属于一个包，而不能单独存在</p>
<p>3、垃圾回收机制，内存自动回收，不需开发人员管理</p>
<p>4、天然并发（重要特点）</p>
<p>​    从语言层面支持并发，实现简单</p>
<p>​    <code>goroutine</code>，轻量级线程，可实现大并发处理，高效利用多核</p>
<p>​    基于CPS并发模型实现</p>
<p>5、吸收了管道通信机制，形成Go语言特有的管道channel，通过管道channel可以实现不同的goroute之间的相互通信</p>
<p>6、函数可以返回多个值。举例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写一个函数，实现同时返回和，差</span></span><br><span class="line"><span class="comment">//go函数支持返回多个值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSumAndSub</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	sum := n1 + n2 <span class="comment">//go语句后面不要带分号</span></span><br><span class="line">	sub := n1 - n2</span><br><span class="line">	<span class="keyword">return</span> sum, sub</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7、新的创新：比如切片、延时执行defer（回收资源）等</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CDesktop%5C15511649241043.jpg" alt="-w839"></p>
<h2 id="goroutine特点"><a href="#goroutine特点" class="headerlink" title="goroutine特点"></a>goroutine特点</h2><p>Go语言的并发是基于 <code>goroutine</code> 的，<code>goroutine</code> 类似于线程，但并非线程。可以将 <code>goroutine</code> 理解为一种虚拟线程。Go 语言运行时会参与调度 <code>goroutine</code>，并将 <code>goroutine</code> 合理地分配到每个 CPU 中，最大限度地使用CPU性能。开启一个<code>goroutine</code>的消耗非常小（大约2KB的内存），你可以轻松创建数百万个<code>goroutine</code></p>
<ol>
<li><code>goroutine</code>具有可增长的分段堆栈。这意味着它们只在需要时才会使用更多内存。</li>
<li><code>goroutine</code>的启动时间比线程快。</li>
<li><code>goroutine</code>原生支持利用channel安全地进行通信。</li>
<li><code>goroutine</code>共享数据结构时无需使用互斥锁。</li>
</ol>
<h1 id="Chapter2：搭建Go开发环境"><a href="#Chapter2：搭建Go开发环境" class="headerlink" title="Chapter2：搭建Go开发环境"></a>Chapter2：搭建Go开发环境</h1><h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p>Go官网下载地址：<a href="https://golang.org/dl/" target="_blank" rel="noopener">https://golang.org/dl/</a></p>
<p>Go官方镜像站（推荐）：<a href="https://golang.google.cn/dl/" target="_blank" rel="noopener">https://golang.google.cn/dl/</a></p>
<p>Windows平台和Mac平台推荐下载可执行文件版，Linux平台下载压缩文件版。</p>
<h3 id="Linux下安装"><a href="#Linux下安装" class="headerlink" title="Linux下安装"></a>Linux下安装</h3><p>我们在版本选择页面选择并下载好<code>go1.11.5.linux-amd64.tar.gz</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/go/go1.11.5.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>

<p>将下载好的文件解压到<code>/usr/local</code>目录下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/<span class="built_in">local</span>/go  <span class="comment"># 创建目录</span></span><br><span class="line">tar -C /usr/<span class="built_in">local</span>/go zxvf go1.11.5.linux-amd64.tar.gz. <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>

<p>如果提示没有权限，加上<code>sudo</code>以root用户的身份再运行。执行完就可以在<code>/usr/local/</code>下看到go目录了。</p>
<p>配置环境变量： Linux下有两个文件可以配置环境变量，其中<code>/etc/profile</code>是对所有用户生效的；<code>$HOME/.profile</code>是对当前用户生效的，根据自己的情况自行选择一个文件打开，添加如下两行代码，保存退出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOROOT=/usr/<span class="built_in">local</span>/go</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GOROOT</span>/bin</span><br></pre></td></tr></table></figure>

<p>修改<code>/etc/profile</code>后要重启生效，修改<code>$HOME/.profile</code>后使用source命令加载<code>$HOME/.profile</code>文件即可生效。 检查：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ go version</span><br><span class="line">go version go1.11.5 linux/amd64</span><br></pre></td></tr></table></figure>

<h2 id="Go配置环境变量"><a href="#Go配置环境变量" class="headerlink" title="Go配置环境变量"></a>Go配置环境变量</h2><p><code>GOROOT</code>和<code>GOPATH</code>都是环境变量，其中<code>GOROOT</code>是我们安装go开发包的路径，而从Go 1.8版本开始，Go开发包在安装完成后会为<code>GOPATH</code>设置一个默认目录，参见下表。</p>
<table>
<thead>
<tr>
<th align="center">平台</th>
<th align="center">GOPATH默认值</th>
<th align="center">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Windows</td>
<td align="center">%USERPROFILE%/go</td>
<td align="center">C:\Users\用户名\go</td>
</tr>
<tr>
<td align="center">Unix</td>
<td align="center">$HOME/go</td>
<td align="center">/home/用户名/go</td>
</tr>
</tbody></table>
<ul>
<li><code>GOROOT</code>：SDK的安装路径</li>
<li><code>Path</code>：添加SDK的/bin目录</li>
<li><code>GOPATH</code>：工作目录，go项目工作路径</li>
</ul>
<p><strong>注意：</strong>Go语言1.14版本之后推荐使用go modules管理以来，也不再需要把代码写在GOPATH目录下了</p>
<h3 id="GOPROXY"><a href="#GOPROXY" class="headerlink" title="GOPROXY"></a>GOPROXY</h3><p>Go1.14版本之后，都推荐使用<code>go mod</code>模式来管理依赖环境了，也不再强制我们把代码必须写在<code>GOPATH</code>下面的src目录了，你可以在你电脑的任意位置编写go代码。</p>
<p>默认GoPROXY配置是：<code>GOPROXY=https://proxy.golang.org,direct</code>，由于国内访问不到<code>https://proxy.golang.org</code>，所以我们需要换一个PROXY，这里推荐使用<code>https://goproxy.io</code>或<code>https://goproxy.cn</code>。</p>
<p>可以执行下面的命令修改GOPROXY：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go env -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure>

<h2 id="Go语言快速入门"><a href="#Go语言快速入门" class="headerlink" title="Go语言快速入门"></a>Go语言快速入门</h2><h3 id="开发目录结构"><a href="#开发目录结构" class="headerlink" title="开发目录结构"></a>开发目录结构</h3><p><code>goproject/src/go_code/project01/main or package</code></p>
<h3 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h3><ol>
<li>编写Go代码</li>
<li>通过<code>go build</code>命令对该go文件进行编译，生成可执行文件</li>
<li>在终端执行可执行文件</li>
<li>注意：通过<code>go run</code>命令可以直接运行go程序，生产环境都是先编译再执行</li>
</ol>
<h3 id="Go执行流程分析"><a href="#Go执行流程分析" class="headerlink" title="Go执行流程分析"></a>Go执行流程分析</h3><ul>
<li>.go源文件 –&gt;<code>go build</code> –&gt; 可执行文件 –&gt; 结果</li>
<li>.go源文件 –&gt; <code>go run</code> –&gt; 结果</li>
</ul>
<p><strong>两种执行流程方式的区别：</strong></p>
<ol>
<li>如果先编译生成可执行文件，那么可以将该可执行文件拷贝到没有go开发环境的机器上，仍然可以运行</li>
<li>如果是直接<code>go run .go</code>源代码，那么如果在另一台机器上运行，需要go开发环境</li>
<li>在编译时，编译器会将程序运行依赖的库文件包含在可执行文件中，所以，可执行文件变大了很多</li>
</ol>
<p><strong>go install</strong></p>
<p><code>go install</code>表示安装的意思，它先编译源代码得到可执行文件，然后将可执行文件移动到<code>GOPATH</code>的bin目录下。因为我们的环境变量中配置了<code>GOPATH</code>下的bin目录，所以我们就可以在任意地方直接执行可执行文件了。</p>
<h3 id="编译和运行说明"><a href="#编译和运行说明" class="headerlink" title="编译和运行说明"></a>编译和运行说明</h3><p><strong>编译</strong></p>
<p>有了go源文件，通过编译器将其编译成机器可以识别的二进制码文件</p>
<p>在该源文件目录下，通过<code>go build</code>对<code>hello.go</code>文件进行编译。可以指定生成的可执行文件名，在windows下必须是.exe后缀</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -o指定编译后的可执行文件名</span></span><br><span class="line"><span class="keyword">go</span> build -o myhello.exe hello.<span class="keyword">go</span></span><br></pre></td></tr></table></figure>

<p>如果程序没有错误，编译没有任何提示，反之编译时会在错误的那行报错</p>
<p><strong>运行</strong></p>
<p>直接运行编译完的可执行文件</p>
<p><code>go run</code> 运行源代码</p>
<h4 id="跨平台编译"><a href="#跨平台编译" class="headerlink" title="跨平台编译"></a>跨平台编译</h4><p>默认我们<code>go build</code>的可执行文件都是当前操作系统可执行的文件，如果我想在windows下编译一个linux下可执行文件，那需要怎么做呢？</p>
<p>只需要指定目标操作系统的平台和处理器架构即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET CGO_ENABLED=0  // 禁用CGO</span><br><span class="line">SET GOOS=linux  // 目标平台是linux</span><br><span class="line">SET GOARCH=amd64  // 目标处理器架构是amd64</span><br></pre></td></tr></table></figure>

<p><em>使用了cgo的代码是不支持跨平台编译的</em></p>
<p>然后再执行<code>go build</code>命令，得到的就是能够在Linux平台运行的可执行文件了。</p>
<p>Mac 下编译 Linux 和 Windows平台 64位 可执行程序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build</span><br><span class="line">CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build</span><br></pre></td></tr></table></figure>

<p>Linux 下编译 Mac 和 Windows 平台64位可执行程序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build</span><br><span class="line">CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build</span><br></pre></td></tr></table></figure>

<p>Windows下编译Mac平台64位可执行程序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SET CGO_ENABLED=0</span><br><span class="line">SET GOOS=darwin</span><br><span class="line">SET GOARCH=amd64</span><br><span class="line">go build</span><br></pre></td></tr></table></figure>

<h3 id="Go语言开发注意事项"><a href="#Go语言开发注意事项" class="headerlink" title="Go语言开发注意事项"></a>Go语言开发注意事项</h3><ol>
<li>Go源文件以go为扩展名</li>
<li>Go应用程序的执行入口是<code>main()</code>函数</li>
<li>Go语言严格区分大小写</li>
<li>Go方法由一条条语句构成，每个语句后不需要分号（Go语言会在每行后自动加分号），这也体现出Golang的简洁性</li>
<li>Go编译器是一行一行进行编译的，因为我们一行就写一条语句，不能把多条语句写在同一行，否则报错</li>
<li>Go语言定义的变量或者import的包没有使用到，代码不能编译通过</li>
<li>大括号是成对出现的，缺一不可</li>
</ol>
<h3 id="Go语言转义字符"><a href="#Go语言转义字符" class="headerlink" title="Go语言转义字符"></a>Go语言转义字符</h3><table>
<thead>
<tr>
<th align="center">转义符</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>\r</code></td>
<td align="center">回车符（返回行首）</td>
</tr>
<tr>
<td align="center"><code>\n</code></td>
<td align="center">换行符（直接跳到下一行的同列位置）</td>
</tr>
<tr>
<td align="center"><code>\t</code></td>
<td align="center">制表符</td>
</tr>
<tr>
<td align="center"><code>\&#39;</code></td>
<td align="center">单引号</td>
</tr>
<tr>
<td align="center"><code>\&quot;</code></td>
<td align="center">双引号</td>
</tr>
<tr>
<td align="center"><code>\\</code></td>
<td align="center">反斜杠</td>
</tr>
</tbody></table>
<h3 id="注释与格式化"><a href="#注释与格式化" class="headerlink" title="注释与格式化"></a>注释与格式化</h3><p><strong>Go官方更推荐行注释</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">行注释：<span class="comment">//...</span></span><br><span class="line">块注释：<span class="comment">/*...*/</span></span><br></pre></td></tr></table></figure>

<p><strong>正确的缩进和空白</strong></p>
<ol>
<li>使用<code>tab</code>与<code>shift tab</code></li>
<li>使用<code>gofmt</code>来进行格式化</li>
<li>运算符两边各加一个空格</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式化输出，但不保存</span></span><br><span class="line">gofmt main.<span class="keyword">go</span></span><br><span class="line"><span class="comment">// 格式化并保存</span></span><br><span class="line">gofmt -w main.<span class="keyword">go</span></span><br></pre></td></tr></table></figure>

<p>行长约定：一行最长不超过80个字符，超过请用换行展示，逗号连接</p>
<h3 id="Golang官方指南"><a href="#Golang官方指南" class="headerlink" title="Golang官方指南"></a>Golang官方指南</h3><p>Golang官网：golang.org</p>
<p>Golang中文网：studygolang.com/pkgdoc</p>
<h3 id="Dos常用命令"><a href="#Dos常用命令" class="headerlink" title="Dos常用命令"></a>Dos常用命令</h3><p><strong>目录操作</strong></p>
<p>查看当前目录：<code>dir</code></p>
<p>切换目录：<code>cd</code></p>
<p>新建目录：<code>md</code></p>
<p>删除空目录：<code>rd</code></p>
<p>强制删除所有：<code>rd /q/s test</code>    q-安静模式，s-递进删除</p>
<p><strong>文件操作</strong></p>
<p>新建或追加内容文件：<code>echo hello &gt; d:test100\abc100\abc.txt</code></p>
<p>复制或移动文件：<code>copy old.txt d:test100\new.txt</code></p>
<p>​                                <code>move old.txt d:test100\</code></p>
<p>删除文件：<code>del *.txt</code></p>
<p><strong>其他</strong></p>
<p>清屏：<code>cls</code></p>
<p>退出dos：<code>exit</code></p>
<h1 id="Chapter3：Golang变量和常量"><a href="#Chapter3：Golang变量和常量" class="headerlink" title="Chapter3：Golang变量和常量"></a>Chapter3：Golang变量和常量</h1><h2 id="标识符与关键字"><a href="#标识符与关键字" class="headerlink" title="标识符与关键字"></a>标识符与关键字</h2><p><strong>标识符</strong></p>
<p>在编程语言中标识符就是程序员定义的具有特殊意义的词，比如变量名、常量名、函数名等等。 Go语言中标识符由字母数字和<code>_</code>(下划线）组成，并且只能以字母和<code>_</code>开头。 举几个例子：<code>abc</code>, <code>_</code>, <code>_123</code>, <code>a123</code>。</p>
<p><strong>关键字</strong></p>
<p>关键字是指编程语言中预先定义好的具有特殊含义的标识符。 关键字和保留字都不建议用作变量名。</p>
<p>Go语言中有25个关键字：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>        <span class="keyword">default</span>      <span class="function"><span class="keyword">func</span>         <span class="title">interface</span>    <span class="title">select</span></span></span><br><span class="line"><span class="keyword">case</span>         <span class="keyword">defer</span>        <span class="keyword">go</span>           <span class="keyword">map</span>          <span class="keyword">struct</span></span><br><span class="line"><span class="keyword">chan</span>         <span class="keyword">else</span>         <span class="keyword">goto</span>         <span class="keyword">package</span>      <span class="keyword">switch</span></span><br><span class="line"><span class="keyword">const</span>        <span class="keyword">fallthrough</span>  <span class="keyword">if</span>           <span class="keyword">range</span>        <span class="keyword">type</span></span><br><span class="line"><span class="keyword">continue</span>     <span class="keyword">for</span>          <span class="keyword">import</span>       <span class="keyword">return</span>       <span class="keyword">var</span></span><br></pre></td></tr></table></figure>

<p>此外，Go语言中还有37个保留字。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Constants:    <span class="literal">true</span>  <span class="literal">false</span>  <span class="literal">iota</span>  <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">    Types:    <span class="keyword">int</span>  <span class="keyword">int8</span>  <span class="keyword">int16</span>  <span class="keyword">int32</span>  <span class="keyword">int64</span>  </span><br><span class="line">              <span class="keyword">uint</span>  <span class="keyword">uint8</span>  <span class="keyword">uint16</span>  <span class="keyword">uint32</span>  <span class="keyword">uint64</span>  <span class="keyword">uintptr</span></span><br><span class="line">              <span class="keyword">float32</span>  <span class="keyword">float64</span>  <span class="keyword">complex128</span>  <span class="keyword">complex64</span></span><br><span class="line">              <span class="keyword">bool</span>  <span class="keyword">byte</span>  <span class="keyword">rune</span>  <span class="keyword">string</span>  error</span><br><span class="line"></span><br><span class="line">Functions:   <span class="built_in">make</span>  <span class="built_in">len</span>  <span class="built_in">cap</span>  <span class="built_in">new</span>  <span class="built_in">append</span>  <span class="built_in">copy</span>  <span class="built_in">close</span>  <span class="built_in">delete</span></span><br><span class="line">             <span class="built_in">complex</span>  <span class="built_in">real</span>  <span class="built_in">imag</span></span><br><span class="line">             <span class="built_in">panic</span>  <span class="built_in">recover</span></span><br></pre></td></tr></table></figure>

<h2 id="变量介绍"><a href="#变量介绍" class="headerlink" title="变量介绍"></a>变量介绍</h2><p><strong>概念：</strong>变量相当于内存中一个数据存储空间的表示，可以将变量看做一个房间的门牌号</p>
<p><strong>变量来历：</strong>程序运行过程中的数据都是保存在内存中，我们想要在代码中操作某个数据时就需要去内存上找到这个变量，但是如果我们直接在代码中通过内存地址去操作变量的话，代码的可读性会非常差而且还容易出错，所以我们就利用变量将这个数据的内存地址保存起来，以后直接通过这个变量就能找到内存上对应的数据了。</p>
<p><strong>变量使用：</strong>声明变量    -&gt;    赋值    -&gt;    使用</p>
<p><strong>Go语言中的每一个变量都有自己的类型，并且变量必须经过声明才能开始使用。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main  <span class="comment">// 声明 main 包，表明当前是一个可执行程序</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span>  <span class="comment">// 导入内置 fmt 包</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;	<span class="comment">// main函数，是程序执行的入口</span></span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span></span><br><span class="line">	i = <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">"i = "</span>,i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="变量使用注意事项"><a href="#变量使用注意事项" class="headerlink" title="变量使用注意事项"></a>变量使用注意事项</h2><p>变量=变量名+值+数据类型，变量三要素</p>
<p>变量表示内存中的一个存储区域，该区域有自己的名称（变量名）和类型（数据类型）</p>
<p>Go语言中的变量需要声明后才能使用，同一作用域内不支持重复声明。 并且Go语言的变量声明后必须使用</p>
<h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><p><strong>标准声明</strong></p>
<p>Go语言的变量声明格式为：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 变量类型</span><br></pre></td></tr></table></figure>

<p>变量声明以关键字<code>var</code>开头，变量类型放在变量的后面，行尾无需分号。 举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> age <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> isOk <span class="keyword">bool</span></span><br></pre></td></tr></table></figure>

<p><strong>批量声明</strong></p>
<p>每声明一个变量就需要写<code>var</code>关键字会比较繁琐，go语言中还支持批量变量声明：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="keyword">string</span></span><br><span class="line">    b <span class="keyword">int</span></span><br><span class="line">    c <span class="keyword">bool</span></span><br><span class="line">    d <span class="keyword">float32</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="变量初始化"><a href="#变量初始化" class="headerlink" title="变量初始化"></a>变量初始化</h3><p>Go语言在声明变量的时候，会自动对变量对应的内存区域进行初始化操作。每个变量会被初始化成其类型的默认值，例如： 整型和浮点型变量的默认值为<code>0</code>。 字符串变量的默认值为<code>空字符串</code>。 布尔型变量默认为<code>false</code>。 切片、函数、指针变量的默认为<code>nil</code>。</p>
<p>当然我们也可在声明变量的时候为其指定初始值。变量初始化的标准格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 类型 = 表达式</span><br></pre></td></tr></table></figure>

<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name <span class="keyword">string</span> = <span class="string">"Q1mi"</span></span><br><span class="line"><span class="keyword">var</span> age <span class="keyword">int</span> = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<p>或者一次初始化多个变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name, age = <span class="string">"Q1mi"</span>, <span class="number">20</span></span><br></pre></td></tr></table></figure>

<h4 id="类型推导"><a href="#类型推导" class="headerlink" title="类型推导"></a>类型推导</h4><p>有时候我们会将变量的类型省略，这个时候编译器会根据等号右边的值来推导变量的类型完成初始化。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"Q1mi"</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<h4 id="短变量声明"><a href="#短变量声明" class="headerlink" title="短变量声明"></a>短变量声明</h4><p>在函数内部，可以使用更简略的 <code>:=</code> 方式声明并初始化变量。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 全局变量m</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	n := <span class="number">10</span></span><br><span class="line">	m := <span class="number">200</span> <span class="comment">// 此处声明局部变量m</span></span><br><span class="line">	fmt.Println(m, n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多变量声明"><a href="#多变量声明" class="headerlink" title="多变量声明"></a>多变量声明</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="comment">// 定义全局变量</span></span><br><span class="line"><span class="keyword">var</span> g1 = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> g2 = <span class="number">200</span></span><br><span class="line"><span class="keyword">var</span> g3 = <span class="number">300</span></span><br><span class="line"><span class="comment">// 上面的声明方式，可以改写成一次性声明</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	g4 = <span class="number">400</span></span><br><span class="line">	g5 = <span class="number">500</span></span><br><span class="line">	g6 = <span class="number">600</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 一次性声明多个变量</span></span><br><span class="line">	<span class="keyword">var</span> n1, n2, n3 <span class="keyword">int</span></span><br><span class="line">	fmt.Println(<span class="string">"n1="</span>, n1, <span class="string">"n2="</span>, n2, <span class="string">"n3="</span>, n3)</span><br><span class="line">	<span class="comment">// 一次性声明多个类型</span></span><br><span class="line">	<span class="keyword">var</span> n, name, num = <span class="number">100</span>, <span class="string">"Tom"</span>, <span class="number">888</span></span><br><span class="line">	fmt.Println(<span class="string">"n="</span>, n, <span class="string">"neme is"</span>, name, <span class="string">"num="</span>, num)</span><br><span class="line">	<span class="comment">// 类型推导</span></span><br><span class="line">	n4, name1, num1 := <span class="number">100</span>, <span class="string">"Tom"</span>, <span class="number">888</span></span><br><span class="line">	fmt.Println(<span class="string">"n4="</span>, n4, <span class="string">"neme1 is"</span>, name1, <span class="string">"num1="</span>, num1)</span><br><span class="line">	<span class="comment">// 输出全局变量</span></span><br><span class="line">	fmt.Println(g1, g2, g3, g4, g5, g6)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="匿名变量"><a href="#匿名变量" class="headerlink" title="匿名变量"></a>匿名变量</h4><p>在使用多重赋值时，如果想要忽略某个值，可以使用<code>匿名变量（anonymous variable）</code>。 匿名变量用一个下划线<code>_</code>表示，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">10</span>, <span class="string">"Q1mi"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x, _ := foo()</span><br><span class="line">	_, y := foo()</span><br><span class="line">	fmt.Println(<span class="string">"x="</span>, x)</span><br><span class="line">	fmt.Println(<span class="string">"y="</span>, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>匿名变量不占用命名空间，不会分配内存，所以匿名变量之间不存在重复声明。 (在<code>Lua</code>等编程语言里，匿名变量也被叫做哑元变量。)</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>函数外的每个语句都必须以关键字开始（var、const、func等）</li>
<li><code>:=</code>不能使用在函数外。</li>
<li><code>_</code>多用于占位，表示忽略值。</li>
</ol>
<p><strong>补充</strong></p>
<p>作用域的数据值可以在<strong>同一类型</strong>范围内不断变化</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	i = <span class="number">20</span></span><br><span class="line">	i = <span class="number">30</span></span><br><span class="line">	fmt.Println(i)</span><br><span class="line">	i = <span class="number">1.2</span> <span class="comment">//constant 1.2 truncated to integer，原因是不能改变数据类型</span></span><br><span class="line">	fmt.Println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>变量在一个作用域内（<strong>一个函数或者代码块内</strong>）不能重命名</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	fmt.Println(i)</span><br><span class="line">	<span class="keyword">var</span> i := <span class="number">40</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="判断变量类型"><a href="#判断变量类型" class="headerlink" title="判断变量类型"></a>判断变量类型</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"> <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">        v1 := <span class="string">"123456"</span></span><br><span class="line">        v2 := <span class="number">12</span></span><br><span class="line"></span><br><span class="line">        fmt.Printf(<span class="string">"v1 type:%T\n"</span>, v1)</span><br><span class="line">        fmt.Printf(<span class="string">"v2 type:%T\n"</span>, v2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式二</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"> <span class="string">"fmt"</span></span><br><span class="line"> <span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        v1 := <span class="string">"123456"</span></span><br><span class="line">        v2 := <span class="number">12</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// reflect</span></span><br><span class="line">        fmt.Println(<span class="string">"v1 type:"</span>, reflect.TypeOf(v1))</span><br><span class="line">        fmt.Println(<span class="string">"v2 type:"</span>, reflect.TypeOf(v2))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>相对于变量，常量是恒定不变的值，多用于定义程序运行期间不会改变的那些值。 常量的声明和变量声明非常类似，只是把<code>var</code>换成了<code>const</code>，常量在定义的时候必须赋值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pi = <span class="number">3.1415</span></span><br><span class="line"><span class="keyword">const</span> e = <span class="number">2.7182</span></span><br></pre></td></tr></table></figure>

<p>声明了<code>pi</code>和<code>e</code>这两个常量之后，在整个程序运行期间它们的值都不能再发生变化了。</p>
<p>多个常量也可以一起声明：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    pi = <span class="number">3.1415</span></span><br><span class="line">    e = <span class="number">2.7182</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>const同时声明多个常量时，如果省略了值则表示和上面一行的值相同。 例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    n1 = <span class="number">100</span></span><br><span class="line">    n2</span><br><span class="line">    n3</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>上面示例中，常量<code>n1</code>、<code>n2</code>、<code>n3</code>的值都是100。</p>
<h3 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h3><p><code>iota</code>是go语言的常量计数器，只能在常量的表达式中使用。</p>
<p><code>iota</code>在const关键字出现时将被重置为0。const中<strong>每新增一行常量声明</strong>将使<code>iota</code>计数一次(iota可理解为const语句块中的行索引)。 使用iota能简化定义，在定义枚举时很有用。</p>
<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">		n1 = <span class="literal">iota</span> <span class="comment">//0</span></span><br><span class="line">		n2        <span class="comment">//1</span></span><br><span class="line">		n3        <span class="comment">//2</span></span><br><span class="line">		n4        <span class="comment">//3</span></span><br><span class="line">	)</span><br></pre></td></tr></table></figure>

<h3 id="常见的iota示例"><a href="#常见的iota示例" class="headerlink" title="常见的iota示例"></a>常见的<code>iota</code>示例</h3><p>使用<code>_</code>跳过某些值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">		n1 = <span class="literal">iota</span> <span class="comment">//0</span></span><br><span class="line">		n2        <span class="comment">//1</span></span><br><span class="line">		_</span><br><span class="line">		n4        <span class="comment">//3</span></span><br><span class="line">	)</span><br></pre></td></tr></table></figure>

<p><code>iota</code>声明中间插队</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">		n1 = <span class="literal">iota</span> <span class="comment">//0</span></span><br><span class="line">		n2 = <span class="number">100</span>  <span class="comment">//100</span></span><br><span class="line">		n3 = <span class="literal">iota</span> <span class="comment">//2</span></span><br><span class="line">		n4        <span class="comment">//3</span></span><br><span class="line">	)</span><br><span class="line">	<span class="keyword">const</span> n5 = <span class="literal">iota</span> <span class="comment">//0</span></span><br></pre></td></tr></table></figure>

<p>定义数量级 （这里的<code>&lt;&lt;</code>表示左移操作，<code>1&lt;&lt;10</code>表示将1的二进制表示向左移10位，也就是由<code>1</code>变成了<code>10000000000</code>，也就是十进制的1024。同理<code>2&lt;&lt;2</code>表示将2的二进制表示向左移2位，也就是由<code>10</code>变成了<code>1000</code>，也就是十进制的8。）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">		_  = <span class="literal">iota</span></span><br><span class="line">		KB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">		MB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">		GB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">		TB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">		PB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">	)</span><br></pre></td></tr></table></figure>

<p>多个<code>iota</code>定义在一行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">		a, b = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span> <span class="comment">//1,2</span></span><br><span class="line">		c, d                      <span class="comment">//2,3</span></span><br><span class="line">		e, f                      <span class="comment">//3,4</span></span><br><span class="line">	)</span><br></pre></td></tr></table></figure>

<h2 id="变量的数据类型"><a href="#变量的数据类型" class="headerlink" title="变量的数据类型"></a>变量的数据类型</h2><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><p>一个字节是八位，八位占存储空间一字节（<code>1byte = 8bit</code>，<code>bit</code>计算机中最小存储单位，<code>byte</code>计算机中基本存储单元）</p>
<p>有符号第一位表示正负号，剩下七位表示数，那么<code>int8</code>范围相当于<code>-2^7 ~ 2^7-1</code>，无符号第一位也表示数，那么<code>uint8</code>范围相当于<code>0 ~ 2^8-1</code></p>
<p><code>int8</code>,<code>int16</code>,<code>int32</code>,<code>int64</code>（有符号），<code>uint8</code>,<code>uint16</code>,<code>uint32</code>,<code>uint64</code>（无符号）</p>
<p><code>rune</code>等同于<code>int32</code>（<code>-2^31 ~ 2^31-1</code>），<code>byte</code>等同于<code>uint8</code>（<code>0 ~ 2^8-1</code>），<code>int16</code>对应C语言中的<code>short</code>型，<code>int64</code>对应C语言中的<code>long</code>型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	fmt.Printf(<span class="string">"i变量类型：%T，i占用字节大小：%d"</span>, i, unsafe.Sizeof(i))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// i变量类型：int，i占用字节大小：8</span></span><br></pre></td></tr></table></figure>

<p>​    Golang中整形变量在使用时，遵守保小不保大原则，避免存储空间浪费</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例如年龄，byte范围在(0,255)</span></span><br><span class="line"><span class="keyword">var</span> age <span class="keyword">byte</span> = <span class="number">90</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">uint8</td>
<td align="left">无符号 8位整型 (0 到 255)</td>
</tr>
<tr>
<td align="left">uint16</td>
<td align="left">无符号 16位整型 (0 到 65535)</td>
</tr>
<tr>
<td align="left">uint32</td>
<td align="left">无符号 32位整型 (0 到 4294967295)</td>
</tr>
<tr>
<td align="left">uint64</td>
<td align="left">无符号 64位整型 (0 到 18446744073709551615)</td>
</tr>
<tr>
<td align="left">int8</td>
<td align="left">有符号 8位整型 (-128 到 127)</td>
</tr>
<tr>
<td align="left">int16</td>
<td align="left">有符号 16位整型 (-32768 到 32767)</td>
</tr>
<tr>
<td align="left">int32</td>
<td align="left">有符号 32位整型 (-2147483648 到 2147483647)</td>
</tr>
<tr>
<td align="left">int64</td>
<td align="left">有符号 64位整型 (-9223372036854775808 到 9223372036854775807)</td>
</tr>
</tbody></table>
<h4 id="特殊整型"><a href="#特殊整型" class="headerlink" title="特殊整型"></a>特殊整型</h4><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">uint</td>
<td align="center">32位操作系统上就是<code>uint32</code>，64位操作系统上就是<code>uint64</code></td>
</tr>
<tr>
<td align="center">int</td>
<td align="center">32位操作系统上就是<code>int32</code>，64位操作系统上就是<code>int64</code></td>
</tr>
<tr>
<td align="center">uintptr</td>
<td align="center">无符号整型，用于存放一个指针</td>
</tr>
</tbody></table>
<p><strong>注意：</strong> 在使用<code>int</code>和 <code>uint</code>类型时，不能假定它是32位或64位的整型，而是考虑<code>int</code>和<code>uint</code>可能在不同平台上的差异。</p>
<p><strong>注意事项：</strong> 获取对象的长度的内建<code>len()</code>函数返回的长度可以根据不同平台的字节长度进行变化。实际使用中，切片或 map 的元素数量等都可以用<code>int</code>来表示。在涉及到二进制传输、读写文件的结构描述时，为了保持文件的结构不会受到不同编译目标平台字节长度的影响，不要使用<code>int</code>和 <code>uint</code>。</p>
<h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><p>Go语言支持两种浮点型数：<code>float32</code>和<code>float64</code>。这两种浮点型数据格式遵循<code>IEEE 754</code>标准： <code>float32</code> 的浮点数的最大范围约为 <code>3.4e38</code>，可以使用常量定义：<code>math.MaxFloat32</code>。 <code>float64</code> 的浮点数的最大范围约为 <code>1.8e308</code>，可以使用一个常量定义：<code>math.MaxFloat64</code></p>
<ul>
<li><code>float32</code>，单精度，占用四字节</li>
<li><code>float64</code>，双精度，占用八字节</li>
</ul>
<p>浮点数存储=符号位+指数位+尾数位，浮点数的使用可能会丢失尾数造成精度损失</p>
<p>打印浮点数时，可以使用<code>fmt</code>包配合动词<code>%f</code>，代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">        <span class="string">"fmt"</span></span><br><span class="line">        <span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"%f\n"</span>, math.Pi)</span><br><span class="line">        fmt.Printf(<span class="string">"%.2f\n"</span>, math.Pi)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h4><p><code>complex64</code>和<code>complex128</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c1 <span class="keyword">complex64</span></span><br><span class="line">c1 = <span class="number">1</span> + <span class="number">2i</span></span><br><span class="line"><span class="keyword">var</span> c2 <span class="keyword">complex128</span></span><br><span class="line">c2 = <span class="number">2</span> + <span class="number">3i</span></span><br><span class="line">fmt.Println(c1)</span><br><span class="line">fmt.Println(c2)</span><br></pre></td></tr></table></figure>

<h4 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h4><p>Go语言中以<code>bool</code>类型进行声明布尔型数据，布尔型数据只有<code>true（真）</code>和<code>false（假）</code>两个值。</p>
<p><strong>注意：</strong></p>
<ol>
<li>布尔类型变量的默认值为<code>false</code></li>
<li>Go 语言中不允许将整型强制转换为布尔型</li>
<li>布尔型无法参与数值运算，也无法与其他类型进行转换</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 演示golang中布尔类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="literal">false</span></span><br><span class="line">	fmt.Println(<span class="string">"a="</span>, a) <span class="comment">// a= false</span></span><br><span class="line">	<span class="comment">// 注意事项：</span></span><br><span class="line">	<span class="comment">// 1.bool类型占用存储空间是一个字节</span></span><br><span class="line">	fmt.Println(<span class="string">"a 占用空间："</span>, unsafe.Sizeof(a)) <span class="comment">// a 占用空间： 1</span></span><br><span class="line">	<span class="comment">// 2.bool类型只能取true和false</span></span><br><span class="line">	a = <span class="number">1</span>  <span class="comment">// 错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="字符型（没有专门的字符型，使用byte来保存单个字母字符）"><a href="#字符型（没有专门的字符型，使用byte来保存单个字母字符）" class="headerlink" title="字符型（没有专门的字符型，使用byte来保存单个字母字符）"></a>字符型（没有专门的字符型，使用byte来保存单个字母字符）</h4><p>​    Golang中没有专门的字符类型，如果要存储单个字符（字母），一般使用byte来保存</p>
<p>​    字符串就是一串固定长度的字符连接起来的字符序列，Go的字符串是由单个字节连接起来的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="comment">// 演示golang中字符类型使用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> c1 <span class="keyword">byte</span> = <span class="string">'a'</span></span><br><span class="line">	<span class="keyword">var</span> c2 <span class="keyword">byte</span> = <span class="string">'0'</span></span><br><span class="line">	<span class="comment">// 1.当我们直接输出byte值，就是输出了对应的字符码值</span></span><br><span class="line">	fmt.Println(<span class="string">"c1 = "</span>, c1, <span class="string">"\nc2 = "</span>, c2)</span><br><span class="line">	<span class="comment">// c1 =  97	c2 =  48</span></span><br><span class="line">	<span class="comment">// 2.如果我们希望输出对应字符，需要格式化输出</span></span><br><span class="line">	fmt.Printf(<span class="string">"c1 = %c,c2 = %c"</span>, c1, c2)</span><br><span class="line">	<span class="comment">// c1 = a,c2 = 0</span></span><br><span class="line">	<span class="comment">//3.溢出情况</span></span><br><span class="line">	<span class="comment">//var c3 byte = '北'</span></span><br><span class="line">	<span class="comment">//fmt.Printf("c3 = %c", c3)</span></span><br><span class="line">	<span class="comment">// constant 21271 overflows byte</span></span><br><span class="line">	<span class="comment">//4.换个类型</span></span><br><span class="line">	<span class="keyword">var</span> c3 <span class="keyword">int</span> = <span class="string">'北'</span></span><br><span class="line">	fmt.Printf(<span class="string">"c3 = %c,c3对应码值=%d"</span>, c3, c3)</span><br><span class="line">	<span class="comment">//c3 = 北,c3对应码值=21271</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    对上面代码说明：</p>
<ol>
<li>​        如果我们保存的字符在ASCII表的，比如[0-1,a-z,A-Z…]可以直接保存到byte</li>
<li>​        如果我们保存的字符对应码值均大于255，这时我们可以考虑使用int类型保存</li>
<li>​        如果我们需要按照字符的方式输出，这时我们需要格式化输出，即<strong>fmt.Printf(“%c”, c)</strong></li>
</ol>
<p><strong>字符类型使用细节</strong></p>
<ol>
<li><p>字符常量使用单引号(‘’)括起来的单个字符。例如：var c1 byte = ‘a’，var c2 int = ‘中’，var c3 byte = ‘1’</p>
</li>
<li><p>Go中允许使用转义字符’\‘来将其后的字符转变为特殊字符型常量。例如：var c4 char = ‘\n’</p>
</li>
<li><p>Go语言的字符使用UTF-8编码，英文字母占1个字节，汉字占3个字节</p>
</li>
<li><p>在Go中，字符的本质是一个整数，直接输出时，是该字符对应的UTF-8编码的码值</p>
</li>
<li><p>可以直接给某个变量赋一个数字，然后按格式化输出%c，会输出该数字对应的Unicode字符</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c4 <span class="keyword">int</span> = <span class="number">22269</span></span><br><span class="line">fmt.Printf(<span class="string">"c4 = %c\n"</span>,c4)</span><br><span class="line"><span class="comment">// c4 = 国</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符类型是可以进行运算的，相当于一个整数，因为他都有Unicode码</p>
</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c5 = <span class="number">10</span> + <span class="string">'a'</span>	<span class="comment">// 10+97=107</span></span><br><span class="line">fmt.Printf(<span class="string">"c5 = %c\n"</span>,c5)</span><br></pre></td></tr></table></figure>

<p><strong>字符类型本质探讨</strong></p>
<ol>
<li>字符存储到计算机中，需要将字符对应的码值（整数）找出来</li>
<li>字符和码值的对应关系是通过字符编码表决定的</li>
<li>Go语言的编码都统一成了utf-8，很统一，没有编码乱码困扰</li>
</ol>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>基本介绍：字符串就是一串固定长度的字符连接起来的字符序列。Go的字符串是由单个字节连接起来的。Go语言的字符串的字节使用utf-8编码表示Unicode文本，统一用<code>双引号</code>包裹，多行字符串用<code>反引号</code>包裹，字符用<code>单引号</code>包裹</p>
<p><strong>注意事项和使用细节</strong></p>
<ol>
<li>Go语言的字符串的字节使用utf-8编码，golang统一使用utf-8，不会出现乱码</li>
<li>字符串一旦赋值了，就不能修改了。在Go中字符串是不可变的</li>
<li>字符串的两种表示形式，普通双引号括起来，反引号按原样输出</li>
<li>字符串拼接方式</li>
<li>多行字符串使用</li>
<li>Go语言中字符串一定是用双引号包裹的，单引号包裹的是字符</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 演示golang中string类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> address = <span class="string">"北京东城区永定门"</span></span><br><span class="line">	fmt.Println(<span class="string">"address="</span>, address)</span><br><span class="line">	<span class="comment">// 字符串一旦赋值，字符串就不可修改</span></span><br><span class="line">	<span class="comment">//address[0] = '南'</span></span><br><span class="line">	<span class="comment">// 字符串两种表示形式：1、双引号，会识别转义字符。2、反引号，以原生形式输出，包括换行特殊字符</span></span><br><span class="line">	str := <span class="string">`"abc\nbc"`</span></span><br><span class="line">	fmt.Println(<span class="string">"str="</span>, str) <span class="comment">// str= "abc\nbc"</span></span><br><span class="line">    <span class="comment">// 多行字符串</span></span><br><span class="line">    s1 := <span class="string">`第一行</span></span><br><span class="line"><span class="string">	第二行</span></span><br><span class="line"><span class="string">	第三行</span></span><br><span class="line"><span class="string">	`</span></span><br><span class="line">	fmt.Println(s1)</span><br><span class="line">    <span class="comment">// 字符串拼接方式</span></span><br><span class="line">	<span class="keyword">var</span> str1 = <span class="string">"hello"</span> + <span class="string">"world"</span></span><br><span class="line">	str1 += <span class="string">"haha"</span></span><br><span class="line">	fmt.Println(str1)</span><br><span class="line">	<span class="comment">// 当一个拼接操作很长时间，可以分行写，但是注意，需要将+保留在上一行，因为Go会在行尾加分号</span></span><br><span class="line">	<span class="keyword">var</span> str2 = <span class="string">"my "</span> + <span class="string">"name "</span> + <span class="string">"is "</span> +</span><br><span class="line">		<span class="string">"Kevin,"</span> + <span class="string">"yeah"</span></span><br><span class="line">	fmt.Println(str2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="字符串的常用操作"><a href="#字符串的常用操作" class="headerlink" title="字符串的常用操作"></a>字符串的常用操作</h4><table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">介绍</th>
</tr>
</thead>
<tbody><tr>
<td align="center">len(str)</td>
<td align="center">求长度</td>
</tr>
<tr>
<td align="center">+或fmt.Sprintf</td>
<td align="center">拼接字符串</td>
</tr>
<tr>
<td align="center">strings.Split</td>
<td align="center">分割</td>
</tr>
<tr>
<td align="center">strings.contains</td>
<td align="center">判断是否包含</td>
</tr>
<tr>
<td align="center">strings.HasPrefix,strings.HasSuffix</td>
<td align="center">前缀/后缀判断</td>
</tr>
<tr>
<td align="center">strings.Index(),strings.LastIndex()</td>
<td align="center">子串出现的位置</td>
</tr>
<tr>
<td align="center">strings.Join(a[]string, sep string)</td>
<td align="center">join操作</td>
</tr>
</tbody></table>
<p>要修改字符串，需要先将其转换成<code>[]rune</code>或<code>[]byte</code>，完成后再转换为<code>string</code>。无论哪种转换，都会重新分配内存，并复制字节数组。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeString</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">"big"</span></span><br><span class="line">	<span class="comment">// 强制类型转换</span></span><br><span class="line">	byteS1 := []<span class="keyword">byte</span>(s1)</span><br><span class="line">	byteS1[<span class="number">0</span>] = <span class="string">'p'</span></span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(byteS1))</span><br><span class="line"></span><br><span class="line">	s2 := <span class="string">"白萝卜"</span></span><br><span class="line">	runeS2 := []<span class="keyword">rune</span>(s2)</span><br><span class="line">	runeS2[<span class="number">0</span>] = <span class="string">'红'</span></span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(runeS2))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="byte和rune类型"><a href="#byte和rune类型" class="headerlink" title="byte和rune类型"></a>byte和rune类型</h4><p>组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号（’）包裹起来，如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a := <span class="string">'中'</span></span><br><span class="line"><span class="keyword">var</span> b := <span class="string">'x'</span></span><br></pre></td></tr></table></figure>

<p>Go 语言的字符有以下两种：</p>
<ol>
<li><code>uint8</code>类型，或者叫 byte 型，代表了<code>ASCII码</code>的一个字符</li>
<li><code>rune</code>类型，代表一个 <code>UTF-8字符</code></li>
</ol>
<p>当需要处理中文、日文或者其他复合字符时，则需要用到<code>rune</code>类型。<code>rune</code>类型实际是一个<code>int32</code>。</p>
<p>Go 使用了特殊的 rune 类型来处理 Unicode，让基于 Unicode 的文本处理更为方便，也可以使用 byte 型进行默认字符串处理，性能和扩展性都有照顾。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历字符串</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">traversalString</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">"hello永定门"</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123; <span class="comment">//byte</span></span><br><span class="line">		fmt.Printf(<span class="string">"%v(%c) "</span>, s[i], s[i])</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">	<span class="keyword">for</span> _, r := <span class="keyword">range</span> s &#123; <span class="comment">//rune</span></span><br><span class="line">		fmt.Printf(<span class="string">"%v(%c) "</span>, r, r)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">104(h) 101(e) 108(l) 108(l) 111(o) 230(æ) 178(²) 153() 230(æ) 178(²) 179(³) </span><br><span class="line">104(h) 101(e) 108(l) 108(l) 111(o) 27801(沙) 27827(河)</span><br></pre></td></tr></table></figure>

<p>因为UTF8编码下一个中文汉字由3~4个字节组成，所以我们不能简单的按照字节去遍历一个包含中文的字符串，否则就会出现上面输出中第一行的结果。</p>
<p>字符串底层是一个byte数组，所以可以和<code>[]byte</code>类型相互转换。字符串是不能修改的 字符串是由byte字节组成，所以字符串的长度是byte字节的长度。 rune类型用来表示utf8字符，一个rune字符由一个或多个byte组成。</p>
<h4 id="基本数据类型的默认值"><a href="#基本数据类型的默认值" class="headerlink" title="基本数据类型的默认值"></a>基本数据类型的默认值</h4><p>go中数据类型都有默认值，没有赋值是保留默认值</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>整形</td>
<td>0</td>
</tr>
<tr>
<td>浮点型</td>
<td>0</td>
</tr>
<tr>
<td>字符串</td>
<td>“”</td>
</tr>
<tr>
<td>布尔型</td>
<td>false</td>
</tr>
</tbody></table>
<p><em>cookies：Printf中的%v按照变量原始值输出</em></p>
<h4 id="基本数据类型的转换"><a href="#基本数据类型的转换" class="headerlink" title="基本数据类型的转换"></a>基本数据类型的转换</h4><p>Golang和Java/C不同，Go在不同类型的 变脸之间赋值时需要显示转换，也就是Golang中数据类型不能自动转换</p>
<p><strong>基本语法</strong></p>
<p>表达式T(v)是将值v转换为类型T</p>
<p>T：数据类型，如int32，float64等</p>
<p>v：就是需要转换的变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 演示golang中基本类型转换（同类型间不同精度也需要显示转换）</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n <span class="keyword">int32</span> = <span class="number">100</span></span><br><span class="line">	<span class="comment">// 希望将n转换为float</span></span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">float64</span> = <span class="keyword">float64</span>(n)</span><br><span class="line">    <span class="comment">// 高精度-&gt;低精度</span></span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">int8</span> = <span class="keyword">int8</span>(n)</span><br><span class="line">    <span class="comment">// 低精度-&gt;高精度</span></span><br><span class="line">	<span class="keyword">var</span> n3 <span class="keyword">int64</span> = <span class="keyword">int64</span>(n)</span><br><span class="line">	fmt.Printf(<span class="string">"n=%v n1=%v n2=%v n3=%v\n"</span>, n, n1, n2, n3)</span><br><span class="line">    fmt.Printf(<span class="string">"n type is %T"</span>, n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>细节说明</strong></p>
<ol>
<li>Go中，数据类型的转换可以是从表示范围小到表示范围大，也可以从范围大到范围小</li>
<li>被转换的是变量存储的数据，变量本身数据类型并没有变化</li>
<li>在转换中，比如将int64转成int8，编译时不会报错，只是转换的结果是按溢出处理，和我们希望的结果不一样</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 在转换中，比如将int64转成int8[-128-127]，编译时不会报错</span></span><br><span class="line"><span class="comment">// 只是转换的结果按溢出处理，和希望的结果不一样</span></span><br><span class="line"><span class="keyword">var</span> num1 <span class="keyword">int64</span> = <span class="number">9999999</span></span><br><span class="line"><span class="keyword">var</span> num2 <span class="keyword">int8</span> = <span class="keyword">int8</span>(num1)</span><br><span class="line">fmt.Println(<span class="string">"num2="</span>,num2)	<span class="comment">// 63</span></span><br></pre></td></tr></table></figure>

<p>举个栗子：计算直角三角形的斜边长时使用math包的Sqrt()函数，该函数接收的是float64类型的参数，而变量a和b都是int类型的，这个时候就需要将a和b强制类型转换为float64类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sqrtDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a, b = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">	<span class="keyword">var</span> c <span class="keyword">int</span></span><br><span class="line">	<span class="comment">// math.Sqrt()接收的参数是float64类型，需要强制转换</span></span><br><span class="line">	c = <span class="keyword">int</span>(math.Sqrt(<span class="keyword">float64</span>(a*a + b*b)))</span><br><span class="line">	fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>cookies：如果我们没有使用到一个包，但又不想删去，前面加一个 _，表示忽略</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">"fmt"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="基本数据类型和string的转换"><a href="#基本数据类型和string的转换" class="headerlink" title="基本数据类型和string的转换"></a>基本数据类型和string的转换</h4><p><strong>基本数据类型转string</strong></p>
<p>方式1：fmt.Sprintf(“%参数”,表达式)</p>
<p>方式2：strconv包函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 演示golang中基本类型与string的转换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num1 <span class="keyword">int</span> = <span class="number">99</span></span><br><span class="line">	<span class="keyword">var</span> num2 <span class="keyword">float64</span> = <span class="number">23.456</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">var</span> mychar <span class="keyword">byte</span> = <span class="string">'h'</span></span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> <span class="comment">// 空str</span></span><br><span class="line">	<span class="comment">// 使用第一种方式转换，fmt.Sprintf</span></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%d"</span>, num1)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%f"</span>, num2)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%t"</span>, b)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%c"</span>, mychar)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line">	fmt.Println(<span class="string">"======================================="</span>)</span><br><span class="line">	<span class="comment">// 使用第二种方式转换，strconv</span></span><br><span class="line">	<span class="keyword">var</span> num3 <span class="keyword">int</span> = <span class="number">99</span></span><br><span class="line">	<span class="keyword">var</span> num4 <span class="keyword">float64</span> = <span class="number">23.456</span></span><br><span class="line">	<span class="keyword">var</span> b2 <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line">	str = strconv.FormatInt(<span class="keyword">int64</span>(num3), <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// f表示格式，10表示小数位保留10位，64表示小数是float64</span></span><br><span class="line">	str = strconv.FormatFloat(num4, <span class="string">'f'</span>, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = strconv.FormatBool(b2)</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T,str=%q\n"</span>, str, str)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// strconv包中有一个函数Itoa</span></span><br><span class="line">    <span class="keyword">var</span> num5 <span class="keyword">int64</span> = <span class="number">4567</span></span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span></span><br><span class="line">	str = strconv.Itoa(<span class="keyword">int</span>(num5))</span><br><span class="line">	fmt.Printf(<span class="string">"str type %T str=%q\n"</span>, str, str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>string类型转基本数据类型</strong></p>
<p>使用strconv包函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 演示golang中基本类型与string的转换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"true"</span></span><br><span class="line">	<span class="keyword">var</span> str2 <span class="keyword">string</span> = <span class="string">"12345"</span></span><br><span class="line">	<span class="keyword">var</span> str3 <span class="keyword">string</span> = <span class="string">"123.45"</span></span><br><span class="line">    </span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">bool</span></span><br><span class="line">	<span class="comment">// ParseBool返回一个error，忽略掉</span></span><br><span class="line">	b, _ = strconv.ParseBool(str)</span><br><span class="line">	fmt.Printf(<span class="string">"b type %T b=%v\n"</span>, b, b)</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">var</span> num6 <span class="keyword">int64</span></span><br><span class="line">	num6, _ = strconv.ParseInt(str2, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"num6 type %T num6=%v\n"</span>, num6, num6)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> num7 <span class="keyword">float64</span></span><br><span class="line">	num7, _ = strconv.ParseFloat(str3, <span class="number">64</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"num7 type %T num7=%v\n"</span>, num7, num7)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong>将string转换成基本类型时，要确保string类型能够转成有效的数据，比如我们可以把”123”转换成整数，但是不能把”hello”转换成整数，如果这样做，Golang直接将其转换成0，转换成bool的就变成false。</p>
<h3 id="派生-复杂类型"><a href="#派生-复杂类型" class="headerlink" title="派生/复杂类型"></a>派生/复杂类型</h3><h4 id="指针（Pointer）"><a href="#指针（Pointer）" class="headerlink" title="指针（Pointer）"></a>指针（Pointer）</h4><h5 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h5><ol>
<li>基本数据类型，变量存的就是值，也叫值类型</li>
<li>获取变量的地址，用<code>&amp;</code>，比如：<code>var n int</code>，获取n的地址：<code>&amp;n</code></li>
<li>指针类型，指针变量存的是一个地址，这个地址指向的空间存的才是值，例如：<code>var ptr *int = &amp;n</code></li>
<li>获取指针类型所指向的值，使用<code>*</code>，比如：<code>var ptr *int</code>，使用 *ptr获取<code>ptr</code>指向的值</li>
</ol>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200302221059387.png" alt="image-20200302221059387"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 演示golang中指针类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 基本数据类型在内存布局</span></span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	<span class="comment">// i的地址：&amp;i</span></span><br><span class="line">	fmt.Println(<span class="string">"i 地址："</span>, &amp;i)</span><br><span class="line">	<span class="comment">// ptr是指针变量，ptr类型是 *int，ptr本身的值是&amp;i</span></span><br><span class="line">	<span class="keyword">var</span> ptr *<span class="keyword">int</span> = &amp;i</span><br><span class="line">	fmt.Printf(<span class="string">"ptr=%v\n"</span>, ptr)</span><br><span class="line">	fmt.Println(<span class="string">"ptr 地址："</span>, &amp;ptr)</span><br><span class="line">	<span class="comment">// ptr存储的值是i地址，指向的值是i，</span></span><br><span class="line">	fmt.Printf(<span class="string">"ptr 指向的值=%v"</span>, *ptr)</span><br><span class="line">    <span class="comment">// 修改i的值</span></span><br><span class="line">    *ptr = <span class="number">2</span>	<span class="comment">// i的值会改变</span></span><br><span class="line">    fmt.Println(<span class="string">"i="</span>, i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="错误示范"><a href="#错误示范" class="headerlink" title="错误示范"></a>错误示范</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">300</span></span><br><span class="line">	<span class="keyword">var</span> ptr1 *<span class="keyword">int</span> = a <span class="comment">// 错误，指针变量存储的是地址，改成&amp;a</span></span><br><span class="line">    <span class="keyword">var</span> ptr2 *<span class="keyword">float32</span> = &amp;a <span class="comment">// 错误，类型不匹配，ptr2接收的地址也应该是int类型</span></span><br><span class="line">    <span class="keyword">var</span> b *<span class="keyword">int</span>	<span class="comment">// 空指针</span></span><br><span class="line">    *b = <span class="number">100</span>	<span class="comment">// 给空指针赋值报错</span></span><br><span class="line">    fmt.Println(*a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>指针细节说明</strong></p>
<ol>
<li>所有的值类型，都有对应的指针类型，形式为<code>*数据类型</code></li>
<li>值类型包括：基本数据类型<code>int</code>，<code>float</code>，<code>bool</code>，<code>string</code>，数组和结构体<code>struct</code></li>
</ol>
<h5 id="new"><a href="#new" class="headerlink" title="new"></a>new</h5><p>new()函数申请一个内存地址，返回的是类型指针，语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span> *<span class="title">Type</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Type表示类型，new函数只接受一个参数，这个参数是一个类型</li>
<li>*Type表示类型指针，new函数返回一个指向该类型内存地址的指针</li>
</ul>
<p>new函数不太常用，使用new函数得到的是一个类型的指针，并且该指针对应的值为该类型的零值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">	b := <span class="built_in">new</span>(<span class="keyword">bool</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, a) <span class="comment">// *int</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, b) <span class="comment">// *bool</span></span><br><span class="line">	fmt.Println(*a)       <span class="comment">// 0</span></span><br><span class="line">	fmt.Println(*b)       <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>指针作为引用类型需要初始化后才会拥有内存空间，才可以给它赋值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> b *<span class="keyword">int</span>	<span class="comment">// 空指针，地址是nil</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">new</span>(<span class="keyword">int</span>)	<span class="comment">// new()函数申请一个内存地址</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	fmt.Println(*a)</span><br><span class="line">	*a = <span class="number">100</span></span><br><span class="line">	fmt.Println(*a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0xc00000a0b8</span></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 100</span></span><br></pre></td></tr></table></figure>

<h5 id="make"><a href="#make" class="headerlink" title="make"></a>make</h5><p>make也是用于内存分配的，区别于new，他只用于slice，map，channel的内存创建，而且他返回的类型就是这三个类型本身，而不是他们的指针类型，因为这三种类型本身就是引用类型，所以就没必要返回他们的指针。make函数的语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(t Type, size...IntegerType)</span> <span class="title">Type</span></span></span><br></pre></td></tr></table></figure>

<p>make函数是无可替代的，我们在使用slice、map以及channel的时候，都需要使用make进行初始化，然后才可以对它们进行操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造切片</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">5</span>,<span class="number">10</span>)</span><br><span class="line"><span class="comment">// 构造map</span></span><br><span class="line">b := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p><strong>new与make的区别</strong></p>
<ol>
<li>二者都是用来做内存分配的</li>
<li>make只用于slice、map以及channel的初始化，返回的还是这三个引用类型本身</li>
<li>而new用于类型的内存分配，并且内存对应的值为类型零值，返回的是指向类型的指针</li>
</ol>
<h4 id="值类型和引用类型"><a href="#值类型和引用类型" class="headerlink" title="值类型和引用类型"></a>值类型和引用类型</h4><p>值类型：基本数据类型<code>int</code>，<code>float</code>，<code>bool</code>，<code>string</code>，数组和结构体<code>struct</code></p>
<p>引用类型：指针，<code>slice</code>切片，<code>map</code>，管道<code>channel</code>，<code>interface</code>等都是引用类型</p>
<p><strong>值类型和引用类型使用特点</strong></p>
<p>值类型：变量直接存储值，内存通常在栈中分配</p>
<p>引用类型：变量存储的是一个地址，这个地址对应的空间才真正存储数据（值），内存通常在堆上分配，当没有任何变量引用这个地址时，该地址的数据空间就成为一个垃圾，由<code>GC</code>来回收</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200304203943183.png" alt="image-20200304203943183"></p>
<h4 id="标识符的命名规范"><a href="#标识符的命名规范" class="headerlink" title="标识符的命名规范"></a>标识符的命名规范</h4><p><strong>标识符概念</strong></p>
<p>Go对各种变量、方法、函数等命名时使用的字符序列称为标识符，凡是可以起名字的地方都叫标识符 <code>var num int</code></p>
<p><strong>标识符命名规则</strong></p>
<ol>
<li>由英文字母、数字、下划线组成</li>
<li>数字不可以开头</li>
<li>golang中严格区分大小写</li>
<li>标识符不能包含空格</li>
<li>下划线在Go中是一个特殊的标识符，称为空标识符。可以代表任何其他的标识符，但是他对应的值会被忽略（比如，忽略某个返回值）。所以仅能作为占位符使用，不能作为表示符使用</li>
<li>不能以系统保留关键字作为标识符，比如<code>break</code>，<code>if</code>等</li>
</ol>
<p><strong>标识符命名注意事项</strong></p>
<ol>
<li>包名：保持<code>package</code>的名字和目录保持一致，尽量采取有意义的包名，简短，有意义，不要和标准库冲突</li>
<li>变量名、函数名、常量名采用驼峰法</li>
<li>如果变量名、函数名、常量名首字母大写，则可以被其他的包访问；如果首字母小写，则只能在本包中使用（注：可以简单地理解成，首字母大写是共有的，首字母小写是私有的），golang中没有<code>public</code>、<code>private</code>等关键字</li>
</ol>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200304212419648.png" alt="image-20200304212419648"></p>
<h4 id="数组（Array）"><a href="#数组（Array）" class="headerlink" title="数组（Array）"></a>数组（Array）</h4><p>数组是同一种数据类型元素的集合。 在Go语言中，数组从声明时就确定，使用时可以修改数组成员，但是数组大小不可变化。 基本语法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个长度为3元素类型为int的数组a</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>]<span class="keyword">int</span></span><br></pre></td></tr></table></figure>

<h5 id="数组定义"><a href="#数组定义" class="headerlink" title="数组定义"></a>数组定义</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var 数组变量名 [元素数量]T</span><br></pre></td></tr></table></figure>

<p>比如：<code>var a [5]int</code>， 数组的长度必须是常量，并且长度是数组类型的一部分。一旦定义，长度不能变。 <code>[5]int</code>和<code>[10]int</code>是不同的类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> b [<span class="number">4</span>]<span class="keyword">int</span></span><br><span class="line">a = b <span class="comment">//不可以这样做，因为此时a和b是不同的类型</span></span><br></pre></td></tr></table></figure>

<p>数组可以通过下标进行访问，下标是从<code>0</code>开始，最后一个元素下标是：<code>len-1</code>，访问越界（下标在合法范围之外），则触发访问越界，会panic。</p>
<h5 id="数组的初始化"><a href="#数组的初始化" class="headerlink" title="数组的初始化"></a>数组的初始化</h5><p>数组的初始化也有很多方式</p>
<p><strong>方法一</strong></p>
<p>初始化数组时可以使用初始化列表来设置数组元素的值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> testArray [<span class="number">3</span>]<span class="keyword">int</span>                        <span class="comment">//数组会初始化为int类型的零值</span></span><br><span class="line">	<span class="keyword">var</span> numArray = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;                 <span class="comment">//使用指定的初始值完成初始化</span></span><br><span class="line">	<span class="keyword">var</span> cityArray = [<span class="number">3</span>]<span class="keyword">string</span>&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>, <span class="string">"深圳"</span>&#125; <span class="comment">//使用指定的初始值完成初始化</span></span><br><span class="line">	fmt.Println(testArray)                      <span class="comment">//[0 0 0]</span></span><br><span class="line">	fmt.Println(numArray)                       <span class="comment">//[1 2 0]</span></span><br><span class="line">	fmt.Println(cityArray)                      <span class="comment">//[北京 上海 深圳]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>方法二</strong></p>
<p>按照上面的方法每次都要确保提供的初始值和数组长度一致，一般情况下我们可以让编译器根据初始值的个数自行推断数组的长度，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> testArray [<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> numArray = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> cityArray = [...]<span class="keyword">string</span>&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>, <span class="string">"深圳"</span>&#125;</span><br><span class="line">	fmt.Println(testArray)                          <span class="comment">//[0 0 0]</span></span><br><span class="line">	fmt.Println(numArray)                           <span class="comment">//[1 2]</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of numArray:%T\n"</span>, numArray)   <span class="comment">//type of numArray:[2]int</span></span><br><span class="line">	fmt.Println(cityArray)                          <span class="comment">//[北京 上海 深圳]</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of cityArray:%T\n"</span>, cityArray) <span class="comment">//type of cityArray:[3]string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>方法三</strong></p>
<p>我们还可以使用指定索引值的方式来初始化数组，例如:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">3</span>: <span class="number">5</span>&#125;</span><br><span class="line">	fmt.Println(a)                  <span class="comment">// [0 1 0 5]</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of a:%T\n"</span>, a) <span class="comment">//type of a:[4]int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h5><p>遍历数组有以下两种方法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = [...]<span class="keyword">string</span>&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>, <span class="string">"深圳"</span>&#125;</span><br><span class="line">	<span class="comment">// 方法1：for循环遍历</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</span><br><span class="line">		fmt.Println(a[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 方法2：for range遍历</span></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> a &#123;</span><br><span class="line">		fmt.Println(index, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h5><p>Go语言是支持多维数组的，我们这里以二维数组为例（数组中又嵌套数组）。</p>
<p><strong>二维数组的定义</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"广州"</span>, <span class="string">"深圳"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"成都"</span>, <span class="string">"重庆"</span>&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(a) <span class="comment">//[[北京 上海] [广州 深圳] [成都 重庆]]</span></span><br><span class="line">	fmt.Println(a[<span class="number">2</span>][<span class="number">1</span>]) <span class="comment">//支持索引取值:重庆</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>二维数组的遍历</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"广州"</span>, <span class="string">"深圳"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"成都"</span>, <span class="string">"重庆"</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> _, v1 := <span class="keyword">range</span> a &#123;</span><br><span class="line">		<span class="keyword">for</span> _, v2 := <span class="keyword">range</span> v1 &#123;</span><br><span class="line">			fmt.Printf(<span class="string">"%s\t"</span>, v2)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 北京	上海</span></span><br><span class="line"><span class="comment">// 广州	深圳</span></span><br><span class="line"><span class="comment">// 成都	重庆</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 多维数组<strong>只有第一层</strong>可以使用<code>...</code>来让编译器推导数组长度。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//支持的写法</span></span><br><span class="line">a := [...][<span class="number">2</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">	&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">"广州"</span>, <span class="string">"深圳"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">"成都"</span>, <span class="string">"重庆"</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不支持多维数组的内层使用...</span></span><br><span class="line">b := [<span class="number">3</span>][...]<span class="keyword">string</span>&#123;</span><br><span class="line">	&#123;<span class="string">"北京"</span>, <span class="string">"上海"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">"广州"</span>, <span class="string">"深圳"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">"成都"</span>, <span class="string">"重庆"</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="数组是值类型"><a href="#数组是值类型" class="headerlink" title="数组是值类型"></a>数组是值类型</h5><p>数组是值类型，赋值和传参会复制整个数组。因此改变副本的值，不会改变本身的值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modifyArray</span><span class="params">(x [3]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modifyArray2</span><span class="params">(x [3][2]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x[<span class="number">2</span>][<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;</span><br><span class="line">	modifyArray(a) <span class="comment">//在modify中修改的是a的副本x</span></span><br><span class="line">	fmt.Println(a) <span class="comment">//[10 20 30]</span></span><br><span class="line">	b := [<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">		&#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">		&#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">		&#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	modifyArray2(b) <span class="comment">//在modify中修改的是b的副本x</span></span><br><span class="line">	fmt.Println(b)  <span class="comment">//[[1 1] [1 1] [1 1]]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li>数组支持 “==“、”!=” 操作符，因为内存总是被初始化过的</li>
<li><code>[n]*T</code>表示指针数组，<code>*[n]T</code>表示数组指针 </li>
</ol>
<p><strong>练习：</strong></p>
<p>找出数组中和为指定值的两个元素的下标，比如从数组<code>[1, 3, 5, 7, 8]</code>中找出和为8的两个元素的下标分别为<code>(0,3)</code>和<code>(1,2)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">//找出数组中和为指定值的两个元素的下标，比如从数组[1, 3, 5, 7, 8]中找出和为8的两个元素的下标分别为(0,3)和(1,2)。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> numArray = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> numArray &#123;</span><br><span class="line">		<span class="keyword">for</span> i := index + <span class="number">1</span>; i &lt; <span class="built_in">len</span>(numArray); i++ &#123;</span><br><span class="line">			<span class="keyword">if</span> value+numArray[i] == <span class="number">8</span> &#123;</span><br><span class="line">				fmt.Printf(<span class="string">"(%v,%v)\n"</span>, index, i)</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="结构体（struct）"><a href="#结构体（struct）" class="headerlink" title="结构体（struct）"></a>结构体（struct）</h4><h4 id="切片（slice）"><a href="#切片（slice）" class="headerlink" title="切片（slice）"></a>切片（slice）</h4><p>因为数组的长度是固定的并且数组长度属于类型的一部分，所以数组有很多的局限性</p>
<p>切片（Slice）是一个拥有相同类型元素的可变长度的序列。它是基于数组类型做的一层封装。它非常灵活，支持自动扩容</p>
<p>切片是一个引用类型，它的内部结构包含<code>地址</code>、<code>长度</code>和<code>容量</code>。切片一般用于快速地操作一块数据集合</p>
<h5 id="切片的定义"><a href="#切片的定义" class="headerlink" title="切片的定义"></a>切片的定义</h5><p>声明切片类型的基本语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name []T</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<ul>
<li>name:表示变量名</li>
<li>T:表示切片中的元素类型</li>
</ul>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明切片类型</span></span><br><span class="line">	<span class="keyword">var</span> a []<span class="keyword">string</span>              <span class="comment">//声明一个字符串切片</span></span><br><span class="line">	<span class="keyword">var</span> b = []<span class="keyword">int</span>&#123;&#125;             <span class="comment">//声明一个整型切片并初始化</span></span><br><span class="line">	<span class="keyword">var</span> c = []<span class="keyword">bool</span>&#123;<span class="literal">false</span>, <span class="literal">true</span>&#125; <span class="comment">//声明一个布尔切片并初始化</span></span><br><span class="line">	<span class="keyword">var</span> d = []<span class="keyword">bool</span>&#123;<span class="literal">false</span>, <span class="literal">true</span>&#125; <span class="comment">//声明一个布尔切片并初始化</span></span><br><span class="line">	fmt.Println(a)              <span class="comment">//[]</span></span><br><span class="line">	fmt.Println(b)              <span class="comment">//[]</span></span><br><span class="line">	fmt.Println(c)              <span class="comment">//[false true]</span></span><br><span class="line">    <span class="comment">// Go语言的空nil相当于没有开辟内存空间</span></span><br><span class="line">	fmt.Println(a == <span class="literal">nil</span>)       <span class="comment">//true</span></span><br><span class="line">	fmt.Println(b == <span class="literal">nil</span>)       <span class="comment">//false</span></span><br><span class="line">	fmt.Println(c == <span class="literal">nil</span>)       <span class="comment">//false</span></span><br><span class="line">	<span class="comment">// fmt.Println(c == d)   //切片是引用类型，不支持直接比较，只能和nil比较</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="切片的长度和容量"><a href="#切片的长度和容量" class="headerlink" title="切片的长度和容量"></a>切片的长度和容量</h5><p>切片拥有自己的长度和容量，我们可以通过使用内置的<code>len()</code>函数求长度，使用内置的<code>cap()</code>函数求切片的容量</p>
<p><strong>注意：</strong></p>
<ul>
<li>切片指向了一个底层的数组</li>
<li>切片的长度就是它元素的个数</li>
<li>切片的容量是底层数组从切片的第一个元素到最后一个元素的数量</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> s2 = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"s1 type:%T\n"</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">"s2 type:%T\n"</span>, s2)</span><br><span class="line">	fmt.Println(s1 == <span class="literal">nil</span>)</span><br><span class="line">	fmt.Println(s2 == <span class="literal">nil</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"len(s1):%v,cap(s1):%v\n"</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line">	fmt.Printf(<span class="string">"len(s2):%v,cap(s2):%v\n"</span>, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="切片表达式"><a href="#切片表达式" class="headerlink" title="切片表达式"></a>切片表达式</h5><p>切片表达式从字符串、数组、指向数组或切片的指针构造子字符串或切片。它有两种变体：一种指定low和high两个索引界限值的简单的形式，另一种是除了low和high索引界限值外还指定容量的完整的形式。</p>
<p>切片的底层就是一个数组，所以可以基于数组通过切片表达式得到切片。 切片表达式中的<code>low</code>和<code>high</code>表示一个索引范围（左闭右开），也就是下面代码中从数组a中选出<code>1&lt;=索引值&lt;4</code>的元素组成切片s，得到的切片<code>长度=high-low</code>，容量等于底层数组从切片的第一个元素到最后一个元素的数量。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	s := a[<span class="number">1</span>:<span class="number">3</span>] <span class="comment">// s := a[low:high]</span></span><br><span class="line">	fmt.Printf(<span class="string">"s:%v len(s):%v cap(s):%v\n"</span>, s, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//s:[2 3] len(s):2 cap(s):4</span></span><br></pre></td></tr></table></figure>

<p>为了方便起见，可以省略切片表达式中的任何索引。省略了<code>low</code>则默认为0；省略了<code>high</code>则默认为切片操作数的长度（和python相同）:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">2</span>:]  <span class="comment">// 等同于 a[2:len(a)]</span></span><br><span class="line">a[:<span class="number">3</span>]  <span class="comment">// 等同于 a[0:3]</span></span><br><span class="line">a[:]   <span class="comment">// 等同于 a[0:len(a)]</span></span><br></pre></td></tr></table></figure>

<p>对于数组或字符串，如果<code>0 &lt;= low &lt;= high &lt;= len(a)</code>，则索引合法，否则就会索引越界（out of range）。</p>
<h5 id="切片再切片"><a href="#切片再切片" class="headerlink" title="切片再切片"></a>切片再切片</h5><p>对切片再执行切片表达式时，索引的上限是切片的容量<code>cap(s)</code>，而不是长度，即<code>0 &lt;= low &lt;= high &lt;= cap(s)</code>。<strong>常量索引</strong>必须是非负的，并且可以用int类型的值表示;对于数组或常量字符串，常量索引也必须在有效范围内。如果<code>low</code>和<code>high</code>两个指标都是常数，它们必须满足<code>low &lt;= high</code>。如果索引在运行时超出范围，就会发生运行时<code>panic</code>。</p>
<p>对切片再切片时，操作的还是底层数组，二次切片的索引0代表的值是一次切片的初始元素。若一次切片是<code>array[1:]</code>，那么二次切片的数据则从<code>array[1]</code>开始，索引从0开始。举个栗子：<code>a := [5]int{1,2,3,4,5}</code>；<code>s:=a[1:3]</code>，s：<code>[2,3]</code>；<code>s1:=s[:4]</code>，s1：<code>[2,3,4,5]</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	s := a[<span class="number">1</span>:<span class="number">3</span>]  <span class="comment">// [2 3]</span></span><br><span class="line">	fmt.Printf(<span class="string">"s:%v len(s):%v cap(s):%v\n"</span>, s, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">	s2 := s[<span class="number">3</span>:<span class="number">4</span>]  <span class="comment">// 索引的上限是cap(s)而不是len(s)</span></span><br><span class="line">	fmt.Printf(<span class="string">"s2:%v len(s2):%v cap(s2):%v\n"</span>, s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// s:[2 3] len(s):2 cap(s):4</span></span><br><span class="line"><span class="comment">// s2:[5] len(s2):1 cap(s2):1</span></span><br></pre></td></tr></table></figure>

<p><strong>完整切片表达式</strong></p>
<p>对于数组，指向数组的指针，或切片a(<strong>注意不能是字符串</strong>)支持完整切片表达式：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[low : high : max]</span><br></pre></td></tr></table></figure>

<p>上面的代码会构造与简单切片表达式<code>a[low: high]</code>相同类型、相同长度和元素的切片。另外，它会将得到的结果切片的容量设置为<code>max-low</code>。在完整切片表达式中只有第一个索引值（low）可以省略；它默认为0。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	t := a[<span class="number">1</span>:<span class="number">3</span>:<span class="number">5</span>]</span><br><span class="line">	fmt.Printf(<span class="string">"t:%v len(t):%v cap(t):%v\n"</span>, t, <span class="built_in">len</span>(t), <span class="built_in">cap</span>(t))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// t:[2 3] len(t):2 cap(t):4</span></span><br></pre></td></tr></table></figure>

<p>完整切片表达式需要满足的条件是<code>0 &lt;= low &lt;= high &lt;= max &lt;= cap(a)</code>，其他条件和简单切片表达式相同。</p>
<p><strong>修改底层数组的值</strong></p>
<p>切片是引用类型，切片没有值，指向了底层一个数组，修改底层数组的值，会影响切片</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	s := a[<span class="number">1</span>:]  <span class="comment">// [2 3]</span></span><br><span class="line">	fmt.Printf(<span class="string">"s:%v len(s):%v cap(s):%v\n"</span>, s, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">	s2 := s[:<span class="number">4</span>]  <span class="comment">// 索引的上限是cap(s)而不是len(s)</span></span><br><span class="line">	fmt.Printf(<span class="string">"s2:%v len(s2):%v cap(s2):%v\n"</span>, s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">	<span class="comment">// 切片是引用类型，都指向了底层一个数组</span></span><br><span class="line">	a[<span class="number">4</span>] = <span class="number">500</span></span><br><span class="line">	fmt.Println(<span class="string">"s:"</span>,s)</span><br><span class="line">	fmt.Println(<span class="string">"s2:"</span>,s2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// s:[2 3 4 5] len(s):4 cap(s):4</span></span><br><span class="line"><span class="comment">// s2:[2 3 4 5] len(s2):4 cap(s2):4</span></span><br><span class="line"><span class="comment">// s: [2 3 4 500]</span></span><br><span class="line"><span class="comment">// s2: [2 3 4 500]</span></span><br></pre></td></tr></table></figure>

<h5 id="make-函数构造切片"><a href="#make-函数构造切片" class="headerlink" title="make()函数构造切片"></a>make()函数构造切片</h5><p>上面都是基于数组来创建的切片，如果需要动态的创建一个切片，就需要使用内置的<code>make()</code>函数，格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>([]T, size, <span class="built_in">cap</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>T:切片的元素类型</li>
<li>size:切片中元素的数量</li>
<li>cap:切片的容量，不写cap默认cap等于size</li>
</ul>
<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">2</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Println(a)      <span class="comment">//[0 0]</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(a)) <span class="comment">//2</span></span><br><span class="line">	fmt.Println(<span class="built_in">cap</span>(a)) <span class="comment">//10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中<code>a</code>的内部存储空间已经分配了10个，但实际上只用了2个。 容量并不会影响当前元素的个数，所以<code>len(a)</code>返回2，<code>cap(a)</code>则返回该切片的容量。</p>
<h5 id="切片的本质"><a href="#切片的本质" class="headerlink" title="切片的本质"></a>切片的本质</h5><p>切片的本质就是对底层数组的封装，它包含了三个信息：底层数组的指针、切片的长度（len）和切片的容量（cap）。（切片就是一个框，框住了一块连续的内存）</p>
<p>举个例子，现在有一个数组<code>a := [8]int{0, 1, 2, 3, 4, 5, 6, 7}</code>，切片<code>s1 := a[:5]</code>，相应示意图如下。</p>
<p><img src="https://www.liwenzhou.com/images/Go/slice/slice_01.png" alt="slice_01"></p>
<p>切片<code>s2 := a[3:6]</code>，相应示意图如下：</p>
<p><img src="https://www.liwenzhou.com/images/Go/slice/slice_02.png" alt="slice_02"></p>
<h5 id="判断切片是否为空"><a href="#判断切片是否为空" class="headerlink" title="判断切片是否为空"></a>判断切片是否为空</h5><p>要检查切片是否为空，请始终使用<code>len(s) == 0</code>来判断，而不应该使用<code>s == nil</code>来判断</p>
<h5 id="切片不能直接比较"><a href="#切片不能直接比较" class="headerlink" title="切片不能直接比较"></a>切片不能直接比较</h5><p>切片之间是不能比较的，我们不能使用<code>==</code>操作符来判断两个切片是否含有全部相等元素。 切片唯一合法的比较操作是和<code>nil</code>比较。 一个<code>nil</code>值的切片并没有底层数组，一个<code>nil</code>值的切片的长度和容量都是0。但是我们不能说一个长度和容量都是0的切片一定是<code>nil</code>，例如下面的示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 []<span class="keyword">int</span>         <span class="comment">//len(s1)=0;cap(s1)=0;s1==nil</span></span><br><span class="line">s2 := []<span class="keyword">int</span>&#123;&#125;        <span class="comment">//len(s2)=0;cap(s2)=0;s2!=nil</span></span><br><span class="line">s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>) <span class="comment">//len(s3)=0;cap(s3)=0;s3!=nil</span></span><br></pre></td></tr></table></figure>

<p>所以要判断一个切片是否是空的，要是用<code>len(s) == 0</code>来判断，不应该使用<code>s == nil</code>来判断。</p>
<h5 id="切片的赋值拷贝"><a href="#切片的赋值拷贝" class="headerlink" title="切片的赋值拷贝"></a>切片的赋值拷贝</h5><p>下面的代码中演示了拷贝前后两个变量共享底层数组，对一个切片的修改会影响另一个切片的内容，这点需要特别注意。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">3</span>) <span class="comment">//[0 0 0]</span></span><br><span class="line">	s2 := s1             <span class="comment">//将s1直接赋值给s2，s1和s2共用一个底层数组</span></span><br><span class="line">	s2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    <span class="comment">// s1和s2都指向了一个底层数组</span></span><br><span class="line">	fmt.Println(s1) <span class="comment">//[100 0 0]</span></span><br><span class="line">	fmt.Println(s2) <span class="comment">//[100 0 0]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="切片遍历"><a href="#切片遍历" class="headerlink" title="切片遍历"></a>切片遍历</h5><p>切片的遍历方式和数组是一致的，支持索引遍历和<code>for range</code>遍历</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">		fmt.Println(i, s[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> s &#123;</span><br><span class="line">		fmt.Println(index, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="append-方法为切片添加元素"><a href="#append-方法为切片添加元素" class="headerlink" title="append()方法为切片添加元素"></a>append()方法为切片添加元素</h5><p>Go语言的内建函数<code>append()</code>可以为切片动态添加元素。 可以一次添加一个元素，可以添加多个元素，也可以添加另一个切片中的元素（后面加…，…表示将切片元素拆开）</p>
<p>append追加元素，原来的底层数组放不下的时候，Go底层就会把底层数组换一个，还是要用原来的变量名去接收（比如公司扩容，公司名称不变）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">1</span>)        <span class="comment">// [1]</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)  <span class="comment">// [1 2 3 4]</span></span><br><span class="line">	s2 := []<span class="keyword">int</span>&#123;<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;  </span><br><span class="line">	s = <span class="built_in">append</span>(s, s2...)    <span class="comment">// [1 2 3 4 5 6 7]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>通过var声明的零值切片可以在<code>append()</code>函数直接使用，无需初始化</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>没有必要像下面的代码一样初始化一个切片再传入<code>append()</code>函数使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s := []<span class="keyword">int</span>&#123;&#125;  <span class="comment">// 没有必要初始化</span></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">make</span>([]<span class="keyword">int</span>)  <span class="comment">// 没有必要初始化</span></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>每个切片会指向一个底层数组，这个数组的容量够用就添加新增元素。当底层数组不能容纳新增的元素时，切片就会自动按照一定的策略进行“扩容”，此时该切片指向的底层数组就会更换。“扩容”操作往往发生在<code>append()</code>函数调用时，所以我们通常都需要用原变量接收append函数的返回值。</p>
<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//append()添加元素和切片扩容</span></span><br><span class="line">	<span class="keyword">var</span> numSlice []<span class="keyword">int</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		numSlice = <span class="built_in">append</span>(numSlice, i)</span><br><span class="line">		fmt.Printf(<span class="string">"%v  len:%d  cap:%d  ptr:%p\n"</span>, numSlice, <span class="built_in">len</span>(numSlice), <span class="built_in">cap</span>(numSlice), numSlice)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[0]  len:1  <span class="built_in">cap</span>:1  ptr:0xc0000a8000</span><br><span class="line">[0 1]  len:2  <span class="built_in">cap</span>:2  ptr:0xc0000a8040</span><br><span class="line">[0 1 2]  len:3  <span class="built_in">cap</span>:4  ptr:0xc0000b2020</span><br><span class="line">[0 1 2 3]  len:4  <span class="built_in">cap</span>:4  ptr:0xc0000b2020</span><br><span class="line">[0 1 2 3 4]  len:5  <span class="built_in">cap</span>:8  ptr:0xc0000b6000</span><br><span class="line">[0 1 2 3 4 5]  len:6  <span class="built_in">cap</span>:8  ptr:0xc0000b6000</span><br><span class="line">[0 1 2 3 4 5 6]  len:7  <span class="built_in">cap</span>:8  ptr:0xc0000b6000</span><br><span class="line">[0 1 2 3 4 5 6 7]  len:8  <span class="built_in">cap</span>:8  ptr:0xc0000b6000</span><br><span class="line">[0 1 2 3 4 5 6 7 8]  len:9  <span class="built_in">cap</span>:16  ptr:0xc0000b8000</span><br><span class="line">[0 1 2 3 4 5 6 7 8 9]  len:10  <span class="built_in">cap</span>:16  ptr:0xc0000b8000</span><br></pre></td></tr></table></figure>

<p>从上面的结果可以看出：</p>
<ol>
<li><code>append()</code>函数将元素追加到切片的最后并返回该切片</li>
<li>切片numSlice的容量按照1，2，4，8，16这样的规则自动进行扩容，每次扩容后都是扩容前的2倍</li>
</ol>
<p>append()函数还支持一次性追加多个元素。 例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> citySlice []<span class="keyword">string</span></span><br><span class="line"><span class="comment">// 追加一个元素</span></span><br><span class="line">citySlice = <span class="built_in">append</span>(citySlice, <span class="string">"北京"</span>)</span><br><span class="line"><span class="comment">// 追加多个元素</span></span><br><span class="line">citySlice = <span class="built_in">append</span>(citySlice, <span class="string">"上海"</span>, <span class="string">"广州"</span>, <span class="string">"深圳"</span>)</span><br><span class="line"><span class="comment">// 追加切片</span></span><br><span class="line">a := []<span class="keyword">string</span>&#123;<span class="string">"成都"</span>, <span class="string">"重庆"</span>&#125;</span><br><span class="line">citySlice = <span class="built_in">append</span>(citySlice, a...)	<span class="comment">// ...表示拆开</span></span><br><span class="line">fmt.Println(citySlice) <span class="comment">//[北京 上海 广州 深圳 成都 重庆]</span></span><br></pre></td></tr></table></figure>

<h5 id="切片的扩容策略"><a href="#切片的扩容策略" class="headerlink" title="切片的扩容策略"></a>切片的扩容策略</h5><p>可以通过查看<code>$GOROOT/src/runtime/slice.go</code>源码，其中扩容相关代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">newcap := old.<span class="built_in">cap</span></span><br><span class="line">doublecap := newcap + newcap</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">cap</span> &gt; doublecap &#123;</span><br><span class="line">	newcap = <span class="built_in">cap</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> old.<span class="built_in">len</span> &lt; <span class="number">1024</span> &#123;</span><br><span class="line">		newcap = doublecap</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// Check 0 &lt; newcap to detect overflow</span></span><br><span class="line">		<span class="comment">// and prevent an infinite loop.</span></span><br><span class="line">		<span class="keyword">for</span> <span class="number">0</span> &lt; newcap &amp;&amp; newcap &lt; <span class="built_in">cap</span> &#123;</span><br><span class="line">			newcap += newcap / <span class="number">4</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// Set newcap to the requested cap when</span></span><br><span class="line">		<span class="comment">// the newcap calculation overflowed.</span></span><br><span class="line">		<span class="keyword">if</span> newcap &lt;= <span class="number">0</span> &#123;</span><br><span class="line">			newcap = <span class="built_in">cap</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从上面的代码可以看出以下内容：</p>
<p><strong>注：目前不确定</strong></p>
<ul>
<li>首先判断，如果新申请容量（cap）大于2倍的旧容量（old.cap），最终容量（newcap）就是新申请的容量（cap）。</li>
<li>否则判断，如果旧切片的长度小于1024，则最终容量(newcap)就是旧容量(old.cap)的两倍，即（newcap=doublecap），</li>
<li>否则判断，如果旧切片长度大于等于1024，则最终容量（newcap）从旧容量（old.cap）开始循环增加原来的1/4，即（newcap=old.cap,for {newcap += newcap/4}）直到最终容量（newcap）大于等于新申请的容量(cap)，即（newcap &gt;= cap）</li>
<li>如果最终容量（cap）计算值溢出，则最终容量（cap）就是新申请容量（cap）。</li>
</ul>
<p>需要注意的是，切片扩容还会根据切片中元素的类型不同而做不同的处理，比如<code>int</code>和<code>string</code>类型的处理方式就不一样。</p>
<h5 id="copy-函数复制切片"><a href="#copy-函数复制切片" class="headerlink" title="copy()函数复制切片"></a>copy()函数复制切片</h5><p>首先我们来看一个问题：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	b := a</span><br><span class="line">	fmt.Println(a) <span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">	fmt.Println(b) <span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">	b[<span class="number">0</span>] = <span class="number">1000</span></span><br><span class="line">	fmt.Println(a) <span class="comment">//[1000 2 3 4 5]</span></span><br><span class="line">	fmt.Println(b) <span class="comment">//[1000 2 3 4 5]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于切片是引用类型，所以a和b其实都指向了同一块内存地址。修改b的同时a的值也会发生变化</p>
<p>Go语言内建的<code>copy()</code>函数可以迅速地将一个切片的数据复制到另外一个切片空间中，<code>copy()</code>函数的使用格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy(destSlice, srcSlice []T)</span><br></pre></td></tr></table></figure>

<ul>
<li>destSlice: 目标切片</li>
<li>srcSlice: 数据来源切片</li>
</ul>
<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// copy()复制切片</span></span><br><span class="line">	a := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	c := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">	<span class="built_in">copy</span>(c, a)     <span class="comment">//使用copy()函数将切片a中的元素复制到切片c</span></span><br><span class="line">	fmt.Println(a) <span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">	fmt.Println(c) <span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">	c[<span class="number">0</span>] = <span class="number">1000</span></span><br><span class="line">    <span class="comment">// 修改原切片，复制后的切片不会受到影响</span></span><br><span class="line">	fmt.Println(a) <span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">	fmt.Println(c) <span class="comment">//[1000 2 3 4 5]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="切片删除元素"><a href="#切片删除元素" class="headerlink" title="切片删除元素"></a>切片删除元素</h5><p>Go语言中并没有删除切片元素的专用方法，我们可以使用切片本身的特性来删除元素。 代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 从切片中删除元素</span></span><br><span class="line">	a := []<span class="keyword">int</span>&#123;<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>&#125;</span><br><span class="line">	<span class="comment">// 要删除索引为2的元素</span></span><br><span class="line">	a = <span class="built_in">append</span>(a[:<span class="number">2</span>], a[<span class="number">3</span>:]...)</span><br><span class="line">	fmt.Println(a) <span class="comment">//[30 31 33 34 35 36 37]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结一下就是：要从切片a中删除索引为<code>index</code>的元素，操作方法是<code>a = append(a[:index], a[index+1:]...)</code>，删除之后容量不发生变化</p>
<p><strong>注意：</strong>删除元素也修改了底层数组，数组长度固定，所以需要前移并补充</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	s := a[:]</span><br><span class="line">	fmt.Println(<span class="string">"s="</span>, s)</span><br><span class="line">	<span class="comment">// 修改了底层数组，因为切片框住的是连续的内存，所以后面要往前移，数组的长度是固定的，用最后一个元素补充</span></span><br><span class="line">	s1 := <span class="built_in">append</span>(s[:<span class="number">1</span>], s[<span class="number">2</span>:]...)</span><br><span class="line">	fmt.Println(<span class="string">"s1="</span>, s1)</span><br><span class="line">	fmt.Println(<span class="string">"a="</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习</strong></p>
<p>以下代码会输出什么</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	fmt.Println(a == <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">15</span>; i++ &#123;</span><br><span class="line">		a = <span class="built_in">append</span>(a, fmt.Sprintf(<span class="string">"%v"</span>, i))</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(a, <span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Println(b)</span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">16</span>; j++ &#123;</span><br><span class="line">		b = <span class="built_in">append</span>(b, fmt.Sprintf(<span class="string">"%v"</span>, j))</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(b, <span class="built_in">len</span>(b), <span class="built_in">cap</span>(b))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [    ] 里面是5个空字符串</span></span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="comment">// [     0 1 2 3 4 5 6 7 8 9 10 11 12 13 14] 20 20</span></span><br><span class="line"><span class="comment">// [    ]  里面是5个空字符串</span></span><br><span class="line"><span class="comment">// [     0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15] 21 40</span></span><br></pre></td></tr></table></figure>

<h4 id="管道（Channel）"><a href="#管道（Channel）" class="headerlink" title="管道（Channel）"></a>管道（Channel）</h4><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><h4 id="接口（interface）"><a href="#接口（interface）" class="headerlink" title="接口（interface）"></a>接口（interface）</h4><h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>Go语言中提供的映射关系容器为<code>map</code>，其内部使用<code>散列表（hash）</code>实现。</p>
<p>map是一种无序的基于<code>key-value</code>的数据结构，Go语言中的map是引用类型，必须初始化才能使用。</p>
<h5 id="map定义"><a href="#map定义" class="headerlink" title="map定义"></a>map定义</h5><p>Go语言中 <code>map</code>的定义语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">map</span>[KeyType]ValueType</span><br></pre></td></tr></table></figure>

<ul>
<li>KeyType:表示键的类型。</li>
<li>ValueType:表示键对应的值的类型。</li>
</ul>
<p>map类型的变量默认初始值为nil，需要使用make()函数来分配内存。语法为：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">map</span>[KeyType]ValueType, [<span class="built_in">cap</span>])</span><br></pre></td></tr></table></figure>

<p>其中cap表示map的容量，该参数虽然不是必须的，但是我们应该在初始化map的时候就为其指定一个合适的容量。</p>
<h5 id="map基本使用"><a href="#map基本使用" class="headerlink" title="map基本使用"></a>map基本使用</h5><p>map中的数据都是成对出现的，map的基本使用示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">8</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">	fmt.Println(scoreMap)</span><br><span class="line">	fmt.Println(scoreMap[<span class="string">"小明"</span>])</span><br><span class="line">	fmt.Printf(<span class="string">"type of a:%T\n"</span>, scoreMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map[小明:100 张三:90]</span><br><span class="line">100</span><br><span class="line"><span class="built_in">type</span> of a:map[string]int</span><br></pre></td></tr></table></figure>

<p>map也支持在声明的时候填充元素，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	userInfo := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		<span class="string">"username"</span>: <span class="string">"小王子"</span>,</span><br><span class="line">		<span class="string">"password"</span>: <span class="string">"123456"</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(userInfo) <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="判断某个键是否存在"><a href="#判断某个键是否存在" class="headerlink" title="判断某个键是否存在"></a>判断某个键是否存在</h5><p>Go语言中有个判断map中键是否存在的特殊写法，格式如下:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := <span class="keyword">map</span>[key]</span><br></pre></td></tr></table></figure>

<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">	<span class="comment">// 如果key存在ok为true,v为对应的值；不存在ok为false,v为值类型的零值</span></span><br><span class="line">	v, ok := scoreMap[<span class="string">"娜扎"</span>]</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"查无此人"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map的遍历"><a href="#map的遍历" class="headerlink" title="map的遍历"></a>map的遍历</h5><p>Go语言中使用<code>for range</code>遍历map。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">	scoreMap[<span class="string">"娜扎"</span>] = <span class="number">60</span></span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">		fmt.Println(k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但我们只想遍历key的时候，可以按下面的写法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">	scoreMap[<span class="string">"娜扎"</span>] = <span class="number">60</span></span><br><span class="line">	<span class="keyword">for</span> k := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">		fmt.Println(k)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只想遍历value的时候，采用匿名变量，忽略key即可</p>
<p><strong>注意：</strong> 遍历map时的元素顺序与添加键值对的顺序无关。</p>
<h5 id="使用delete-函数删除键值对"><a href="#使用delete-函数删除键值对" class="headerlink" title="使用delete()函数删除键值对"></a>使用delete()函数删除键值对</h5><p>使用<code>delete()</code>内建函数从map中删除一组键值对，<code>delete()</code>函数的格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">delete</span>(<span class="keyword">map</span>, key)</span><br></pre></td></tr></table></figure>

<ul>
<li>map:表示要删除键值对的map</li>
<li>key:表示要删除的键值对的键</li>
</ul>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">	scoreMap[<span class="string">"娜扎"</span>] = <span class="number">60</span></span><br><span class="line">	<span class="built_in">delete</span>(scoreMap, <span class="string">"小明"</span>)<span class="comment">//将小明:100从map中删除</span></span><br><span class="line">	<span class="keyword">for</span> k,v := <span class="keyword">range</span> scoreMap&#123;</span><br><span class="line">		fmt.Println(k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="按照指定顺序遍历map"><a href="#按照指定顺序遍历map" class="headerlink" title="按照指定顺序遍历map"></a>按照指定顺序遍历map</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano()) <span class="comment">//初始化随机数种子</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> scoreMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">		key := fmt.Sprintf(<span class="string">"stu%02d"</span>, i) <span class="comment">//生成stu开头的字符串</span></span><br><span class="line">		value := rand.Intn(<span class="number">100</span>)          <span class="comment">//生成0~99的随机整数</span></span><br><span class="line">		scoreMap[key] = value</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//取出map中的所有key存入切片keys</span></span><br><span class="line">	<span class="keyword">var</span> keys = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, <span class="number">200</span>)</span><br><span class="line">	<span class="keyword">for</span> key := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">		keys = <span class="built_in">append</span>(keys, key)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//对切片进行排序</span></span><br><span class="line">	sort.Strings(keys)</span><br><span class="line">	<span class="comment">//按照排序后的key遍历map</span></span><br><span class="line">	<span class="keyword">for</span> _, key := <span class="keyword">range</span> keys &#123;</span><br><span class="line">		fmt.Println(key, scoreMap[key])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="元素为map类型的切片"><a href="#元素为map类型的切片" class="headerlink" title="元素为map类型的切片"></a>元素为map类型的切片</h5><p>下面的代码演示了切片中的元素为map类型时的操作：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> mapSlice = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"index:%d value:%v\n"</span>, index, value)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"after init"</span>)</span><br><span class="line">	<span class="comment">// 对切片中的map元素进行初始化</span></span><br><span class="line">	mapSlice[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">	mapSlice[<span class="number">0</span>][<span class="string">"name"</span>] = <span class="string">"小王子"</span></span><br><span class="line">	mapSlice[<span class="number">0</span>][<span class="string">"password"</span>] = <span class="string">"123456"</span></span><br><span class="line">	mapSlice[<span class="number">0</span>][<span class="string">"address"</span>] = <span class="string">"永定门"</span></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"index:%d value:%v\n"</span>, index, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index:0 value:map[]</span></span><br><span class="line"><span class="comment">// index:1 value:map[]</span></span><br><span class="line"><span class="comment">// index:2 value:map[]</span></span><br><span class="line"><span class="comment">// after init</span></span><br><span class="line"><span class="comment">// index:0 value:map[address:永定门 name:小王子 password:123456]</span></span><br><span class="line"><span class="comment">// index:1 value:map[]</span></span><br><span class="line"><span class="comment">// index:2 value:map[]</span></span><br></pre></td></tr></table></figure>

<h5 id="值为切片类型的map"><a href="#值为切片类型的map" class="headerlink" title="值为切片类型的map"></a>值为切片类型的map</h5><p>下面的代码演示了map中值为切片类型的操作：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> sliceMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Println(sliceMap)</span><br><span class="line">	fmt.Println(<span class="string">"after init"</span>)</span><br><span class="line">	key := <span class="string">"中国"</span></span><br><span class="line">	value, ok := sliceMap[key]</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		value = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	value = <span class="built_in">append</span>(value, <span class="string">"北京"</span>, <span class="string">"上海"</span>)</span><br><span class="line">	sliceMap[key] = value</span><br><span class="line">	fmt.Println(sliceMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习：</strong></p>
<p>写一个程序，统计一个字符串中每个单词出现的次数。比如：”how do you do”中how=1 do=2 you=1</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">//写一个程序，统计一个字符串中每个单词出现的次数。比如：”how do you do”中how=1 do=2 you=1</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="string">"how do you do"</span></span><br><span class="line">	list := strings.Split(str, <span class="string">" "</span>)	<span class="comment">// 拆成slice</span></span><br><span class="line">	fmt.Printf(<span class="string">"list=%v, list type:%T\n"</span>, list, list)</span><br><span class="line">	<span class="keyword">var</span> dict = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="built_in">len</span>(list))	<span class="comment">// 初始化map</span></span><br><span class="line">    <span class="comment">// 遍历切片，判断key在map是否存在，不存在添加，存在次数+1</span></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> list &#123;</span><br><span class="line">		<span class="keyword">if</span> _, ok := dict[value]; !ok &#123;</span><br><span class="line">			dict[value] = <span class="number">1</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			dict[value]++</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(dict)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>观察下面代码，写出最终的打印结果</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> Map <span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">int</span></span><br><span class="line">	m := <span class="built_in">make</span>(Map)</span><br><span class="line">	s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%+v\n"</span>, s)</span><br><span class="line">	m[<span class="string">"q1mi"</span>] = s</span><br><span class="line">	s = <span class="built_in">append</span>(s[:<span class="number">1</span>], s[<span class="number">2</span>:]...)</span><br><span class="line">	fmt.Printf(<span class="string">"%+v\n"</span>, s)</span><br><span class="line">	fmt.Printf(<span class="string">"%+v\n"</span>, m[<span class="string">"q1mi"</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [1 2 3]</span></span><br><span class="line"><span class="comment">// [1 3]</span></span><br><span class="line"><span class="comment">// [1 3 3]</span></span><br></pre></td></tr></table></figure>



<h1 id="Chapter4：Golang运算符"><a href="#Chapter4：Golang运算符" class="headerlink" title="Chapter4：Golang运算符"></a>Chapter4：Golang运算符</h1><p>运算符用于表示数据的运算、赋值和比较等</p>
<h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">+</td>
<td align="center">相加</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">相减</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">相乘</td>
</tr>
<tr>
<td align="center">/</td>
<td align="center">相除</td>
</tr>
<tr>
<td align="center">%</td>
<td align="center">求余</td>
</tr>
</tbody></table>
<p><strong>注意：</strong> <code>++</code>（自增）和<code>--</code>（自减）在Go语言中是单独的语句，并不是运算符。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 讲解 /、%</span></span><br><span class="line">	<span class="comment">// 说明：如果运算的数是整数，那么除后，去掉小数部分，保留整数部分</span></span><br><span class="line">	fmt.Println(<span class="number">10</span> / <span class="number">4</span>)     <span class="comment">// 2</span></span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">float32</span> = <span class="number">10</span> / <span class="number">4</span> <span class="comment">// 2</span></span><br><span class="line">	fmt.Println(n1)</span><br><span class="line">	<span class="comment">// 如果我们洗完保留小数部分，则需要浮点数参与运算</span></span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">float32</span> = <span class="number">10.0</span> / <span class="number">4</span> <span class="comment">// 2.5</span></span><br><span class="line">	<span class="keyword">var</span> n3 <span class="keyword">float32</span> = <span class="number">10</span> / <span class="number">4.0</span> <span class="comment">// 2.5</span></span><br><span class="line">	fmt.Println(n2, n3)</span><br><span class="line">	<span class="comment">// 演示 % 的使用</span></span><br><span class="line">	<span class="comment">// 看一个公式：a % b = a - a / b * b</span></span><br><span class="line">	fmt.Println(<span class="string">"10%3="</span>, <span class="number">10</span>%<span class="number">3</span>)     <span class="comment">// 1</span></span><br><span class="line">	fmt.Println(<span class="string">"-10%3="</span>, <span class="number">-10</span>%<span class="number">3</span>)   <span class="comment">// -1</span></span><br><span class="line">	fmt.Println(<span class="string">"10%-3="</span>, <span class="number">10</span>%<span class="number">-3</span>)   <span class="comment">// 1</span></span><br><span class="line">	fmt.Println(<span class="string">"-10%-3="</span>, <span class="number">-10</span>%<span class="number">-3</span>) <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 演示++和--的使用</span></span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	i++</span><br><span class="line">	fmt.Println(i) <span class="comment">// 11</span></span><br><span class="line">	i--</span><br><span class="line">	fmt.Println(i) <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意细节</strong></p>
<ol>
<li>对于除号，他的整数除和小数除是有区别的，整数之间做除法，只保留整数部分而舍弃小数部分。例如：<code>x := 19/5</code>，结果是<code>3</code></li>
<li>当对一个数取模时，可以等价<code>a % b = a - a / b * b</code>，这是取模的本质运算</li>
<li>Golang的自增自减只能当做一个独立语言使用，不能这样使用。例如：<code>a = i++</code>，<code>if i++ &gt;0</code></li>
<li>Golang的<code>++</code>和<code>--</code>只能写在变量的后面，不能写在前面，即没有++a和–a</li>
<li>Golang的设计者去掉c/java中的自增自减容易混淆的写法，更加简洁统一</li>
</ol>
<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">=</td>
<td align="center">简单的赋值运算符，将一个表达式的值赋给一个左值</td>
</tr>
<tr>
<td align="center">+=</td>
<td align="center">相加后再赋值</td>
</tr>
<tr>
<td align="center">-=</td>
<td align="center">相减后再赋值</td>
</tr>
<tr>
<td align="center">*=</td>
<td align="center">相乘后再赋值</td>
</tr>
<tr>
<td align="center">/=</td>
<td align="center">相除后再赋值</td>
</tr>
<tr>
<td align="center">%=</td>
<td align="center">求余后再赋值</td>
</tr>
<tr>
<td align="center">&lt;&lt;=</td>
<td align="center">左移后赋值</td>
</tr>
<tr>
<td align="center">&gt;&gt;=</td>
<td align="center">右移后赋值</td>
</tr>
<tr>
<td align="center">&amp;=</td>
<td align="center">按位与后赋值</td>
</tr>
<tr>
<td align="center">|=</td>
<td align="center">按位或后赋值</td>
</tr>
<tr>
<td align="center">^=</td>
<td align="center">按位异或后赋值</td>
</tr>
</tbody></table>
<h2 id="比较运算符-关系运算符"><a href="#比较运算符-关系运算符" class="headerlink" title="比较运算符/关系运算符"></a>比较运算符/关系运算符</h2><p><strong>注意细节</strong></p>
<p>关系运算符的结果都是<code>bool</code>型，要么是<code>true</code>，要么是<code>false</code></p>
<p>关系表达式经常用在<code>if</code>结构或者循环结构中</p>
<p>比较运算符<code>==</code>不能写成<code>=</code></p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">==</td>
<td align="center">检查两个值是否相等，如果相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">!=</td>
<td align="center">检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&gt;=</td>
<td align="center">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&lt;=</td>
<td align="center">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
</tbody></table>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><p>结果也是一个<code>bool</code>值，<code>&amp;&amp;</code>与，<code>||</code>或，<code>!</code>非</p>
<p><strong>注意细节</strong></p>
<p>逻辑与<code>&amp;&amp;</code>也叫短路与，如果第一个为<code>false</code>，第二个不会判断，最终结果为<code>false</code></p>
<p>逻辑或<code>||</code>也叫短路或，如果第一个为<code>true</code>，则第二个不会判断，结果为<code>true</code></p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&amp;&amp;</td>
<td align="center">逻辑 AND 运算符。 如果两边的操作数都是 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td align="center">||</td>
<td align="center">逻辑 OR 运算符。 如果两边的操作数有一个 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td align="center">!</td>
<td align="center">逻辑 NOT 运算符。 如果条件为 True，则为 False，否则为 True。</td>
</tr>
</tbody></table>
<h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&amp;</td>
<td align="center">参与运算的两数各对应的二进位相与。 （两位均为1才为1）</td>
</tr>
<tr>
<td align="center">|</td>
<td align="center">参与运算的两数各对应的二进位相或。 （两位有一个为1就为1）</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">参与运算的两数各对应的二进位相异或，当两对应的二进位相异时，结果为1。 （两位不一样则为1）</td>
</tr>
<tr>
<td align="center">&lt;&lt;</td>
<td align="center">左移n位就是乘以2的n次方。 “a&lt;&lt;b”是把a的各二进位全部左移b位，高位丢弃，低位补0。</td>
</tr>
<tr>
<td align="center">&gt;&gt;</td>
<td align="center">右移n位就是除以2的n次方。 “a&gt;&gt;b”是把a的各二进位全部右移b位。</td>
</tr>
</tbody></table>
<h2 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h2><p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200308170248691.png" alt="image-20200308170248691"></p>
<p><strong>Go语言明确不支持三目运算符，只能用<code>if..else..</code>表达</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	<span class="keyword">var</span> j <span class="keyword">int</span> = <span class="number">12</span></span><br><span class="line">	<span class="keyword">if</span> i &gt; j &#123;</span><br><span class="line">		n = i</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		n = j</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"n="</span>, n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>python三元运算符</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">为真时的结果 <span class="keyword">if</span> 判断条件 <span class="keyword">else</span> 为假时的结果（注意，没有冒号）</span><br><span class="line"><span class="comment"># 斐波那契</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> n <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">else</span> fn(n<span class="number">-1</span>)+fn(n<span class="number">-2</span>)</span><br><span class="line"><span class="comment"># numpy</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.where(判断条件，为真时的处理，为假时的处理)</span><br><span class="line">x = np.where(x%<span class="number">2</span>==<span class="number">1</span>, x+<span class="number">1</span>, x)</span><br></pre></td></tr></table></figure>



<h2 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h2><p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200308170530837.png" alt="image-20200308170530837"></p>
<p><strong>顺序：</strong></p>
<ol>
<li>括号，<code>++</code>，<code>--</code></li>
<li>单目运算</li>
<li>算数运算符</li>
<li>移位运算</li>
<li>关系运算符</li>
<li>位运算符</li>
<li>逻辑运算符</li>
<li>赋值运算符</li>
<li>逗号</li>
</ol>
<h2 id="键盘输入语句"><a href="#键盘输入语句" class="headerlink" title="键盘输入语句"></a>键盘输入语句</h2><p>接收用户输入的数据，就可以使用键盘输入语句来获取</p>
<p>函数：<strong>fmt.Scanln()</strong>或者<strong>fmt.Scanf()</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 要求从控制台接收用户信息【姓名，年龄，薪水，是否通过考试】</span></span><br><span class="line">	<span class="comment">// 方式一</span></span><br><span class="line">	<span class="keyword">var</span> name <span class="keyword">string</span></span><br><span class="line">	<span class="keyword">var</span> age <span class="keyword">byte</span></span><br><span class="line">	<span class="keyword">var</span> sal <span class="keyword">float32</span></span><br><span class="line">	<span class="keyword">var</span> isPass <span class="keyword">bool</span></span><br><span class="line">	fmt.Println(<span class="string">"请输入姓名："</span>)</span><br><span class="line">	<span class="comment">// 阻塞等待输入</span></span><br><span class="line">	fmt.Scanln(&amp;name)</span><br><span class="line">	fmt.Println(<span class="string">"请输入年龄："</span>)</span><br><span class="line">	fmt.Scanln(&amp;age)</span><br><span class="line">	fmt.Println(<span class="string">"请输入薪水："</span>)</span><br><span class="line">	fmt.Scanln(&amp;sal)</span><br><span class="line">	fmt.Println(<span class="string">"请输入是否通过考试："</span>)</span><br><span class="line">	fmt.Scanln(&amp;isPass)</span><br><span class="line">	fmt.Printf(<span class="string">"名字是：%v\n年龄是：%v\n薪水是：%v\n是否通过考试：%v\n"</span>, name, age, sal, isPass)</span><br><span class="line">	<span class="comment">// 方式二</span></span><br><span class="line">	fmt.Println(<span class="string">"请输入姓名，年龄，薪水，是否通过考试"</span>)</span><br><span class="line">	fmt.Scanf(<span class="string">"%s %d %f %t"</span>, &amp;name, &amp;age, &amp;sal, &amp;isPass)</span><br><span class="line">	fmt.Printf(<span class="string">"名字是：%v\n年龄是：%v\n薪水是：%v\n是否通过考试：%v\n"</span>, name, age, sal, isPass)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><p><strong>n进制逢n进1</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 二进制输出</span></span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">5</span></span><br><span class="line">	fmt.Printf(<span class="string">"%b\n"</span>, i)</span><br><span class="line">	<span class="comment">// 八进制：0-7，满8进1，以数字0开头表示</span></span><br><span class="line">	<span class="keyword">var</span> j <span class="keyword">int</span> = <span class="number">011</span></span><br><span class="line">	fmt.Println(<span class="string">"j="</span>, j)</span><br><span class="line">	<span class="comment">// 0-9及A-F，满16进1，以0x或者0X开头表示</span></span><br><span class="line">	<span class="keyword">var</span> k <span class="keyword">int</span> = <span class="number">0x11</span></span><br><span class="line">	fmt.Println(<span class="string">"k="</span>, k)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>二进制转十进制</strong></p>
<p>从最低位（右边），将每个位上的数提取出来，乘以2的（位数-1）次方，然后求和</p>
<p><strong>十进制转二进制</strong></p>
<p>将该数不断除以2，直到商为0，然后将每步得到的余数倒过来，就是对应的二进制</p>
<p><strong>八进制转十进制</strong></p>
<p>从最低位（右边），将每个位上的数提取出来，乘以8的（位数-1）次方，然后求和</p>
<p><strong>十进制转八进制</strong></p>
<p>将该数不断除以8，直到商为0，然后将每步得到的余数倒过来，就是对应的八进制</p>
<p><strong>十六进制转十进制</strong></p>
<p>从最低位（右边），将每个位上的数提取出来，乘以16的（位数-1）次方，然后求和</p>
<p><strong>十六进制转十进制</strong></p>
<p>将该数不断除以16，直到商为0，然后将每步得到的余数倒过来，就是对应的十六进制</p>
<p><strong>原码、反码、补码</strong>（帮助位运算）</p>
<p>对于有符号的而言：</p>
<ol>
<li><p>二进制最高位是符号位：0表示正数，1表示负数</p>
<p>1==》[<strong>0</strong>000 0001]    -1==》[<strong>1</strong>000 0001]</p>
</li>
<li><p>正数的原码，反码和补码都一样</p>
</li>
<li><p>负数的反码=它的原码符号位不变，其他位取反（0-&gt;1,1-&gt;0）</p>
<p>1==》原码[0000 0001]    反码[0000 0001]    补码[0000 0001]</p>
<p>-1==》原码[1000 0001]    反码[1111 1110]    补码[1111 1111]</p>
</li>
<li><p>负数的补码=它的反码+1</p>
</li>
<li><p>0的反码，补码都是0</p>
</li>
<li><p><strong>在计算机运算的时候，都是以补码的方式来运算的</strong></p>
<p>1-1 = 1+(-1)</p>
</li>
</ol>
<h1 id="Chapter5：Golang流程控制"><a href="#Chapter5：Golang流程控制" class="headerlink" title="Chapter5：Golang流程控制"></a>Chapter5：Golang流程控制</h1><p>控制决定程序执行</p>
<ul>
<li><p>顺序控制</p>
<p>从上到下逐步执行</p>
</li>
<li><p>分支控制</p>
</li>
<li><p>循环控制</p>
</li>
</ul>
<h2 id="if-else分支控制"><a href="#if-else分支控制" class="headerlink" title="if-else分支控制"></a>if-else分支控制</h2><p><strong>所有分支控制只有一个入口，满足条件执行，其他就不会执行</strong></p>
<p>Go语言规定与<code>if</code>匹配的左括号<code>{</code>必须与<code>if和表达式</code>放在同一行，<code>{</code>放在其他位置会触发编译错误。 同理，与<code>else</code>匹配的<code>{</code>也必须与<code>else</code>写在同一行，<code>else</code>也必须与上一个<code>if</code>或<code>else if</code>右边的大括号在同一行。</p>
<ol>
<li><p>单分支</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式<span class="number">1</span> &#123;</span><br><span class="line">       分支<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明</strong></p>
<p>当条件表达式为<code>true</code>时，就会执行<code>{}</code>的代码，<code>{}</code>是必须有的，就算只有一行代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">   <span class="keyword">import</span> (</span><br><span class="line">   	<span class="string">"fmt"</span></span><br><span class="line">   )</span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   	<span class="keyword">var</span> age <span class="keyword">byte</span></span><br><span class="line">   	fmt.Println(<span class="string">"请输入年龄："</span>)</span><br><span class="line">   	<span class="comment">// 阻塞等待输入</span></span><br><span class="line">   	fmt.Scanln(&amp;age)</span><br><span class="line">   	<span class="keyword">if</span> age &gt; <span class="number">18</span> &#123;</span><br><span class="line">   		fmt.Println(<span class="string">"已经成年"</span>)</span><br><span class="line">   	&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>多分支</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式<span class="number">1</span> &#123;</span><br><span class="line">       分支<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> 表达式<span class="number">2</span> &#123;</span><br><span class="line">       分支<span class="number">2</span></span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">       分支<span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套分支</p>
<p>嵌套分支不宜过多，最多控制在三层</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参加百米运动会，如果用时八秒以内进入决赛，否则提示淘汰，根据性别提示进入男子组或女子组</span></span><br><span class="line"><span class="comment">// 输入成绩和性别</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> second <span class="keyword">float64</span></span><br><span class="line">	<span class="comment">// 阻塞等待输入</span></span><br><span class="line">	fmt.Println(<span class="string">"请输入秒数："</span>)</span><br><span class="line">	fmt.Scanln(&amp;second)</span><br><span class="line">	<span class="keyword">if</span> second &lt;= <span class="number">8</span> &#123;</span><br><span class="line">		<span class="keyword">var</span> gender <span class="keyword">string</span></span><br><span class="line">		fmt.Println(<span class="string">"请输入性别："</span>)</span><br><span class="line">		fmt.Scanln(&amp;gender)</span><br><span class="line">		<span class="keyword">if</span> gender == <span class="string">"男"</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"进入男子组"</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"进入女子组"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"被淘汰"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h2 id="switch分支控制"><a href="#switch分支控制" class="headerlink" title="switch分支控制"></a>switch分支控制</h2><h3 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h3><ol>
<li><code>switch</code>语句用于基于不同条件执行不同动作，每一个<code>case</code>分支都是唯一的，从上到下逐一测试，知道匹配为止。</li>
<li>匹配项后面也不需要再加<code>break</code></li>
<li>Go语言规定每个<code>switch</code>只能有一个<code>default</code>分支。</li>
</ol>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> 表达式&#123;</span><br><span class="line"><span class="keyword">case</span> 表达式<span class="number">1</span>,表达式<span class="number">2</span>,...:</span><br><span class="line">	语句块<span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> 表达式<span class="number">3</span>,表达式<span class="number">4</span>,...:</span><br><span class="line">	语句块<span class="number">2</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	语句块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200315213852082.png" alt="image-20200315213852082"></p>
<ol>
<li>是她参加的执行流程是，先执行表达式，得到值，然后和<code>case</code>的表达式进行比较，如果相等，就匹配到，然后执行对应的<code>case</code>的语句块，并退出<code>switch</code>控制</li>
<li>如果<code>switch</code>的表达式的值没有和任何<code>case</code>表达式匹配到，则执行<code>default</code>语句块，执行后退出控制</li>
<li>在Golang中，<code>case</code>后的表达式可以有多个，使用逗号隔开</li>
<li>Golang中<code>case</code>后不需要加<code>break</code>，因为默认会有。即当程序执行完<code>case</code>语句块后，就直接退出该<code>switch</code>控制</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> key <span class="keyword">byte</span></span><br><span class="line">	fmt.Println(<span class="string">"请输入一个字符：abcde"</span>)</span><br><span class="line">	fmt.Scanf(<span class="string">"%c"</span>, &amp;key)</span><br><span class="line">	<span class="keyword">switch</span> key &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'a'</span>:</span><br><span class="line">		fmt.Println(<span class="string">"周一"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'b'</span>:</span><br><span class="line">		fmt.Println(<span class="string">"周二"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'c'</span>:</span><br><span class="line">		fmt.Println(<span class="string">"周三"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"周末"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="switch细节讨论"><a href="#switch细节讨论" class="headerlink" title="switch细节讨论"></a>switch细节讨论</h3><ol>
<li><p><code>case/switch</code>后面是一个表达式（常量，变量，一个有返回值的函数等）</p>
</li>
<li><p><code>case</code>后的各个表达式数据类型必须和<code>switch</code>的表达式数据类型一致</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200315185123228.png" alt="image-20200315185123228"></p>
</li>
<li><p><code>case</code>后面可以跟多个表达式，用逗号隔开</p>
</li>
<li><p><code>case</code>后面的表达式如果是常量值，要求不可以重复</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200315185509088.png" alt="image-20200315185509088"></p>
</li>
<li><p><code>case</code>后面不需要带<code>break</code>，匹配到一个<code>case</code>后就会执行对应的代码块，然后退出<code>switch</code>，匹配不到则执行<code>default</code></p>
</li>
<li><p><code>default</code>语句不是必须的</p>
</li>
<li><p><code>switch</code>后也可以不带表达式，类似<code>if-else</code>分支来使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">int64</span> = <span class="number">10</span></span><br><span class="line">	<span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> n1 == <span class="number">10</span>:</span><br><span class="line">		fmt.Println(<span class="string">"10"</span>)</span><br><span class="line">	<span class="keyword">case</span> n1 != <span class="number">10</span>:</span><br><span class="line">		fmt.Println(<span class="string">"!=10"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"未匹配"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="8">
<li><p><code>switch</code>后也可以直接生命/定义一个变量，分号结束，不推荐</p>
</li>
<li><p><code>switch</code>穿透-<code>fallthrough</code>：如果在<code>case</code>语句块后增加<code>fallthrough</code>，则会继续执行下一个<code>case</code>，也叫<code>switch</code>穿透，是为了兼容C语言中的<code>case</code>设计的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">int64</span> = <span class="number">10</span></span><br><span class="line">	<span class="keyword">switch</span> n1 &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">		fmt.Println(<span class="string">"ok10"</span>)</span><br><span class="line">		<span class="keyword">fallthrough</span> <span class="comment">// 默认只能穿透一层</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">20</span>:</span><br><span class="line">		fmt.Println(<span class="string">"ok20"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">30</span>:</span><br><span class="line">		fmt.Println(<span class="string">"ok30"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"未匹配"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>type switch</code>：<code>switch</code>语句还可以被用于<code>type-switch</code>来判断某个<code>interface</code>变量中实际指向的变量类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> y = <span class="number">10.0</span></span><br><span class="line">	x = y</span><br><span class="line">    <span class="keyword">switch</span> i := x.(<span class="keyword">type</span>) &#123;<span class="comment">// x.(type)可以结合switch判断接口实际指向变量类型</span></span><br><span class="line">	<span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">		fmt.Printf(<span class="string">"x类型：%T"</span>, i)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">int</span>, <span class="keyword">bool</span>, <span class="keyword">string</span>:</span><br><span class="line">		fmt.Println(<span class="string">"x是int类型"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">		fmt.Println(<span class="string">"x是float类型"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">float64</span>:</span></span><br><span class="line">		fmt.Println(<span class="string">"x是func(int)类型"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"未匹配"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="switch和if的比较"><a href="#switch和if的比较" class="headerlink" title="switch和if的比较"></a>switch和if的比较</h3><ul>
<li>如果判断的具体数值不多，而且符合整数、浮点数、字符、字符串这几种类型。建议用<code>switch</code>语句，简洁有效</li>
<li>其他情况，对区间判断和结果为<code>bool</code>类型的判断，使用<code>if</code>，<code>if</code>的使用范围更广</li>
</ul>
<h2 id="for循环控制"><a href="#for循环控制" class="headerlink" title="for循环控制"></a>for循环控制</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i :=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">"cool"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 循环变量初始化;循环条件;循环变量迭代&#123;</span><br><span class="line">	循环操作（语句）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明</strong></p>
<ul>
<li>对于<code>for</code>循环来说，有四个要素</li>
<li>循环变量初始化</li>
<li>循环条件</li>
<li>循环操作，也叫循环体</li>
<li>循环变量迭代</li>
</ul>
<p><strong>执行顺序分析</strong></p>
<ol>
<li>执行循环变量初始化，比如<code>i := 1</code></li>
<li>执行循环条件，比如 <code>i &lt;= 10</code></li>
<li>如果循环条件为真，就执行循环操作，比如打印</li>
<li>执行循环变量迭代，比如<code>i++</code></li>
<li>反复执行2/3/4步骤，直到循环条件为<code>false</code>，退出<code>for</code>循环</li>
</ol>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200315212658907.png" alt="image-20200315212658907"></p>
<h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li><p>循环条件是返回一个布尔值的表达式</p>
</li>
<li><p><code>for</code>循环的第二种使用方式，初始语句和结束语句都可以省略，这种写法类似于其他语言中的<code>while</code>，在<code>while</code>后添加一个条件表达式，满足条件表达式时持续循环，否则结束循环</p>
<p>循环变量初始化</p>
<p>for 循环判断条件 {</p>
<p>​        循环执行语句</p>
<p>​        循环变量迭代</p>
<p>}</p>
</li>
</ol>
<p>   for循环的初始语句可以被忽略，但是初始语句后的分号必须要写，举个栗子：</p>
   <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">forDemo2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> ; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

   <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">forDemo3</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="number">10</span> &#123;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">		i++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

   <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    j := <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> j&lt;=<span class="number">10</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"cool"</span>)</span><br><span class="line">        j++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>死循环</p>
<p>for {</p>
<p>​        循环执行语句</p>
<p>}</p>
<p>等价于<code>for ; ; {}</code>是一个无限循环，通常需要配合<code>break</code>语句使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	k := <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> &#123; <span class="comment">// 等价于for ; ; &#123;</span></span><br><span class="line">		<span class="keyword">if</span> k &lt;= <span class="number">10</span> &#123;</span><br><span class="line">			fmt.Println(k)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		k++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>golang提供<code>for-range</code>的方式，可以方便遍历数组、切片、字符串、map 及通道（channel）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"hello,world"</span></span><br><span class="line">	<span class="comment">// 第一种遍历字符串方式</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"%c\n"</span>, str[i])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 第二种遍历字符串方式</span></span><br><span class="line">	<span class="keyword">for</span> index, val := <span class="keyword">range</span> str &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"index=%d,val=%c\n"</span>, index, val)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>上面代码细节讨论</strong></p>
<p>如果我们的字符串含有中文，那么第一种遍历字符串方式就是错误，会出现乱码，原第一种方法是按照字节来遍历，而Golang采用<code>utf-8</code>编码，一个汉字对应三个字节</p>
<p>如何解决：需要将<code>str</code>转成<code>[]rune</code>切片</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"hello,world,北京"</span></span><br><span class="line">	<span class="comment">// 第一种遍历字符串方式</span></span><br><span class="line">	str1 := []<span class="keyword">rune</span>(str)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(str1); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"%c\n"</span>, str1[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>for-range</code>采用字符方式遍历，不是按照字节来遍历的（注意index的变化）</p>
<p>通过<code>for range</code>遍历的返回值有以下规律：</p>
<ol>
<li>数组、切片、字符串返回索引和值</li>
<li><code>map</code>返回键和值</li>
<li>通道（channel）只返回通道内的值</li>
</ol>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200315220926768.png" alt="image-20200315220926768"></p>
</li>
</ol>
<p><strong>练习</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 100以内整除9的数之和</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> count <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line">	<span class="keyword">var</span> sum <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> i%<span class="number">9</span> == <span class="number">0</span> &#123;</span><br><span class="line">			count++</span><br><span class="line">			sum += i</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"count=%v sum=%v\n"</span>, count, sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="while和do…while实现"><a href="#while和do…while实现" class="headerlink" title="while和do…while实现"></a>while和do…while实现</h2><p>Go语言没有<code>while</code>和<code>do...while</code>语法，用<code>for</code>循环实现</p>
<h3 id="while实现"><a href="#while实现" class="headerlink" title="while实现"></a>while实现</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">循环变量初始化</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> 循环条件表达式&#123;</span><br><span class="line">		<span class="keyword">break</span>跳出循环</span><br><span class="line">	&#125;</span><br><span class="line">	循环操作语句</span><br><span class="line">	循环变量迭代</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明</strong></p>
<p><code>for</code>循环是一个无线循环</p>
<p><code>break</code>语句跳出循环</p>
<h3 id="do…while实现"><a href="#do…while实现" class="headerlink" title="do…while实现"></a>do…while实现</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">循环变量初始化</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	循环操作语句</span><br><span class="line">	循环变量迭代</span><br><span class="line">	<span class="keyword">if</span> 循环条件表达式 &#123;</span><br><span class="line">		<span class="keyword">break</span>跳出循环</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明</strong></p>
<p><code>do...while</code>是先执行后判断，至少执行一次</p>
<p>当循环条件成立后，就会执行<code>break</code>，<code>break</code>就是跳出<code>for</code>循环</p>
<h2 id="多重循环控制"><a href="#多重循环控制" class="headerlink" title="多重循环控制"></a>多重循环控制</h2><h3 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a>基本介绍</h3><ol>
<li>将一个循环放在另一个循环体内，就形成了嵌套循环。外边的成为外层循环，里面的成为内层循环。（建议不要超过3层）</li>
<li>实质上，嵌套循环就是把内层循环当成外层循环的循环体。当只有内层循环的循环条件为<code>false</code>时，才会跳出内层循环，才可结束外层的当次循环，开始下一次循环</li>
<li>设外层循环为<code>m</code>次时，内层为<code>n</code>次，则内层循环实际上需要执行<code>m*n</code>次</li>
</ol>
<h3 id="代码案例"><a href="#代码案例" class="headerlink" title="代码案例"></a>代码案例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> claNum <span class="keyword">int</span> = <span class="number">3</span></span><br><span class="line">	<span class="keyword">var</span> stuNum <span class="keyword">int</span> = <span class="number">5</span></span><br><span class="line">    <span class="keyword">var</span> passCount <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line">	sumGra := <span class="number">0.0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= claNum; i++ &#123;</span><br><span class="line">		<span class="keyword">var</span> sumCla <span class="keyword">float64</span> = <span class="number">0.0</span></span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= stuNum; j++ &#123;</span><br><span class="line">			<span class="keyword">var</span> score <span class="keyword">float64</span></span><br><span class="line">			fmt.Printf(<span class="string">"请输入%d班第%d个学生成绩："</span>, i, j)</span><br><span class="line">			fmt.Scanln(&amp;score)</span><br><span class="line">			sumCla += score</span><br><span class="line">            <span class="keyword">if</span> score &gt;= <span class="number">60</span> &#123;</span><br><span class="line">                passCount++</span><br><span class="line">            &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">"%d班学生平均分为%f\n"</span>, i, sumCla/<span class="keyword">float64</span>(stuNum))</span><br><span class="line">		sumGra += sumCla</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"年纪平均分=%f"</span>, sumGra/(<span class="keyword">float64</span>(claNum*stuNum)))</span><br><span class="line">    fmt.Printf(<span class="string">"及格人数为%d"</span>,passCount)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="跳转控制语句-break"><a href="#跳转控制语句-break" class="headerlink" title="跳转控制语句-break"></a>跳转控制语句-break</h2><p><strong>基本介绍：</strong><code>break</code>用于终止某个语句块的执行，中断当前<code>for</code>循环或跳出<code>switch</code>语句</p>
<p><strong>注意事项：</strong><code>break</code>语句出现在多层嵌套的语句块中时，可以通过标签（<code>label</code>）指明要终止的是哪一层语句块，标签要求必须定义在对应的<code>for</code>、<code>switch</code>和 <code>select</code>的代码块上</p>
<p><strong>需求：</strong>随机生成0-100的一个数，直到生成了99这个数，看看你一共用了几次</p>
<p><strong>分析：</strong>编写一个无限循环的空值，然后不停的随机生成数，当生成了99时，就退出循环</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> count <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">// 我们为了生成一个随机数，还需要rand设置一个随机种子</span></span><br><span class="line">		<span class="comment">// time.Now().Unix()：会返回一个从1970/1/1 0分0秒年到现在的秒数</span></span><br><span class="line">		rand.Seed(time.Now().Unix())</span><br><span class="line">		<span class="comment">// 随机生成数</span></span><br><span class="line">		n := rand.Intn(<span class="number">100</span>)</span><br><span class="line">		count++</span><br><span class="line">		<span class="keyword">if</span> n == <span class="number">99</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    fmt.Printf(<span class="string">"一共用了%d次"</span>, count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标签的使用</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">label1:</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">		<span class="comment">//label2:</span></span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line">				<span class="comment">//break label2</span></span><br><span class="line">				<span class="keyword">break</span> label1</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><code>break</code>默认会跳出最近的<code>for</code>循环</li>
<li><code>break</code>后面可以指定标签，跳出标签对应的<code>for</code>循环</li>
</ol>
<h2 id="跳转控制语句-continue"><a href="#跳转控制语句-continue" class="headerlink" title="跳转控制语句-continue"></a>跳转控制语句-continue</h2><p><strong>基本介绍：</strong><code>continue</code>用于结束本次循环，继续执行下一次循环</p>
<p><strong>注意事项：</strong><code>continue</code>语句出现在多层嵌套的语句块中时，可以通过标签（<code>label</code>）指明要跳过的是哪一层语句块，和<code>break</code>相同</p>
<p><strong>案例分析：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">label1:</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">		<span class="comment">//label2:</span></span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line">				<span class="comment">//break label2</span></span><br><span class="line">				<span class="keyword">continue</span> label1</span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Println(<span class="string">"j="</span>, j)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="跳转控制语句-goto"><a href="#跳转控制语句-goto" class="headerlink" title="跳转控制语句-goto"></a>跳转控制语句-goto</h2><p><strong>基本介绍</strong></p>
<ol>
<li>Go语言的<code>goto</code>语句可以无条件地转移到程序中指定的行</li>
<li><code>goto</code>语句通常与条件语句配合使用。可用来实现条件转移，跳出循环体等功能</li>
<li>在Go程序设计中一般不主张使用<code>goto</code>语句，以免造成程序流程的混乱，使理解和调试程序都产生困难</li>
</ol>
<p><strong>基本语法</strong></p>
<p><code>goto label</code></p>
<p>…</p>
<p><code>label:statement</code></p>
<p><strong>goto流程图</strong></p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200322215728271.png" alt="image-20200322215728271"></p>
<p><strong>案例演示</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"OK1"</span>)</span><br><span class="line">	<span class="keyword">goto</span> label1</span><br><span class="line">	fmt.Println(<span class="string">"OK2"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"OK3"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"OK4"</span>)</span><br><span class="line">label1:</span><br><span class="line">	fmt.Println(<span class="string">"OK5"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"OK6"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举个简化代码的栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gotoDemo1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> breakFlag <span class="keyword">bool</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line">				<span class="comment">// 设置退出标签</span></span><br><span class="line">				breakFlag = <span class="literal">true</span></span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Printf(<span class="string">"%v-%v\n"</span>, i, j)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 外层for循环判断</span></span><br><span class="line">		<span class="keyword">if</span> breakFlag &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gotoDemo2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line">				<span class="comment">// 设置退出标签</span></span><br><span class="line">				<span class="keyword">goto</span> breakTag</span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Printf(<span class="string">"%v-%v\n"</span>, i, j)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">	<span class="comment">// 标签</span></span><br><span class="line">breakTag:</span><br><span class="line">	fmt.Println(<span class="string">"结束for循环"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="跳转控制语句-return"><a href="#跳转控制语句-return" class="headerlink" title="跳转控制语句-return"></a>跳转控制语句-return</h2><p><strong>基本介绍</strong></p>
<p><code>return</code>使用在方法或者函数中，表示跳出所在方法或者函数</p>
<p>函数中return语句底层实现：在底层并不是原子操作，它分为给返回值赋值和RET指令两步</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200328215413903.png" alt="image-20200328215413903"></p>
<h1 id="Chapter6：Golang函数"><a href="#Chapter6：Golang函数" class="headerlink" title="Chapter6：Golang函数"></a>Chapter6：Golang函数</h1><h2 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h2><h3 id="基本介绍-3"><a href="#基本介绍-3" class="headerlink" title="基本介绍"></a>基本介绍</h3><p>为完成某一功能的程序指令（语句）的集合，称为函数</p>
<p>在Go中，函数分为自定义函数和系统函数</p>
<h3 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a>基本语法</h3><p>func  函数名 （形参列表） （返回值列表） {</p>
<p>​            执行语句</p>
<p>​            return 返回值列表</p>
<p>}</p>
<p>函数可以有返回值，也可以没有返回值；</p>
<p>命名返回值就相当于在函数内部声明了返回值，可以直接<code>return</code></p>
<p><strong>案例：实现加减乘除计算</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calcu</span><span class="params">(n1 <span class="keyword">float64</span>, n2 <span class="keyword">float64</span>, operator <span class="keyword">byte</span>)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> res <span class="keyword">float64</span></span><br><span class="line">	<span class="keyword">switch</span> operator &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">		res = n1 + n2</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">		res = n1 - n2</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'*'</span>:</span><br><span class="line">		res = n1 * n2</span><br><span class="line">	<span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">		res = n1 / n2</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"操作符号错误"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">float64</span> = <span class="number">1.2</span></span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">float64</span> = <span class="number">2.4</span></span><br><span class="line">	<span class="keyword">var</span> operator <span class="keyword">byte</span> = <span class="string">'-'</span></span><br><span class="line">	result := calcu(n1, n2, operator)</span><br><span class="line">	fmt.Println(<span class="string">"res="</span>, result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h3><ul>
<li><p>全局作用域</p>
</li>
<li><p>函数作用域</p>
<p>现在函数内部找变量，找不到往外曾照</p>
<p>在函数内部的变量，外部是访问不到的</p>
</li>
<li><p>语句块作用域（for循环，if，switch分支结构）</p>
</li>
</ul>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><h3 id="包的介绍"><a href="#包的介绍" class="headerlink" title="包的介绍"></a>包的介绍</h3><p>包的本质实际上就是创建不同的文件夹，来存放程序文件</p>
<p>go的每一个文件都属于一个包，也就是说go是以包的形式来管理文件和项目目录结构的</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323134846953.png" alt="image-20200323134846953"></p>
<p><strong>包的三大作用</strong></p>
<p>区分相同名字的函数、变量等标识符</p>
<p>当程序文件很多时，可以很好地管理项目</p>
<p>控制n数、变量等访问范围，即作用域</p>
<p><strong>包的相关说明</strong></p>
<ul>
<li><p>打包基本语法</p>
<p>package util</p>
</li>
<li><p>引包基本语法</p>
<p>import “包的路径”</p>
</li>
</ul>
<h3 id="包的使用及注意事项"><a href="#包的使用及注意事项" class="headerlink" title="包的使用及注意事项"></a>包的使用及注意事项</h3><p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323135311948.png" alt="image-20200323135311948"></p>
<p>1）给一个文件打包时，该包对应一个文件夹，文件包名通常和文件所在文件夹名一致，一般为小写字母</p>
<p>比如utils文件夹对应的包名就是utils，包名也可使用别的名字，但是调用的时候需要使用对应包名</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323140030843.png" alt="image-20200323140030843"></p>
<p>2）当一个文件要使用其他包函数或变量时，需要先引入对应的包</p>
<ul>
<li><p>引入方式1：import “包名”</p>
</li>
<li><p>引入方式2：import (</p>
<p>​                    “包名”</p>
<p>​                    “包名”</p>
<p>​        )</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323140445792.png" alt="image-20200323140445792"></p>
</li>
</ul>
<ul>
<li><p>package指令在文件第一行，然后是import指令、</p>
</li>
<li><p>在import包时，路径是从$GOPATH的src下开始，不用带src，编译器会自动从src下开始引入</p>
</li>
</ul>
<p>3）为了让其他包的文件，可以访问到本包的函数，则该函数名的首字母需要大写，类似Java的public，这样才能跨包访问<img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323214109451.png" alt="image-20200323214109451"></p>
<p>4）在访问其他包函数时，其语法是包名<strong>.</strong>函数名<img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323214327729.png" alt="image-20200323214327729"></p>
<p>5）如果包名较长，Go支持给包取别名，注意取别名后，原包名就不能使用了</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323214658979.png" alt="image-20200323214658979"></p>
<p>6）在同一个包下，不能有相同的函数名（也不能有相当的全局变量名），否则报重复定义</p>
<p>7）如果要编译成一个可执行文件（go build -o），就需要将包声明为main，即package main，main包只能有一个，如果写一个库，包名可以自定义</p>
<p>​    <strong>注意：</strong>编译完生成一个库文件，如utils工具包会生成utils.a库文件，这样别人需要用库时就不需要拿到我们的源代码，用不可查看的库文件即可</p>
<h2 id="函数-调用机制"><a href="#函数-调用机制" class="headerlink" title="函数-调用机制"></a>函数-调用机制</h2><h3 id="调用过程"><a href="#调用过程" class="headerlink" title="调用过程"></a>调用过程</h3><p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323224857639.png" alt="image-20200323224857639"></p>
<p><strong>机制说明</strong></p>
<ul>
<li>在调用一个函数时，内存会给该函数分配一个新的空间，编译器会通过自身的处理让这个新的空间和其他的栈的空间区分开来</li>
<li>在每个函数对应的栈中，数据空间是独立的，不会混淆</li>
<li>当一个函数执行完毕后，操作系统会销毁回收函数对应的栈空间</li>
<li>当函数有return语句时，就会将结果返回给调用者</li>
</ul>
<h3 id="return语句"><a href="#return语句" class="headerlink" title="return语句"></a>return语句</h3><ul>
<li>Go语言函数支持返回多个值</li>
<li>如果返回多个值时，在接收时，希望忽略，则使用<strong>_</strong>符号表示站位忽略</li>
<li>如果返回值只有一个，返回值类型列表可以不写括号 ()<img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200323230031546.png" alt="image-20200323230031546"></li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cal</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	sum := n1 + n2</span><br><span class="line">	sub := n1 - n2</span><br><span class="line">	<span class="keyword">return</span> sum, sub</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res1, res2 := cal(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"res1=%v\nres2=%v"</span>, res1, res2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="函数-递归调用"><a href="#函数-递归调用" class="headerlink" title="函数-递归调用"></a>函数-递归调用</h2><p>函数在函数体内调用本身，成为递归调用</p>
<h3 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fei</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> || n == <span class="number">2</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fei(n<span class="number">-1</span>) + fei(n<span class="number">-2</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	num := fei(<span class="number">8</span>)</span><br><span class="line">	fmt.Println(num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 1 2 3 5 8 13 21</span></span><br></pre></td></tr></table></figure>

<h3 id="台阶问题"><a href="#台阶问题" class="headerlink" title="台阶问题"></a>台阶问题</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">steps</span><span class="params">(n <span class="keyword">uint64</span>)</span> <span class="title">uint64</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">1</span> || n == <span class="number">2</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> n</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> steps(n<span class="number">-1</span>) + steps(n<span class="number">-2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res := steps(<span class="number">7</span>)</span><br><span class="line">	fmt.Println(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test1</span><span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n &gt; <span class="number">2</span> &#123;</span><br><span class="line">		n--</span><br><span class="line">		test(n)</span><br><span class="line">	&#125; </span><br><span class="line">	fmt.Println(<span class="string">"n="</span>, n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tes2</span><span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n &gt; <span class="number">2</span> &#123;</span><br><span class="line">		n--</span><br><span class="line">		test(n)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"n="</span>, n)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	test1(<span class="number">4</span>)	<span class="comment">// n=2  n=2  n=3</span></span><br><span class="line">    test2(<span class="number">4</span>)	<span class="comment">// n=2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>test1函数示意图</strong></p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200324085323064.png" alt="image-20200324085323064"></p>
<h3 id="递归重要原则"><a href="#递归重要原则" class="headerlink" title="递归重要原则"></a>递归重要原则</h3><ol>
<li>执行一个函数时，就创建一个新的受保护的独立空间（新函数栈）</li>
<li>函数的局部变量是独立的，不会相互影响</li>
<li>递归必须向退出递归的条件逼近，否则就是无线递归</li>
<li>当一个函数执行完毕，或者遇到return，就会返回，遵守谁调用，就将结果返回给谁，同时当函数执行完毕或者返回时，该函数本身也会被系统销毁</li>
</ol>
<h2 id="函数注意事项和细节（重要）"><a href="#函数注意事项和细节（重要）" class="headerlink" title="函数注意事项和细节（重要）"></a>函数注意事项和细节（重要）</h2><ul>
<li><p>函数的形参列表可以是多个，返回值列表也可以是多个，返回值一个可以不加括号，多个需要加括号</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数列表同种类型可以写成如下形式 </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfun</span><span class="params">(n1,n2 <span class="keyword">float32</span>)</span> <span class="title">float32</span></span> &#123;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>形参列表和返回值列表的数据类型可以是值类型和引用类型</p>
</li>
<li><p>函数命名遵循标识符命名规范，首字母不能是数字，首字母大写该函数可以被本包文件和其他包文件使用，类似public，首字母小写只能被本包文件使用，类似private</p>
</li>
<li><p>函数中的变量是局部的，函数外不生效，如果局部变量和全局变量重名，优先访问局部变量</p>
</li>
<li><p>基本数据类型和数组默认都是值传递的，即进行值拷贝。函数内修改，不影响原来的值。如果希望函数内的变量能修改函数外的变量，可以传入变量地址，函数内以指针的方式操作变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test01</span><span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	n = n + <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">"test01() n="</span>, n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test02</span><span class="params">(n *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	*n = *n + <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">"test02() n="</span>, *n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	num := <span class="number">20</span></span><br><span class="line">	test01(num)</span><br><span class="line">	fmt.Println(<span class="string">"oringin num="</span>, num)</span><br><span class="line">	test02(&amp;num)</span><br><span class="line">	fmt.Println(<span class="string">"oringin num="</span>, num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//test01() n= 30</span></span><br><span class="line"><span class="comment">//oringin num= 20</span></span><br><span class="line"><span class="comment">//test02() n= 30</span></span><br><span class="line"><span class="comment">//oringin num= 30</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Go函数不支持重载，会报函数重复定义，python也不支持，python支持多个任意参数，用装饰器添加功能</p>
</li>
<li><p>在Go中，函数也是一种数据类型，可以赋值给一个变量，该变量就是一个函数类型的变量，通过该变量可以对函数调用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSum</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := getSum</span><br><span class="line">	fmt.Printf(<span class="string">"a的类型%T，getSum的类型%T\n"</span>, a, getSum)</span><br><span class="line">	res := a(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res="</span>, res)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//a的类型func(int, int) int，getSum的类型func(int, int) int</span></span><br><span class="line"><span class="comment">//res= 30</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数既然是一种数据类型，函数也可以作为形参，并且调用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSum</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFun</span><span class="params">(funvar <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">num1</span> <span class="title">int</span>, <span class="title">num2</span> <span class="title">int</span>) <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> funvar(num1, num2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := getSum</span><br><span class="line">	fmt.Printf(<span class="string">"a的类型%T，getSum的类型%T\n"</span>, a, getSum)</span><br><span class="line">	res := a(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res="</span>, res)</span><br><span class="line">	<span class="comment">// 函数作为形参，并且调用</span></span><br><span class="line">	res2 := myFun(getSum, <span class="number">50</span>, <span class="number">60</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res2="</span>, res2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//a的类型func(int, int) int，getSum的类型func(int, int) int</span></span><br><span class="line"><span class="comment">//res= 30</span></span><br><span class="line"><span class="comment">//res2= 110</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>为了简化数据类型定义，Go支持自定义的数据类型，也支持类型别名</p>
<p>基本语法：type 自定义数据类型名 数据类型    // 自定义类型</p>
<p>​                    type 别名 = 数据类型    // 类型别名</p>
<p>案例：type myint int    // 这时候myint等同于int类型，<strong>可以在main()中定义</strong></p>
<p>案例：type myFunc func (int,int) int    // 这myFunc等价于一个函数类型func (int,int) int。注意：<strong>函数类型不能在main()中定义，会报未声明定义</strong></p>
<p>别名案例：type myint = int</p>
</li>
</ul>
<p>  <img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200324144609270.png" alt="image-20200324144609270"></p>
<p>  <img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200324145855857.png" alt="image-20200324145855857"></p>
<ul>
<li><p>Go支持对函数返回值命名，返回值列表里变量已经创建好，默认为0，返回顺序依据返回值列表顺序。<strong>注意：要使用=必须事先已经声明</strong></p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200324150748470.png" alt="image-20200324150748470"></p>
</li>
<li><p>使用<strong>_</strong>标识符，忽略返回值</p>
</li>
<li><p>Go支持可变参数，本质上函数的可变参数是通过切片来实现的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持0到多个参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(args ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    sum := xxx	<span class="comment">// 计算逻辑</span></span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 支持1到多个参数，可变参数一定要放在后面</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(n1 <span class="keyword">int</span>,args ...<span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    sum = xxx	<span class="comment">// 计算逻辑</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 注意：返回值类型列表如果定义命名，那么一定要加括号，即使是一个返回值</span></span><br></pre></td></tr></table></figure>

<p><strong>说明</strong></p>
<p>1、args是slice切片，通过args[index] 可以访问到各个值</p>
<p>2、如果形参列表里有可变参数，则可变参数需要放在形参列表最后</p>
<p><strong>计算一个或多个参数的和</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此处事先定义了返回值命名，直接return即可</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(n1 <span class="keyword">int</span>, args ...<span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	sum = n1</span><br><span class="line">	<span class="comment">// 遍历args</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">		sum += args[i]</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    res := sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习</strong></p>
<p>编写一个函数swap(n1 *int, n2 *int)，可以交换n1和n2的值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(n1 *<span class="keyword">int</span>, n2 *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	*n1, *n2 = *n2, *n1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	swap(&amp;a, &amp;b)</span><br><span class="line">	fmt.Printf(<span class="string">"n1=%v,n2=%v"</span>, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="init函数"><a href="#init函数" class="headerlink" title="init函数"></a>init函数</h2><h3 id="基本介绍-4"><a href="#基本介绍-4" class="headerlink" title="基本介绍"></a>基本介绍</h3><p>每一个源文件都可以包含一个init函数，该函数会在main函数执行前执行，通常用来完成初始化工作</p>
<h3 id="注意事项和细节"><a href="#注意事项和细节" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ul>
<li><p>如果一个文件同时包含全局变量定义，init函数和main函数，则执行流程：<strong>全局变量定义=》init函数=》main函数</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="comment">// 全局变量定义</span></span><br><span class="line"><span class="keyword">var</span> age = display()</span><br><span class="line"><span class="comment">// 为了看到全局变量是最先执行的，我们这里用函数显示</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">display</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"display()"</span>) <span class="comment">// 1</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"init()"</span>) <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"main()"</span>) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>init函数最主要的作用就是完成一些初始化的工作，案例：</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200324230035131.png" alt="image-20200324230035131"></p>
<p>执行结果：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//utils init()</span></span><br><span class="line"><span class="comment">//main display()</span></span><br><span class="line"><span class="comment">//main init()</span></span><br><span class="line"><span class="comment">//main()</span></span><br><span class="line"><span class="comment">//Age= 30</span></span><br><span class="line"><span class="comment">//Name= Tony</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>思考：如果main.go和utils.go都含有全局变量定义和init函数是，执行流程什么样呢？</p>
<p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200324231137047.png" alt="image-20200324231137047"></p>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>Go支持匿名函数，在某个函数内部或者某个函数只是希望使用一次，可以使用匿名函数，匿名函数也可以实现多次调用</p>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><ul>
<li>在定义匿名函数时就直接调用</li>
<li>将匿名函数赋给一个变量（函数变量），再通过该变量来调用匿名函数</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 方式一：在定义时直接调用，这种匿名函数只能调用一次</span></span><br><span class="line">	res1 := <span class="function"><span class="keyword">func</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> n1 + n2</span><br><span class="line">    &#125;(<span class="number">10</span>, <span class="number">20</span>)	<span class="comment">//加()传入参数直接调用</span></span><br><span class="line">	fmt.Println(<span class="string">"res1="</span>, res1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 方式二：将匿名函数func (n1 int,n2 int) int赋给f变量</span></span><br><span class="line">	<span class="comment">// 则f的数据类型就是函数类型，f是函数变量，可以通过f完成调用</span></span><br><span class="line">	f := <span class="function"><span class="keyword">func</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> n1 - n2</span><br><span class="line">	&#125;</span><br><span class="line">	res2 := f(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res2="</span>, res2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="全局匿名函数"><a href="#全局匿名函数" class="headerlink" title="全局匿名函数"></a>全局匿名函数</h3><p>如果将匿名函数赋给一个全局变量，那么这个匿名函数就成为一个全局匿名函数，可以在程序中有效</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    <span class="comment">// 大写</span></span><br><span class="line">	Fgloabal = <span class="function"><span class="keyword">func</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> n1 * n2</span><br><span class="line">	&#125;</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 全局匿名函数的使用</span></span><br><span class="line">	res3 := Fgloabal(<span class="number">5</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res3="</span>, res3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>闭包就是一个函数与其相关的引用环境组合的一个整体（实体）。简单来说，<code>闭包=函数+引用环境</code></p>
<p>闭包底层原理：</p>
<ul>
<li>函数可以作为返回值</li>
<li>函数内部查找变量的顺序，现在自己内部找，找不到往外层找（<code>闭包=函数+包含外部变量的引用</code>）</li>
</ul>
<h3 id="案例演示"><a href="#案例演示" class="headerlink" title="案例演示"></a>案例演示</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">adder</span><span class="params">()</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		x += y</span><br><span class="line">		<span class="keyword">return</span> x</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> f = adder()</span><br><span class="line">	fmt.Println(f(<span class="number">10</span>)) <span class="comment">//10</span></span><br><span class="line">	fmt.Println(f(<span class="number">20</span>)) <span class="comment">//30</span></span><br><span class="line">	fmt.Println(f(<span class="number">30</span>)) <span class="comment">//60</span></span><br><span class="line"></span><br><span class="line">	f1 := adder()</span><br><span class="line">	fmt.Println(f1(<span class="number">40</span>)) <span class="comment">//40</span></span><br><span class="line">	fmt.Println(f1(<span class="number">50</span>)) <span class="comment">//90</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>变量<code>f</code>是一个函数并且它引用了其外部作用域中的<code>x</code>变量，此时<code>f</code>就是一个闭包。 在<code>f</code>的生命周期内，变量<code>x</code>也一直有效。 </p>
<p>闭包进阶示例1：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">adder2</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		x += y</span><br><span class="line">		<span class="keyword">return</span> x</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> f = adder2(<span class="number">10</span>)</span><br><span class="line">	fmt.Println(f(<span class="number">10</span>)) <span class="comment">//20</span></span><br><span class="line">	fmt.Println(f(<span class="number">20</span>)) <span class="comment">//40</span></span><br><span class="line">	fmt.Println(f(<span class="number">30</span>)) <span class="comment">//70</span></span><br><span class="line"></span><br><span class="line">	f1 := adder2(<span class="number">20</span>)</span><br><span class="line">	fmt.Println(f1(<span class="number">40</span>)) <span class="comment">//60</span></span><br><span class="line">	fmt.Println(f1(<span class="number">50</span>)) <span class="comment">//110</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>闭包进阶示例2：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeSuffixFunc</span><span class="params">(suffix <span class="keyword">string</span>)</span> <span class="title">func</span><span class="params">(<span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">		<span class="keyword">if</span> !strings.HasSuffix(name, suffix) &#123;</span><br><span class="line">			<span class="keyword">return</span> name + suffix</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> name</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	jpgFunc := makeSuffixFunc(<span class="string">".jpg"</span>)</span><br><span class="line">	txtFunc := makeSuffixFunc(<span class="string">".txt"</span>)</span><br><span class="line">	fmt.Println(jpgFunc(<span class="string">"test"</span>)) <span class="comment">//test.jpg</span></span><br><span class="line">	fmt.Println(txtFunc(<span class="string">"test"</span>)) <span class="comment">//test.txt</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>闭包进阶示例3：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calc</span><span class="params">(base <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">func</span>(<span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span>)</span> &#123;</span><br><span class="line">	add := <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		base += i</span><br><span class="line">		<span class="keyword">return</span> base</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	sub := <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		base -= i</span><br><span class="line">		<span class="keyword">return</span> base</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> add, sub</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f1, f2 := calc(<span class="number">10</span>)</span><br><span class="line">    <span class="comment">// 公用一个base参数</span></span><br><span class="line">	fmt.Println(f1(<span class="number">1</span>), f2(<span class="number">2</span>)) <span class="comment">//11 9</span></span><br><span class="line">	fmt.Println(f1(<span class="number">3</span>), f2(<span class="number">4</span>)) <span class="comment">//12 8</span></span><br><span class="line">	fmt.Println(f1(<span class="number">5</span>), f2(<span class="number">6</span>)) <span class="comment">//13 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>闭包其实并不复杂，只要牢记<code>闭包=函数+引用外部变量</code></p>
<h2 id="defer语句"><a href="#defer语句" class="headerlink" title="defer语句"></a>defer语句</h2><p>Go语言中的<code>defer</code>语句会将其后面跟随的语句进行延迟处理。在<code>defer</code>归属的函数即将返回时，将延迟处理的语句按<code>defer</code>定义的逆序进行执行，也就是说，先被<code>defer</code>的语句最后被执行，最后被<code>defer</code>的语句，最先被执行（先进后出）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"start"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="number">2</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">"end"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// start</span></span><br><span class="line"><span class="comment">// end</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>defer多用于函数结束之前释放资源（文件句柄，数据库连接，socket连接）</p>
<h3 id="defer的执行时机"><a href="#defer的执行时机" class="headerlink" title="defer的执行时机"></a>defer的执行时机</h3><p><img src="C:%5CUsers%5C86135.LAPTOP-5D276QMN%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200328215854662.png" alt="image-20200328215854662"></p>
<h3 id="defer经典案例"><a href="#defer经典案例" class="headerlink" title="defer经典案例"></a>defer经典案例</h3><p>顺序：先给返回值赋值，再defer注册，最后返回返回值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	x := <span class="number">5</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		x++ <span class="comment">// 修改的是x不是返回值，因为返回值=5，再执行derfer x=6，再返回返回值5</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span> <span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		x++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> <span class="number">5</span> <span class="comment">//返回值x=5，x++，再执行derfer等于6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">()</span> <span class="params">(y <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x := <span class="number">5</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		x++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> x <span class="comment">// 返回值=y=x=5，返回值没变，x变了，和f1相同</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f4</span><span class="params">()</span> <span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">		x++ <span class="comment">// x=0当做参数传入进来=1，返回值等于5</span></span><br><span class="line">	&#125;(x)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f1())</span><br><span class="line">	fmt.Println(f2())</span><br><span class="line">	fmt.Println(f3())</span><br><span class="line">	fmt.Println(f4())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//5</span></span><br><span class="line"><span class="comment">//6</span></span><br><span class="line"><span class="comment">//5</span></span><br><span class="line"><span class="comment">//5</span></span><br></pre></td></tr></table></figure>

<h3 id="defer面试题"><a href="#defer面试题" class="headerlink" title="defer面试题"></a>defer面试题</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calc</span><span class="params">(index <span class="keyword">string</span>, a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	ret := a + b</span><br><span class="line">	fmt.Println(index, a, b, ret)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x := <span class="number">1</span></span><br><span class="line">	y := <span class="number">2</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">"AA"</span>, x, calc(<span class="string">"A"</span>, x, y))</span><br><span class="line">	x = <span class="number">10</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">"BB"</span>, x, calc(<span class="string">"B"</span>, x, y))</span><br><span class="line">	y = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//A 1 2 3</span></span><br><span class="line"><span class="comment">//B 10 2 12</span></span><br><span class="line"><span class="comment">//BB 10 12 22</span></span><br><span class="line"><span class="comment">//AA 1 3 4</span></span><br></pre></td></tr></table></figure>

<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><table>
<thead>
<tr>
<th align="center">内置函数</th>
<th align="left">介绍</th>
</tr>
</thead>
<tbody><tr>
<td align="center">close</td>
<td align="left">主要用来关闭channel</td>
</tr>
<tr>
<td align="center">len</td>
<td align="left">用来求长度，比如string、array、slice、map、channel</td>
</tr>
<tr>
<td align="center">new</td>
<td align="left">用来分配内存，主要用来分配值类型，比如int、struct。返回的是指针</td>
</tr>
<tr>
<td align="center">make</td>
<td align="left">用来分配内存，主要用来分配引用类型，比如chan、map、slice</td>
</tr>
<tr>
<td align="center">append</td>
<td align="left">用来追加元素到数组、slice中</td>
</tr>
<tr>
<td align="center">panic和recover</td>
<td align="left">用来做错误处理</td>
</tr>
</tbody></table>
<h3 id="panic-recover"><a href="#panic-recover" class="headerlink" title="panic/recover"></a>panic/recover</h3><p>Go语言中目前（Go1.12）是没有异常机制，但是使用<code>panic/recover</code>模式来处理错误。 <code>panic</code>可以在任何地方引发，但<code>recover</code>只有在<code>defer</code>调用的函数中有效。 首先来看一个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"f1"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">"出现了严重错误！！！"</span>) <span class="comment">// 程序崩溃退出</span></span><br><span class="line">	fmt.Println(<span class="string">"f2"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun3</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"f3"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fun1()</span><br><span class="line">	fun2()</span><br><span class="line">	fun3()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//f1</span></span><br><span class="line"><span class="comment">//panic: 出现了严重错误！！！</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//goroutine 1 [running]:</span></span><br><span class="line"><span class="comment">//main.fun2(...)</span></span><br><span class="line"><span class="comment">//D:/GoProjectsCode/src/awesomeProject/project01/main/main.go:10</span></span><br><span class="line"><span class="comment">//main.main()</span></span><br><span class="line"><span class="comment">//D:/GoProjectsCode/src/awesomeProject/project01/main/main.go:20 +0x9d</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"f1"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 释放数据库连接</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		err := <span class="built_in">recover</span>()</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"recover in fun2"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">"释放数据库连接"</span>) <span class="comment">// 会在panic之前执行</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">"出现了严重错误！！！"</span>) <span class="comment">// 程序崩溃退出</span></span><br><span class="line">	fmt.Println(<span class="string">"f2"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun3</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"f3"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fun1()</span><br><span class="line">	fun2()</span><br><span class="line">	fun3()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//f1</span></span><br><span class="line"><span class="comment">//出现了严重错误！！！</span></span><br><span class="line"><span class="comment">//recover in fun2</span></span><br><span class="line"><span class="comment">//释放数据库连接</span></span><br><span class="line"><span class="comment">//f3</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li><code>recover()</code>必须搭配<code>defer</code>使用</li>
<li><code>defer</code>一定要在可能引发<code>panic</code>的语句之前定义</li>
</ol>
<h1 id="Chapter7：Golang结构体"><a href="#Chapter7：Golang结构体" class="headerlink" title="Chapter7：Golang结构体"></a>Chapter7：Golang结构体</h1><p>Go语言中没有“类”的概念，也不支持“类”的继承等面向对象的概念。Go语言中通过结构体的内嵌再配合接口比面向对象具有更高的扩展性和灵活性。</p>
<h2 id="类型别名和自定义类型"><a href="#类型别名和自定义类型" class="headerlink" title="类型别名和自定义类型"></a>类型别名和自定义类型</h2><h3 id="自定义类型"><a href="#自定义类型" class="headerlink" title="自定义类型"></a>自定义类型</h3><p>在Go语言中有一些基本的数据类型，如<code>string</code>、<code>整型</code>、<code>浮点型</code>、<code>布尔</code>等数据类型， Go语言中可以使用<code>type</code>关键字来定义自定义类型</p>
<p>自定义类型是定义了一个全新的类型。我们可以基于内置的基本类型定义，也可以通过struct定义。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将MyInt定义为int类型</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br></pre></td></tr></table></figure>

<p>通过<code>type</code>关键字的定义，<code>MyInt</code>就是一种新的类型，它具有<code>int</code>的特性</p>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><p>类型别名是<code>Go1.9</code>版本添加的新功能</p>
<p>类型别名规定：TypeAlias只是Type的别名，本质上TypeAlias与Type是同一个类型。就像一个孩子小时候有小名、乳名，上学后用学名，英语老师又会给他起英文名，但这些名字都指的是他本人</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TypeAlias = Type</span><br></pre></td></tr></table></figure>

<p>我们之前见过的<code>rune</code>和<code>byte</code>就是类型别名，他们的定义如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">byte</span> = <span class="keyword">uint8</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">rune</span> = <span class="keyword">int32</span></span><br></pre></td></tr></table></figure>

<h3 id="类型定义和类型别名的区别"><a href="#类型定义和类型别名的区别" class="headerlink" title="类型定义和类型别名的区别"></a>类型定义和类型别名的区别</h3><p>类型别名与类型定义表面上看只有一个等号的差异，我们通过下面的这段代码来理解它们之间的区别。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类型定义</span></span><br><span class="line"><span class="keyword">type</span> NewInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类型别名</span></span><br><span class="line"><span class="keyword">type</span> MyInt = <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a NewInt</span><br><span class="line">	<span class="keyword">var</span> b MyInt</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">"type of a:%T\n"</span>, a) <span class="comment">//type of a:main.NewInt</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of b:%T\n"</span>, b) <span class="comment">//type of b:int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果显示a的类型是<code>main.NewInt</code>，表示main包下定义的<code>NewInt</code>类型。b的类型是<code>int</code>。<code>MyInt</code>类型只会在代码中存在，编译完成时并不会有<code>MyInt</code>类型。</p>
<h2 id="struct结构体"><a href="#struct结构体" class="headerlink" title="struct结构体"></a>struct结构体</h2><p>Go语言中的基础数据类型可以表示一些事物的基本属性，但是当我们想表达一个事物的全部或部分属性时，这时候再用单一的基本数据类型明显就无法满足需求了，Go语言提供了一种自定义数据类型，可以封装多个基本数据类型，这种数据类型叫结构体，英文名称<code>struct</code>。 也就是我们可以通过<code>struct</code>来定义自己的类型了，通过<code>struct</code>来实现面向对象。</p>
<h3 id="结构体的定义"><a href="#结构体的定义" class="headerlink" title="结构体的定义"></a>结构体的定义</h3><p>结构体是值类型</p>
<p>使用<code>type</code>和<code>struct</code>关键字来定义结构体，具体代码格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 类型名 <span class="keyword">struct</span> &#123;</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    …</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>类型名：标识自定义结构体的名称，在同一个包内不能重复</li>
<li>字段名：表示结构体字段名。结构体中的字段名必须唯一</li>
<li>字段类型：表示结构体字段的具体类型</li>
</ul>
<p>举个例子，我们定义一个<code>Person</code>（人）结构体，代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样类型的字段也可以写在一行，</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person1 <span class="keyword">struct</span> &#123;</span><br><span class="line">	name, city <span class="keyword">string</span></span><br><span class="line">	age        <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样我们就拥有了一个<code>person</code>的自定义类型，它有<code>name</code>、<code>city</code>、<code>age</code>三个字段，分别表示姓名、城市和年龄。这样我们使用这个<code>person</code>结构体就能够很方便的在程序中表示和存储人信息了。</p>
<p>语言内置的基础数据类型是用来描述一个值的，而结构体是用来描述一组值的。比如一个人有名字、年龄和居住城市等，本质上是一种聚合型的数据类型</p>
<h3 id="结构体实例化"><a href="#结构体实例化" class="headerlink" title="结构体实例化"></a>结构体实例化</h3><p>只有当结构体实例化时，才会真正地分配内存。也就是必须实例化后才能使用结构体的字段。</p>
<p>结构体本身也是一种类型，我们可以像声明内置类型一样使用<code>var</code>关键字声明结构体类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 结构体实例 结构体类型</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name   <span class="keyword">string</span></span><br><span class="line">	age    <span class="keyword">int</span></span><br><span class="line">	gender <span class="keyword">string</span></span><br><span class="line">	hobby  []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p person</span><br><span class="line">	p.name = <span class="string">"kevin"</span></span><br><span class="line">	p.age = <span class="number">18</span></span><br><span class="line">	p.gender = <span class="string">"男"</span></span><br><span class="line">	p.hobby = []<span class="keyword">string</span>&#123;<span class="string">"篮球"</span>, <span class="string">"足球"</span>, <span class="string">"双色球"</span>&#125;</span><br><span class="line">	fmt.Println(p)</span><br><span class="line">	fmt.Printf(<span class="string">"p.type:%T\n"</span>, p)</span><br><span class="line">	fmt.Println(p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#123;kevin 18 男 [篮球 足球 双色球]&#125;</span></span><br><span class="line"><span class="comment">//p.type:main.person</span></span><br><span class="line"><span class="comment">//kevin</span></span><br></pre></td></tr></table></figure>

<p>通过<code>.</code>来访问结构体的字段（成员变量）,例如<code>p1.name</code>和<code>p1.age</code>等</p>
<h4 id="匿名结构体"><a href="#匿名结构体" class="headerlink" title="匿名结构体"></a>匿名结构体</h4><p>在定义一些临时数据结构等场景下还可以使用匿名结构体。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">     </span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">     </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> user <span class="keyword">struct</span>&#123;Name <span class="keyword">string</span>; Age <span class="keyword">int</span>&#125;</span><br><span class="line">    user.Name = <span class="string">"小王子"</span></span><br><span class="line">    user.Age = <span class="number">18</span></span><br><span class="line">    fmt.Printf(<span class="string">"%#v\n"</span>, user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建指针类型结构体"><a href="#创建指针类型结构体" class="headerlink" title="创建指针类型结构体"></a>创建指针类型结构体</h4><p>结构体是值类型，需要用指针类型去修改，Go语言传参数永远传的是拷贝副本</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name   <span class="keyword">string</span></span><br><span class="line">	age    <span class="keyword">int</span></span><br><span class="line">	gender <span class="keyword">string</span></span><br><span class="line">	hobby  []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">alterPerson</span><span class="params">(per person)</span></span> &#123;</span><br><span class="line">	per.gender = <span class="string">"女"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">alterPersonP</span><span class="params">(per *person)</span></span> &#123;</span><br><span class="line">	(*per).gender = <span class="string">"女"</span></span><br><span class="line">    per.gender = <span class="string">"女"</span>	<span class="comment">// 语法糖，自动根据指针找对应的变量</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p person</span><br><span class="line">	p.name = <span class="string">"kevin"</span></span><br><span class="line">	p.age = <span class="number">18</span></span><br><span class="line">	p.gender = <span class="string">"男"</span></span><br><span class="line">	p.hobby = []<span class="keyword">string</span>&#123;<span class="string">"篮球"</span>, <span class="string">"足球"</span>, <span class="string">"双色球"</span>&#125;</span><br><span class="line">	fmt.Println(p)</span><br><span class="line">	<span class="comment">// 调用alterPerson</span></span><br><span class="line">	alterPerson(p)</span><br><span class="line">	fmt.Println(p.gender)</span><br><span class="line">	<span class="comment">// 调用指针类型结构体alterPersonP</span></span><br><span class="line">	alterPersonP(&amp;p)</span><br><span class="line">	fmt.Println(p.gender)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#123;kevin 18 男 [篮球 足球 双色球]&#125;</span></span><br><span class="line"><span class="comment">//男</span></span><br><span class="line"><span class="comment">//女</span></span><br></pre></td></tr></table></figure>

<p>通过使用<code>new</code>关键字对结构体进行实例化，得到的是结构体的地址。 格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">new</span>(person)</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, p2)     <span class="comment">//*main.person</span></span><br><span class="line">fmt.Printf(<span class="string">"p2=%#v\n"</span>, p2) <span class="comment">//p2=&amp;main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line"><span class="comment">// Go语言中支持对结构体指针直接使用.来访问结构体的成员</span></span><br><span class="line">p2.name = <span class="string">"小王"</span></span><br><span class="line">p2.age = <span class="number">28</span></span><br><span class="line">p2.city = <span class="string">"上海"</span></span><br><span class="line">fmt.Printf(<span class="string">"p2=%#v\n"</span>, p2) <span class="comment">//p2=&amp;main.person&#123;name:"小王", city:"上海", age:28&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="取结构体的地址实例化"><a href="#取结构体的地址实例化" class="headerlink" title="取结构体的地址实例化"></a>取结构体的地址实例化</h4><p>使用<code>&amp;</code>对结构体进行取地址操作相当于对该结构体类型进行了一次<code>new</code>实例化操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p3 := &amp;person&#123;&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, p3)     <span class="comment">//*main.person</span></span><br><span class="line">fmt.Printf(<span class="string">"p3=%#v\n"</span>, p3) <span class="comment">//p3=&amp;main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line">p3.name = <span class="string">"七米"</span></span><br><span class="line">p3.age = <span class="number">30</span></span><br><span class="line">p3.city = <span class="string">"成都"</span></span><br><span class="line">fmt.Printf(<span class="string">"p3=%#v\n"</span>, p3) <span class="comment">//p3=&amp;main.person&#123;name:"七米", city:"成都", age:30&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>p3.name = &quot;七米&quot;</code>其实在底层是<code>(*p3).name = &quot;七米&quot;</code>，这是Go语言帮我们实现的语法糖。</p>
<h3 id="结构体初始化"><a href="#结构体初始化" class="headerlink" title="结构体初始化"></a>结构体初始化</h3><p>没有初始化的结构体，其成员变量都是对应其类型的零值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p4 person</span><br><span class="line">	fmt.Printf(<span class="string">"p4=%#v\n"</span>, p4) <span class="comment">//p4=main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用键值对初始化</span></span><br><span class="line">p5 := person&#123;</span><br><span class="line">	name: <span class="string">"小王"</span>,</span><br><span class="line">	city: <span class="string">"北京"</span>,</span><br><span class="line">	age:  <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p5=%#v\n"</span>, p5) <span class="comment">//p5=main.person&#123;name:"小王", city:"北京", age:18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以对结构体指针进行键值对初始化</span></span><br><span class="line">p6 := &amp;person&#123;</span><br><span class="line">	name: <span class="string">"小王"</span>,</span><br><span class="line">	city: <span class="string">"北京"</span>,</span><br><span class="line">	age:  <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p6=%#v\n"</span>, p6) <span class="comment">//p6=&amp;main.person&#123;name:"小王", city:"北京", age:18&#125;</span></span><br><span class="line"><span class="comment">// 当某些字段没有初始值的时候，该字段可以不写</span></span><br><span class="line">p7 := &amp;person&#123;</span><br><span class="line">	city: <span class="string">"北京"</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p7=%#v\n"</span>, p7) <span class="comment">//p7=&amp;main.person&#123;name:"", city:"北京", age:0&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用值的列表初始化</span></span><br><span class="line"><span class="comment">// 初始化结构体的时候可以简写，也就是初始化的时候不写键，直接写值</span></span><br><span class="line">p8 := &amp;person&#123;</span><br><span class="line">	<span class="string">"永定门娜扎"</span>,</span><br><span class="line">	<span class="string">"北京"</span>,</span><br><span class="line">	<span class="number">28</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p8=%#v\n"</span>, p8) <span class="comment">//p8=&amp;main.person&#123;name:"永定门娜扎", city:"北京", age:28&#125;</span></span><br><span class="line"><span class="comment">// 使用这种格式初始化时，需要注意：</span></span><br><span class="line"><span class="comment">// 必须初始化结构体的所有字段。</span></span><br><span class="line"><span class="comment">// 初始值的填充顺序必须与字段在结构体中的声明顺序一致。</span></span><br><span class="line"><span class="comment">// 该方式不能和键值初始化方式混用</span></span><br></pre></td></tr></table></figure>

<h3 id="结构体内存布局"><a href="#结构体内存布局" class="headerlink" title="结构体内存布局"></a>结构体内存布局</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> test <span class="keyword">struct</span> &#123;</span><br><span class="line">	a <span class="keyword">int8</span></span><br><span class="line">	b <span class="keyword">int8</span></span><br><span class="line">	c <span class="keyword">int8</span></span><br><span class="line">	d <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line">n := test&#123;</span><br><span class="line">	<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"n.a %p\n"</span>, &amp;n.a)</span><br><span class="line">fmt.Printf(<span class="string">"n.b %p\n"</span>, &amp;n.b)</span><br><span class="line">fmt.Printf(<span class="string">"n.c %p\n"</span>, &amp;n.c)</span><br><span class="line">fmt.Printf(<span class="string">"n.d %p\n"</span>, &amp;n.d)</span><br><span class="line"><span class="comment">// n.a 0xc0000a0060</span></span><br><span class="line"><span class="comment">// n.b 0xc0000a0061</span></span><br><span class="line"><span class="comment">// n.c 0xc0000a0062</span></span><br><span class="line"><span class="comment">// n.d 0xc0000a0063</span></span><br></pre></td></tr></table></figure>

<h4 id="空结构体"><a href="#空结构体" class="headerlink" title="空结构体"></a>空结构体</h4><p>空结构体是不占用空间的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">fmt.Println(unsafe.Sizeof(v))  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>Go语言的结构体没有构造函数，我们可以自己实现。 例如，下方的代码就实现了一个<code>person</code>的构造函数。 因为<code>struct</code>是值类型，如果结构体比较复杂的话，值拷贝性能开销会比较大，所以该构造函数返回的是结构体指针类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name, city <span class="keyword">string</span>, age <span class="keyword">int8</span>)</span> *<span class="title">person</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		city: city,</span><br><span class="line">		age:  age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用构造函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p9 := newPerson(<span class="string">"张三"</span>, <span class="string">"沙河"</span>, <span class="number">90</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%#v\n"</span>, p9) <span class="comment">//&amp;main.person&#123;name:"张三", city:"沙河", age:90&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="方法和接收者"><a href="#方法和接收者" class="headerlink" title="方法和接收者"></a>方法和接收者</h3><p>Go语言中的<code>方法（Method）</code>是一种作用于特定类型变量的函数。这种特定类型变量叫做<code>接收者（Receiver）</code>。接收者的概念就类似于其他语言中的<code>this</code>或者 <code>self</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(接收者变量 接收者类型)</span> 方法名<span class="params">(参数列表)</span> <span class="params">(返回参数)</span></span> &#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接收者变量：接收者中的参数变量名在命名时，官方建议使用接收者类型名称首字母的小写，而不是<code>self</code>、<code>this</code>之类的命名。例如，<code>Person</code>类型的接收者变量应该命名为 <code>p</code>，<code>Connector</code>类型的接收者变量应该命名为<code>c</code>等。</li>
<li>接收者类型：接收者类型和参数类似，可以是指针类型和非指针类型。</li>
<li>方法名、参数列表、返回参数：具体格式与函数定义相同。</li>
</ul>
<p>举个栗子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Person 结构体</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//NewPerson 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewPerson</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int8</span>)</span> *<span class="title">Person</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;Person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age:  age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Dream Person做梦的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">Dream</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%s的梦想是学好Go语言！\n"</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := NewPerson(<span class="string">"小王子"</span>, <span class="number">25</span>)</span><br><span class="line">	p1.Dream()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法与函数的区别是，函数不属于任何类型，方法属于特定的类型。</p>
<h4 id="指针类型接收者"><a href="#指针类型接收者" class="headerlink" title="指针类型接收者"></a>指针类型接收者</h4><p>指针类型的接收者由一个结构体的指针组成，由于指针的特性，调用方法时修改接收者指针的任意成员变量，在方法结束后，修改都是有效的。这种方式就十分接近于其他语言中面向对象中的<code>this</code>或者<code>self</code>。 例如我们为<code>Person</code>添加一个<code>SetAge</code>方法，来修改实例变量的年龄。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SetAge 设置p的年龄</span></span><br><span class="line"><span class="comment">// 使用指针接收者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">SetAge</span><span class="params">(newAge <span class="keyword">int8</span>)</span></span> &#123;</span><br><span class="line">	p.age = newAge</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用该方法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := NewPerson(<span class="string">"小王子"</span>, <span class="number">25</span>)</span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">	p1.SetAge(<span class="number">30</span>)</span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="值类型的接收者"><a href="#值类型的接收者" class="headerlink" title="值类型的接收者"></a>值类型的接收者</h4><p>当方法作用于值类型接收者时，Go语言会在代码运行时将接收者的值复制一份。在值类型接收者的方法中可以获取接收者的成员值，但修改操作只是针对副本，无法修改接收者变量本身。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SetAge2 设置p的年龄</span></span><br><span class="line"><span class="comment">// 使用值接收者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">SetAge2</span><span class="params">(newAge <span class="keyword">int8</span>)</span></span> &#123;</span><br><span class="line">	p.age = newAge</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := NewPerson(<span class="string">"小王子"</span>, <span class="number">25</span>)</span><br><span class="line">	p1.Dream()</span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">	p1.SetAge2(<span class="number">30</span>) <span class="comment">// (*p1).SetAge2(30)</span></span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="什么时候应该使用指针类型接收者"><a href="#什么时候应该使用指针类型接收者" class="headerlink" title="什么时候应该使用指针类型接收者"></a>什么时候应该使用指针类型接收者</h4><ol>
<li>需要修改接收者中的值</li>
<li>接收者是拷贝代价比较大的大对象</li>
<li>保证一致性，如果有某个方法使用了指针接收者，那么其他的方法也应该使用指针接收者。</li>
</ol>
<h3 id="任意类型添加方法"><a href="#任意类型添加方法" class="headerlink" title="任意类型添加方法"></a>任意类型添加方法</h3><p>在Go语言中，接收者的类型可以是任何类型，不仅仅是结构体，任何类型都可以拥有方法。 举个例子，我们基于内置的<code>int</code>类型使用type关键字可以定义新的自定义类型，然后为我们的自定义类型添加方法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyInt 将int定义为自定义MyInt类型</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//SayHello 为MyInt添加一个SayHello的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyInt)</span> <span class="title">SayHello</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Hello, 我是一个int。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> m1 MyInt</span><br><span class="line">	m1.SayHello() <span class="comment">//Hello, 我是一个int</span></span><br><span class="line">	m1 = <span class="number">100</span></span><br><span class="line">	fmt.Printf(<span class="string">"%#v  %T\n"</span>, m1, m1) <span class="comment">//100  main.MyInt</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong> 非本地类型不能定义方法，也就是说我们不能给别的包的类型定义方法。</p>
<h3 id="结构体的匿名字段"><a href="#结构体的匿名字段" class="headerlink" title="结构体的匿名字段"></a>结构体的匿名字段</h3><p>结构体允许其成员字段在声明时没有字段名而只有类型，这种没有名字的字段就称为匿名字段。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Person 结构体Person类型</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="keyword">string</span></span><br><span class="line">	<span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := Person&#123;</span><br><span class="line">		<span class="string">"小王子"</span>,</span><br><span class="line">		<span class="number">18</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"%#v\n"</span>, p1)        <span class="comment">//main.Person&#123;string:"北京", int:18&#125;</span></span><br><span class="line">	fmt.Println(p1.<span class="keyword">string</span>, p1.<span class="keyword">int</span>) <span class="comment">//北京 18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>匿名字段默认采用类型名作为字段名，结构体要求字段名称必须唯一，因此一个结构体中同种类型的匿名字段只能有一个。</p>
<h4 id="嵌套结构体"><a href="#嵌套结构体" class="headerlink" title="嵌套结构体"></a>嵌套结构体</h4><p>一个结构体中可以嵌套包含另一个结构体或结构体指针。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Address 地址结构体</span></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">	Province <span class="keyword">string</span></span><br><span class="line">	City     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//User 用户结构体</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Gender  <span class="keyword">string</span></span><br><span class="line">	Address Address</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	user1 := User&#123;</span><br><span class="line">		Name:   <span class="string">"小王子"</span>,</span><br><span class="line">		Gender: <span class="string">"男"</span>,</span><br><span class="line">		Address: Address&#123;</span><br><span class="line">			Province: <span class="string">"山东"</span>,</span><br><span class="line">			City:     <span class="string">"威海"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"user1=%#v\n"</span>, user1)<span class="comment">//user1=main.User&#123;Name:"小王子", Gender:"男", Address:main.Address&#123;Province:"山东", City:"威海"&#125;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="嵌套匿名结构体"><a href="#嵌套匿名结构体" class="headerlink" title="嵌套匿名结构体"></a>嵌套匿名结构体</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Address 地址结构体</span></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">	Province <span class="keyword">string</span></span><br><span class="line">	City     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//User 用户结构体</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Gender  <span class="keyword">string</span></span><br><span class="line">	Address <span class="comment">//匿名结构体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user2 User</span><br><span class="line">	user2.Name = <span class="string">"小王子"</span></span><br><span class="line">	user2.Gender = <span class="string">"男"</span></span><br><span class="line">	user2.Address.Province = <span class="string">"山东"</span>    <span class="comment">//通过匿名结构体.字段名访问</span></span><br><span class="line">	user2.City = <span class="string">"威海"</span>                <span class="comment">//直接访问匿名结构体的字段名</span></span><br><span class="line">	fmt.Printf(<span class="string">"user2=%#v\n"</span>, user2) <span class="comment">//user2=main.User&#123;Name:"小王子", Gender:"男", Address:main.Address&#123;Province:"山东", City:"威海"&#125;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当访问结构体成员时会先在结构体中查找该字段，找不到再去匿名结构体中查找。</p>
<h4 id="嵌套结构体的字段名冲突"><a href="#嵌套结构体的字段名冲突" class="headerlink" title="嵌套结构体的字段名冲突"></a>嵌套结构体的字段名冲突</h4><p>嵌套结构体内部可能存在相同的字段名。这个时候为了避免歧义需要指定具体的内嵌结构体的字段。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Address 地址结构体</span></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">	Province   <span class="keyword">string</span></span><br><span class="line">	City       <span class="keyword">string</span></span><br><span class="line">	CreateTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Email 邮箱结构体</span></span><br><span class="line"><span class="keyword">type</span> Email <span class="keyword">struct</span> &#123;</span><br><span class="line">	Account    <span class="keyword">string</span></span><br><span class="line">	CreateTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//User 用户结构体</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name   <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">	Address</span><br><span class="line">	Email</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user3 User</span><br><span class="line">	user3.Name = <span class="string">"沙河娜扎"</span></span><br><span class="line">	user3.Gender = <span class="string">"男"</span></span><br><span class="line">	<span class="comment">// user3.CreateTime = "2019" //ambiguous selector user3.CreateTime</span></span><br><span class="line">	user3.Address.CreateTime = <span class="string">"2000"</span> <span class="comment">//指定Address结构体中的CreateTime</span></span><br><span class="line">	user3.Email.CreateTime = <span class="string">"2000"</span>   <span class="comment">//指定Email结构体中的CreateTime</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="结构体的“继承”"><a href="#结构体的“继承”" class="headerlink" title="结构体的“继承”"></a>结构体的“继承”</h3><h1 id="Chapter8：Golang常用标准库"><a href="#Chapter8：Golang常用标准库" class="headerlink" title="Chapter8：Golang常用标准库"></a>Chapter8：Golang常用标准库</h1><h2 id="fmt"><a href="#fmt" class="headerlink" title="fmt"></a>fmt</h2><p>fmt包实现了类似C语言printf和scanf的格式化I/O。主要分为向外输出内容和获取输入内容两大部分。</p>
<h3 id="向外输出"><a href="#向外输出" class="headerlink" title="向外输出"></a>向外输出</h3><p>标准库<code>fmt</code>提供了以下几种输出相关函数。</p>
<h4 id="Print"><a href="#Print" class="headerlink" title="Print"></a>Print</h4><p><code>Print</code>系列函数会将内容输出到系统的标准输出，区别在于<code>Print</code>函数直接输出内容，<code>Printf</code>函数支持格式化输出字符串，<code>Println</code>函数会在输出内容的结尾添加一个换行符。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Print</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Printf</span><span class="params">(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Println</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<p>举个简单的例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Print(<span class="string">"在终端打印该信息。"</span>)</span><br><span class="line">	name := <span class="string">"沙河小王子"</span></span><br><span class="line">	fmt.Printf(<span class="string">"我是：%s\n"</span>, name)</span><br><span class="line">	fmt.Println(<span class="string">"在终端打印单独一行显示"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行上面的代码输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在终端打印该信息。我是：沙河小王子</span><br><span class="line">在终端打印单独一行显示</span><br></pre></td></tr></table></figure>

<h4 id="Fprint"><a href="#Fprint" class="headerlink" title="Fprint"></a>Fprint</h4><p><code>Fprint</code>系列函数会将内容输出到一个<code>io.Writer</code>接口类型的变量<code>w</code>中，我们通常用这个函数往文件中写入内容。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fprint</span><span class="params">(w io.Writer, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fprintf</span><span class="params">(w io.Writer, format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fprintln</span><span class="params">(w io.Writer, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向标准输出写入内容</span></span><br><span class="line">fmt.Fprintln(os.Stdout, <span class="string">"向标准输出写入内容"</span>)</span><br><span class="line">fileObj, err := os.OpenFile(<span class="string">"./xx.txt"</span>, os.O_CREATE|os.O_WRONLY|os.O_APPEND, <span class="number">0644</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"打开文件出错，err:"</span>, err)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">name := <span class="string">"沙河小王子"</span></span><br><span class="line"><span class="comment">// 向打开的文件句柄中写入内容</span></span><br><span class="line">fmt.Fprintf(fileObj, <span class="string">"往文件中写如信息：%s"</span>, name)</span><br></pre></td></tr></table></figure>

<p>注意，只要满足<code>io.Writer</code>接口的类型都支持写入。</p>
<h4 id="Sprint"><a href="#Sprint" class="headerlink" title="Sprint"></a>Sprint</h4><p><code>Sprint</code>系列函数会把传入的数据生成并返回一个字符串。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sprint</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sprintf</span><span class="params">(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sprintln</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">string</span></span></span><br></pre></td></tr></table></figure>

<p>简单的示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s1 := fmt.Sprint(<span class="string">"沙河小王子"</span>)</span><br><span class="line">name := <span class="string">"沙河小王子"</span></span><br><span class="line">age := <span class="number">18</span></span><br><span class="line">s2 := fmt.Sprintf(<span class="string">"name:%s,age:%d"</span>, name, age)</span><br><span class="line">s3 := fmt.Sprintln(<span class="string">"沙河小王子"</span>)</span><br><span class="line">fmt.Println(s1, s2, s3)</span><br></pre></td></tr></table></figure>

<h4 id="Errorf"><a href="#Errorf" class="headerlink" title="Errorf"></a>Errorf</h4><p><code>Errorf</code>函数根据format参数生成格式化字符串并返回一个包含该字符串的错误。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Errorf</span><span class="params">(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<p>通常使用这种方式来自定义错误类型，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := fmt.Errorf(<span class="string">"这是一个错误"</span>)</span><br></pre></td></tr></table></figure>

<p>Go1.13版本为<code>fmt.Errorf</code>函数新加了一个<code>%w</code>占位符用来生成一个可以包裹Error的Wrapping Error。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e := errors.New(<span class="string">"原始错误e"</span>)</span><br><span class="line">w := fmt.Errorf(<span class="string">"Wrap了一个错误%w"</span>, e)</span><br></pre></td></tr></table></figure>

<h3 id="格式化占位符"><a href="#格式化占位符" class="headerlink" title="格式化占位符"></a>格式化占位符</h3><p><code>*printf</code>系列函数都支持format格式化参数，在这里我们按照占位符将被替换的变量类型划分，方便查询和记忆。</p>
<h4 id="通用占位符"><a href="#通用占位符" class="headerlink" title="通用占位符"></a>通用占位符</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%v</td>
<td align="center">值的默认格式表示</td>
</tr>
<tr>
<td align="center">%+v</td>
<td align="center">类似%v，但输出结构体时会添加字段名</td>
</tr>
<tr>
<td align="center">%#v</td>
<td align="center">值的Go语法表示</td>
</tr>
<tr>
<td align="center">%T</td>
<td align="center">打印值的类型</td>
</tr>
<tr>
<td align="center">%%</td>
<td align="center">百分号</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, <span class="number">100</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, <span class="literal">false</span>)</span><br><span class="line">o := <span class="keyword">struct</span>&#123; name <span class="keyword">string</span> &#125;&#123;<span class="string">"小王子"</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%v\n"</span>, o)</span><br><span class="line">fmt.Printf(<span class="string">"%#v\n"</span>, o)</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, o)</span><br><span class="line">fmt.Printf(<span class="string">"100%%\n"</span>)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">100</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">&#123;小王子&#125;</span><br><span class="line">struct &#123; name string &#125;&#123;name:<span class="string">"小王子"</span>&#125;</span><br><span class="line">struct &#123; name string &#125;</span><br><span class="line">100%</span><br></pre></td></tr></table></figure>

<h4 id="布尔型-1"><a href="#布尔型-1" class="headerlink" title="布尔型"></a>布尔型</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%t</td>
<td align="center">true或false</td>
</tr>
</tbody></table>
<h4 id="整型-1"><a href="#整型-1" class="headerlink" title="整型"></a>整型</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%b</td>
<td align="center">表示为二进制</td>
</tr>
<tr>
<td align="center">%c</td>
<td align="center">该值对应的unicode码值</td>
</tr>
<tr>
<td align="center">%d</td>
<td align="center">表示为十进制</td>
</tr>
<tr>
<td align="center">%o</td>
<td align="center">表示为八进制</td>
</tr>
<tr>
<td align="center">%x</td>
<td align="center">表示为十六进制，使用a-f</td>
</tr>
<tr>
<td align="center">%X</td>
<td align="center">表示为十六进制，使用A-F</td>
</tr>
<tr>
<td align="center">%U</td>
<td align="center">表示为Unicode格式：U+1234，等价于”U+%04X”</td>
</tr>
<tr>
<td align="center">%q</td>
<td align="center">该值对应的单引号括起来的go语法字符字面值，必要时会采用安全的转义表示</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">n := <span class="number">65</span></span><br><span class="line">fmt.Printf(<span class="string">"%b\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%c\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%d\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%o\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%x\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%X\n"</span>, n)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1000001</span><br><span class="line">A</span><br><span class="line">65</span><br><span class="line">101</span><br><span class="line">41</span><br><span class="line">41</span><br></pre></td></tr></table></figure>

<h4 id="浮点数与复数"><a href="#浮点数与复数" class="headerlink" title="浮点数与复数"></a>浮点数与复数</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%b</td>
<td align="center">无小数部分、二进制指数的科学计数法，如-123456p-78</td>
</tr>
<tr>
<td align="center">%e</td>
<td align="center">科学计数法，如-1234.456e+78</td>
</tr>
<tr>
<td align="center">%E</td>
<td align="center">科学计数法，如-1234.456E+78</td>
</tr>
<tr>
<td align="center">%f</td>
<td align="center">有小数部分但无指数部分，如123.456</td>
</tr>
<tr>
<td align="center">%F</td>
<td align="center">等价于%f</td>
</tr>
<tr>
<td align="center">%g</td>
<td align="center">根据实际情况采用%e或%f格式（以获得更简洁、准确的输出）</td>
</tr>
<tr>
<td align="center">%G</td>
<td align="center">根据实际情况采用%E或%F格式（以获得更简洁、准确的输出）</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f := <span class="number">12.34</span></span><br><span class="line">fmt.Printf(<span class="string">"%b\n"</span>, f)</span><br><span class="line">fmt.Printf(<span class="string">"%e\n"</span>, f)</span><br><span class="line">fmt.Printf(<span class="string">"%E\n"</span>, f)</span><br><span class="line">fmt.Printf(<span class="string">"%f\n"</span>, f)</span><br><span class="line">fmt.Printf(<span class="string">"%g\n"</span>, f)</span><br><span class="line">fmt.Printf(<span class="string">"%G\n"</span>, f)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">6946802425218990p-49</span><br><span class="line">1.234000e+01</span><br><span class="line">1.234000E+01</span><br><span class="line">12.340000</span><br><span class="line">12.34</span><br><span class="line">12.34</span><br></pre></td></tr></table></figure>

<h4 id="字符串和-byte"><a href="#字符串和-byte" class="headerlink" title="字符串和[]byte"></a>字符串和[]byte</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%s</td>
<td align="center">直接输出字符串或者[]byte</td>
</tr>
<tr>
<td align="center">%q</td>
<td align="center">该值对应的双引号括起来的go语法字符串字面值，必要时会采用安全的转义表示</td>
</tr>
<tr>
<td align="center">%x</td>
<td align="center">每个字节用两字符十六进制数表示（使用a-f</td>
</tr>
<tr>
<td align="center">%X</td>
<td align="center">每个字节用两字符十六进制数表示（使用A-F）</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">"小王子"</span></span><br><span class="line">fmt.Printf(<span class="string">"%s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%q\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%x\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%X\n"</span>, s)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">小王子</span><br><span class="line"><span class="string">"小王子"</span></span><br><span class="line">e5b08fe78e8be5ad90</span><br><span class="line">E5B08FE78E8BE5AD90</span><br></pre></td></tr></table></figure>

<h4 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%p</td>
<td align="center">表示为十六进制，并加上前导的0x</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="number">10</span></span><br><span class="line">fmt.Printf(<span class="string">"%p\n"</span>, &amp;a)</span><br><span class="line">fmt.Printf(<span class="string">"%#p\n"</span>, &amp;a)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0xc000094000</span><br><span class="line">c000094000</span><br></pre></td></tr></table></figure>

<h4 id="宽度标识符"><a href="#宽度标识符" class="headerlink" title="宽度标识符"></a>宽度标识符</h4><p>宽度通过一个紧跟在百分号后面的十进制数指定，如果未指定宽度，则表示值时除必需之外不作填充。精度通过（可选的）宽度后跟点号后跟的十进制数指定。如果未指定精度，会使用默认精度；如果点号后没有跟数字，表示精度为0。举例如下：</p>
<table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%f</td>
<td align="center">默认宽度，默认精度</td>
</tr>
<tr>
<td align="center">%9f</td>
<td align="center">宽度9，默认精度</td>
</tr>
<tr>
<td align="center">%.2f</td>
<td align="center">默认宽度，精度2</td>
</tr>
<tr>
<td align="center">%9.2f</td>
<td align="center">宽度9，精度2</td>
</tr>
<tr>
<td align="center">%9.f</td>
<td align="center">宽度9，精度0</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">n := <span class="number">12.34</span></span><br><span class="line">fmt.Printf(<span class="string">"%f\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%9f\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%.2f\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%9.2f\n"</span>, n)</span><br><span class="line">fmt.Printf(<span class="string">"%9.f\n"</span>, n)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">12.340000</span><br><span class="line">12.340000</span><br><span class="line">12.34</span><br><span class="line">    12.34</span><br><span class="line">       12</span><br></pre></td></tr></table></figure>

<h4 id="其他falg"><a href="#其他falg" class="headerlink" title="其他falg"></a>其他falg</h4><table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">’+’</td>
<td align="center">总是输出数值的正负号；对%q（%+q）会生成全部是ASCII字符的输出（通过转义）；</td>
</tr>
<tr>
<td align="center">’ ‘</td>
<td align="center">对数值，正数前加空格而负数前加负号；对字符串采用%x或%X时（% x或% X）会给各打印的字节之间加空格</td>
</tr>
<tr>
<td align="center">’-’</td>
<td align="center">在输出右边填充空白而不是默认的左边（即从默认的右对齐切换为左对齐）；</td>
</tr>
<tr>
<td align="center">’#’</td>
<td align="center">八进制数前加0（%#o），十六进制数前加0x（%#x）或0X（%#X），指针去掉前面的0x（%#p）对%q（%#q），对%U（%#U）会输出空格和单引号括起来的go字面值；</td>
</tr>
<tr>
<td align="center">‘0’</td>
<td align="center">使用0而不是空格填充，对于数值类型会把填充的0放在正负号后面；</td>
</tr>
</tbody></table>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">"小王子"</span></span><br><span class="line">fmt.Printf(<span class="string">"%s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%5s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%-5s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%5.7s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%-5.7s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%5.2s\n"</span>, s)</span><br><span class="line">fmt.Printf(<span class="string">"%05s\n"</span>, s)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">小王子</span><br><span class="line">  小王子</span><br><span class="line">小王子  </span><br><span class="line">  小王子</span><br><span class="line">小王子  </span><br><span class="line">   小王</span><br><span class="line">00小王子</span><br></pre></td></tr></table></figure>

<h3 id="获取输入"><a href="#获取输入" class="headerlink" title="获取输入"></a>获取输入</h3><p>Go语言<code>fmt</code>包下有<code>fmt.Scan</code>、<code>fmt.Scanf</code>、<code>fmt.Scanln</code>三个函数，可以在程序运行过程中从标准输入获取用户的输入。</p>
<h4 id="fmt-Scan"><a href="#fmt-Scan" class="headerlink" title="fmt.Scan"></a>fmt.Scan</h4><p>函数定签名如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Scan</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Scan从标准输入扫描文本，读取由空白符分隔的值保存到传递给本函数的参数中，换行符视为空白符。</li>
<li>本函数返回成功扫描的数据个数和遇到的任何错误。如果读取的数据个数比提供的参数少，会返回一个错误报告原因。</li>
</ul>
<p>具体代码示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		name    <span class="keyword">string</span></span><br><span class="line">		age     <span class="keyword">int</span></span><br><span class="line">		married <span class="keyword">bool</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Scan(&amp;name, &amp;age, &amp;married)</span><br><span class="line">	fmt.Printf(<span class="string">"扫描结果 name:%s age:%d married:%t \n"</span>, name, age, married)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将上面的代码编译后在终端执行，在终端依次输入<code>小王子</code>、<code>28</code>和<code>false</code>使用空格分隔。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./scan_demo </span><br><span class="line">小王子 28 <span class="literal">false</span></span><br><span class="line">扫描结果 name:小王子 age:28 married:<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><code>fmt.Scan</code>从标准输入中扫描用户输入的数据，将以空白符分隔的数据分别存入指定的参数。</p>
<h4 id="fmt-Scanf"><a href="#fmt-Scanf" class="headerlink" title="fmt.Scanf"></a>fmt.Scanf</h4><p>函数签名如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Scanf</span><span class="params">(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Scanf从标准输入扫描文本，根据format参数指定的格式去读取由空白符分隔的值保存到传递给本函数的参数中。</li>
<li>本函数返回成功扫描的数据个数和遇到的任何错误。</li>
</ul>
<p>代码示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		name    <span class="keyword">string</span></span><br><span class="line">		age     <span class="keyword">int</span></span><br><span class="line">		married <span class="keyword">bool</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Scanf(<span class="string">"1:%s 2:%d 3:%t"</span>, &amp;name, &amp;age, &amp;married)</span><br><span class="line">	fmt.Printf(<span class="string">"扫描结果 name:%s age:%d married:%t \n"</span>, name, age, married)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将上面的代码编译后在终端执行，在终端按照指定的格式依次输入<code>小王子</code>、<code>28</code>和<code>false</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./scan_demo </span><br><span class="line">1:小王子 2:28 3:<span class="literal">false</span></span><br><span class="line">扫描结果 name:小王子 age:28 married:<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><code>fmt.Scanf</code>不同于<code>fmt.Scan</code>简单的以空格作为输入数据的分隔符，<code>fmt.Scanf</code>为输入数据指定了具体的输入内容格式，只有按照格式输入数据才会被扫描并存入对应变量。</p>
<p>例如，我们还是按照上个示例中以空格分隔的方式输入，<code>fmt.Scanf</code>就不能正确扫描到输入的数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./scan_demo </span><br><span class="line">小王子 28 <span class="literal">false</span></span><br><span class="line">扫描结果 name: age:0 married:<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="fmt-Scanln"><a href="#fmt-Scanln" class="headerlink" title="fmt.Scanln"></a>fmt.Scanln</h4><p>函数签名如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Scanln</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Scanln类似Scan，它在遇到换行时才停止扫描。最后一个数据后面必须有换行或者到达结束位置。</li>
<li>本函数返回成功扫描的数据个数和遇到的任何错误。</li>
</ul>
<p>具体代码示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		name    <span class="keyword">string</span></span><br><span class="line">		age     <span class="keyword">int</span></span><br><span class="line">		married <span class="keyword">bool</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Scanln(&amp;name, &amp;age, &amp;married)</span><br><span class="line">	fmt.Printf(<span class="string">"扫描结果 name:%s age:%d married:%t \n"</span>, name, age, married)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将上面的代码编译后在终端执行，在终端依次输入<code>小王子</code>、<code>28</code>和<code>false</code>使用空格分隔。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./scan_demo </span><br><span class="line">小王子 28 <span class="literal">false</span></span><br><span class="line">扫描结果 name:小王子 age:28 married:<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><code>fmt.Scanln</code>遇到回车就结束扫描了，这个比较常用。</p>
<h4 id="bufio-NewReader"><a href="#bufio-NewReader" class="headerlink" title="bufio.NewReader"></a>bufio.NewReader</h4><p>有时候我们想完整获取输入的内容，而输入的内容可能包含空格，这种情况下可以使用<code>bufio</code>包来实现。示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bufioDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">	reader := bufio.NewReader(os.Stdin) <span class="comment">// 从标准输入生成读对象</span></span><br><span class="line">	fmt.Print(<span class="string">"请输入内容："</span>)</span><br><span class="line">	text, _ := reader.ReadString(<span class="string">'\n'</span>) <span class="comment">// 读到换行</span></span><br><span class="line">	text = strings.TrimSpace(text)</span><br><span class="line">	fmt.Printf(<span class="string">"%#v\n"</span>, text)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Fscan系列"><a href="#Fscan系列" class="headerlink" title="Fscan系列"></a>Fscan系列</h4><p>这几个函数功能分别类似于<code>fmt.Scan</code>、<code>fmt.Scanf</code>、<code>fmt.Scanln</code>三个函数，只不过它们不是从标准输入中读取数据而是从<code>io.Reader</code>中读取数据。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fscan</span><span class="params">(r io.Reader, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fscanln</span><span class="params">(r io.Reader, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fscanf</span><span class="params">(r io.Reader, format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<h4 id="Sscan系列"><a href="#Sscan系列" class="headerlink" title="Sscan系列"></a>Sscan系列</h4><p>这几个函数功能分别类似于<code>fmt.Scan</code>、<code>fmt.Scanf</code>、<code>fmt.Scanln</code>三个函数，只不过它们不是从标准输入中读取数据而是从指定字符串中读取数据。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sscan</span><span class="params">(str <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sscanln</span><span class="params">(str <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sscanf</span><span class="params">(str <span class="keyword">string</span>, format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>






















  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">Show TOC</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">Hide TOC</button>
  <div class="random-toc">
    <h2>Table of Content</h2>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter1：Golang开篇"><span class="toc-text">Chapter1：Golang开篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang方向"><span class="toc-text">Golang方向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Golang应用领域"><span class="toc-text">Golang应用领域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Go语言特点"><span class="toc-text">Go语言特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#goroutine特点"><span class="toc-text">goroutine特点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter2：搭建Go开发环境"><span class="toc-text">Chapter2：搭建Go开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#下载安装"><span class="toc-text">下载安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#下载地址"><span class="toc-text">下载地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux下安装"><span class="toc-text">Linux下安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Go配置环境变量"><span class="toc-text">Go配置环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GOPROXY"><span class="toc-text">GOPROXY</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Go语言快速入门"><span class="toc-text">Go语言快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开发目录结构"><span class="toc-text">开发目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开发步骤"><span class="toc-text">开发步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go执行流程分析"><span class="toc-text">Go执行流程分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译和运行说明"><span class="toc-text">编译和运行说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#跨平台编译"><span class="toc-text">跨平台编译</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go语言开发注意事项"><span class="toc-text">Go语言开发注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go语言转义字符"><span class="toc-text">Go语言转义字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注释与格式化"><span class="toc-text">注释与格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Golang官方指南"><span class="toc-text">Golang官方指南</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dos常用命令"><span class="toc-text">Dos常用命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter3：Golang变量和常量"><span class="toc-text">Chapter3：Golang变量和常量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#标识符与关键字"><span class="toc-text">标识符与关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量介绍"><span class="toc-text">变量介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量使用注意事项"><span class="toc-text">变量使用注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量声明"><span class="toc-text">变量声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量初始化"><span class="toc-text">变量初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#类型推导"><span class="toc-text">类型推导</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#短变量声明"><span class="toc-text">短变量声明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多变量声明"><span class="toc-text">多变量声明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#匿名变量"><span class="toc-text">匿名变量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注意事项"><span class="toc-text">注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断变量类型"><span class="toc-text">判断变量类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常量"><span class="toc-text">常量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#iota"><span class="toc-text">iota</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见的iota示例"><span class="toc-text">常见的iota示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量的数据类型"><span class="toc-text">变量的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本数据类型"><span class="toc-text">基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整型"><span class="toc-text">整型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#特殊整型"><span class="toc-text">特殊整型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#浮点型"><span class="toc-text">浮点型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复数"><span class="toc-text">复数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#布尔型"><span class="toc-text">布尔型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符型（没有专门的字符型，使用byte来保存单个字母字符）"><span class="toc-text">字符型（没有专门的字符型，使用byte来保存单个字母字符）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串"><span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串的常用操作"><span class="toc-text">字符串的常用操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#byte和rune类型"><span class="toc-text">byte和rune类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本数据类型的默认值"><span class="toc-text">基本数据类型的默认值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本数据类型的转换"><span class="toc-text">基本数据类型的转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本数据类型和string的转换"><span class="toc-text">基本数据类型和string的转换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#派生-复杂类型"><span class="toc-text">派生&#x2F;复杂类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#指针（Pointer）"><span class="toc-text">指针（Pointer）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#基本介绍"><span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#错误示范"><span class="toc-text">错误示范</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#new"><span class="toc-text">new</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#make"><span class="toc-text">make</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#值类型和引用类型"><span class="toc-text">值类型和引用类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#标识符的命名规范"><span class="toc-text">标识符的命名规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数组（Array）"><span class="toc-text">数组（Array）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数组定义"><span class="toc-text">数组定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#数组的初始化"><span class="toc-text">数组的初始化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#数组的遍历"><span class="toc-text">数组的遍历</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#多维数组"><span class="toc-text">多维数组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#数组是值类型"><span class="toc-text">数组是值类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#结构体（struct）"><span class="toc-text">结构体（struct）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#切片（slice）"><span class="toc-text">切片（slice）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#切片的定义"><span class="toc-text">切片的定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片的长度和容量"><span class="toc-text">切片的长度和容量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片表达式"><span class="toc-text">切片表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片再切片"><span class="toc-text">切片再切片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#make-函数构造切片"><span class="toc-text">make()函数构造切片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片的本质"><span class="toc-text">切片的本质</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#判断切片是否为空"><span class="toc-text">判断切片是否为空</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片不能直接比较"><span class="toc-text">切片不能直接比较</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片的赋值拷贝"><span class="toc-text">切片的赋值拷贝</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片遍历"><span class="toc-text">切片遍历</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#append-方法为切片添加元素"><span class="toc-text">append()方法为切片添加元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片的扩容策略"><span class="toc-text">切片的扩容策略</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#copy-函数复制切片"><span class="toc-text">copy()函数复制切片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#切片删除元素"><span class="toc-text">切片删除元素</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#管道（Channel）"><span class="toc-text">管道（Channel）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#函数"><span class="toc-text">函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#接口（interface）"><span class="toc-text">接口（interface）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map"><span class="toc-text">map</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#map定义"><span class="toc-text">map定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map基本使用"><span class="toc-text">map基本使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#判断某个键是否存在"><span class="toc-text">判断某个键是否存在</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map的遍历"><span class="toc-text">map的遍历</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#使用delete-函数删除键值对"><span class="toc-text">使用delete()函数删除键值对</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#按照指定顺序遍历map"><span class="toc-text">按照指定顺序遍历map</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#元素为map类型的切片"><span class="toc-text">元素为map类型的切片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#值为切片类型的map"><span class="toc-text">值为切片类型的map</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter4：Golang运算符"><span class="toc-text">Chapter4：Golang运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#算术运算符"><span class="toc-text">算术运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#赋值运算符"><span class="toc-text">赋值运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#比较运算符-关系运算符"><span class="toc-text">比较运算符&#x2F;关系运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑运算符"><span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#位运算符"><span class="toc-text">位运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他运算符"><span class="toc-text">其他运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运算符优先级"><span class="toc-text">运算符优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#键盘输入语句"><span class="toc-text">键盘输入语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#进制"><span class="toc-text">进制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter5：Golang流程控制"><span class="toc-text">Chapter5：Golang流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if-else分支控制"><span class="toc-text">if-else分支控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#switch分支控制"><span class="toc-text">switch分支控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本介绍-1"><span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本语法"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch细节讨论"><span class="toc-text">switch细节讨论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch和if的比较"><span class="toc-text">switch和if的比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for循环控制"><span class="toc-text">for循环控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本语法-1"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注意事项-1"><span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while和do…while实现"><span class="toc-text">while和do…while实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#while实现"><span class="toc-text">while实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#do…while实现"><span class="toc-text">do…while实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多重循环控制"><span class="toc-text">多重循环控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本介绍-2"><span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码案例"><span class="toc-text">代码案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#跳转控制语句-break"><span class="toc-text">跳转控制语句-break</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#跳转控制语句-continue"><span class="toc-text">跳转控制语句-continue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#跳转控制语句-goto"><span class="toc-text">跳转控制语句-goto</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#跳转控制语句-return"><span class="toc-text">跳转控制语句-return</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter6：Golang函数"><span class="toc-text">Chapter6：Golang函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数-1"><span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本介绍-3"><span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本语法-2"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量作用域"><span class="toc-text">变量作用域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#包"><span class="toc-text">包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#包的介绍"><span class="toc-text">包的介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#包的使用及注意事项"><span class="toc-text">包的使用及注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数-调用机制"><span class="toc-text">函数-调用机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#调用过程"><span class="toc-text">调用过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#return语句"><span class="toc-text">return语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数-递归调用"><span class="toc-text">函数-递归调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#斐波那契数列"><span class="toc-text">斐波那契数列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#台阶问题"><span class="toc-text">台阶问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码分析"><span class="toc-text">代码分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#递归重要原则"><span class="toc-text">递归重要原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数注意事项和细节（重要）"><span class="toc-text">函数注意事项和细节（重要）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#init函数"><span class="toc-text">init函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本介绍-4"><span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注意事项和细节"><span class="toc-text">注意事项和细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#匿名函数"><span class="toc-text">匿名函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用方式"><span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全局匿名函数"><span class="toc-text">全局匿名函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#闭包"><span class="toc-text">闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#案例演示"><span class="toc-text">案例演示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer语句"><span class="toc-text">defer语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#defer的执行时机"><span class="toc-text">defer的执行时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defer经典案例"><span class="toc-text">defer经典案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defer面试题"><span class="toc-text">defer面试题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内置函数"><span class="toc-text">内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#panic-recover"><span class="toc-text">panic&#x2F;recover</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter7：Golang结构体"><span class="toc-text">Chapter7：Golang结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#类型别名和自定义类型"><span class="toc-text">类型别名和自定义类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义类型"><span class="toc-text">自定义类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型别名"><span class="toc-text">类型别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型定义和类型别名的区别"><span class="toc-text">类型定义和类型别名的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#struct结构体"><span class="toc-text">struct结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体的定义"><span class="toc-text">结构体的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体实例化"><span class="toc-text">结构体实例化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#匿名结构体"><span class="toc-text">匿名结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建指针类型结构体"><span class="toc-text">创建指针类型结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#取结构体的地址实例化"><span class="toc-text">取结构体的地址实例化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体初始化"><span class="toc-text">结构体初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体内存布局"><span class="toc-text">结构体内存布局</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#空结构体"><span class="toc-text">空结构体</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造函数"><span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法和接收者"><span class="toc-text">方法和接收者</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#指针类型接收者"><span class="toc-text">指针类型接收者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#值类型的接收者"><span class="toc-text">值类型的接收者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么时候应该使用指针类型接收者"><span class="toc-text">什么时候应该使用指针类型接收者</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#任意类型添加方法"><span class="toc-text">任意类型添加方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体的匿名字段"><span class="toc-text">结构体的匿名字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#嵌套结构体"><span class="toc-text">嵌套结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#嵌套匿名结构体"><span class="toc-text">嵌套匿名结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#嵌套结构体的字段名冲突"><span class="toc-text">嵌套结构体的字段名冲突</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体的“继承”"><span class="toc-text">结构体的“继承”</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter8：Golang常用标准库"><span class="toc-text">Chapter8：Golang常用标准库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#fmt"><span class="toc-text">fmt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#向外输出"><span class="toc-text">向外输出</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Print"><span class="toc-text">Print</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fprint"><span class="toc-text">Fprint</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sprint"><span class="toc-text">Sprint</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Errorf"><span class="toc-text">Errorf</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#格式化占位符"><span class="toc-text">格式化占位符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通用占位符"><span class="toc-text">通用占位符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#布尔型-1"><span class="toc-text">布尔型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#整型-1"><span class="toc-text">整型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#浮点数与复数"><span class="toc-text">浮点数与复数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串和-byte"><span class="toc-text">字符串和[]byte</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#指针"><span class="toc-text">指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#宽度标识符"><span class="toc-text">宽度标识符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他falg"><span class="toc-text">其他falg</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取输入"><span class="toc-text">获取输入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#fmt-Scan"><span class="toc-text">fmt.Scan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fmt-Scanf"><span class="toc-text">fmt.Scanf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fmt-Scanln"><span class="toc-text">fmt.Scanln</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bufio-NewReader"><span class="toc-text">bufio.NewReader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fscan系列"><span class="toc-text">Fscan系列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sscan系列"><span class="toc-text">Sscan系列</span></a></li></ol></li></ol></li></ol></li></ol>
  </div>
</div>

  
<nav id="pagination">
  
    <a href="/2020/05/11/Transformer%E4%B8%8EBERT%E6%A8%A1%E5%9E%8B/" class="prev">&larr; Prev post Transformer与BERT模型</a>
  

  

  
    <a href="/2020/05/11/LeetCode%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%A2%98%E8%A7%A3/" class="next">Next post LeetCode动态规划题解 &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by John Doe using
      <a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random" target="_blank" rel="noopener">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>


<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="https://avatars2.githubusercontent.com/u/2735087?s=60&u=775d4033139cae6b23c593bcf59fa433224ba4e3&v=4">
    <p id="description"></p>
    <ul class="social-icon">
  
  
    <li>
      <a href="https://github.com/stiekel" target="_blank" rel="noopener">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://weibo.com/sidcn" target="_blank" rel="noopener">
        
          <i class="icon iconfont weibo">&#xe602;</i>
        
      </a>
    </li>
  
    <li>
      <a href="histkc@gmail.com">
        
          M
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["flash"],"timer":true,"delay":1500000,"shuffle":true,"count":12};
var unsplashConfig = {"gravity":"center"};
// is show background images
var turnoffBackgroundImage = false;




var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

